!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Adjust=t():e.Adjust=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=25)}([function(e,t,n){var r=n(1);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(15),o=n(16),i=n(8),a=n(17);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,s=function(e,t){m[o]=e,m[o+1]=t,2===(o+=2)&&(a?a(h):w())},u="undefined"!=typeof window?window:void 0,c=u||{},l=c.MutationObserver||c.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(h,1)}}var m=new Array(1e3);function h(){for(var e=0;e<o;e+=2)(0,m[e])(m[e+1]),m[e]=void 0,m[e+1]=void 0;o=0}var v,g,y,b,w=void 0;function k(e,t){var n=this,r=new this.constructor(S);void 0===r[x]&&C(r);var o=n._state;if(o){var i=arguments[o-1];s((function(){return E(o,r,i,n._result)}))}else N(n,r,e,t);return r}function _(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(S);return j(t,e),t}d?w=function(){return t.nextTick(h)}:l?(g=0,y=new l(h),b=document.createTextNode(""),y.observe(b,{characterData:!0}),w=function(){b.data=g=++g%2}):f?((v=new MessageChannel).port1.onmessage=h,w=function(){return v.port2.postMessage(0)}):w=void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(h)}:p()}catch(e){return p()}}():p();var x=Math.random().toString(36).substring(2);function S(){}function P(t,n,r){n.constructor===t.constructor&&r===k&&n.constructor.resolve===_?function(e,t){1===t._state?I(e,t._result):2===t._state?T(e,t._result):N(t,void 0,(function(t){return j(e,t)}),(function(t){return T(e,t)}))}(t,n):void 0===r?I(t,n):e(r)?function(e,t,n){s((function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?j(e,n):I(e,n))}),(function(t){r||(r=!0,T(e,t))}),e._label);!r&&o&&(r=!0,T(e,o))}),e)}(t,n,r):I(t,n)}function j(e,t){if(e===t)T(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(r=t),null===r||"object"!==o&&"function"!==o)I(e,t);else{var n=void 0;try{n=t.then}catch(t){return void T(e,t)}P(e,t,n)}var r,o}function D(e){e._onerror&&e._onerror(e._result),O(e)}function I(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(O,e))}function T(e,t){void 0===e._state&&(e._state=2,e._result=t,s(D,e))}function N(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+1]=n,o[i+2]=r,0===i&&e._state&&s(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?E(n,r,o,i):o(i);e._subscribers.length=0}}function E(t,n,r,o){var i=e(r),a=void 0,s=void 0,u=!0;if(i){try{a=r(o)}catch(e){u=!1,s=e}if(n===a)return void T(n,new TypeError("A promises callback cannot return that same promise."))}else a=o;void 0!==n._state||(i&&u?j(n,a):!1===u?T(n,s):1===t?I(n,a):2===t&&T(n,a))}var A=0;function C(e){e[x]=A++,e._state=void 0,e._result=void 0,e._subscribers=[]}var R=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[x]||C(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&I(this.promise,this._result))):T(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===_){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(e){a=!0,i=e}if(o===k&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===M){var s=new n(S);a?T(s,i):P(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===e?T(r,n):this._result[t]=n),0===this._remaining&&I(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;N(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}(),M=function(){function t(e){this[x]=A++,this._result=this._state=void 0,this._subscribers=[],S!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){j(e,t)}),(function(t){T(e,t)}))}catch(t){T(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return M.prototype.then=k,M.all=function(e){return new R(this,e).promise},M.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},M.resolve=_,M.reject=function(e){var t=new this(S);return T(t,e),t},M._setScheduler=function(e){a=e},M._setAsap=function(e){s=e},M._asap=s,M.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=M},M.Promise=M,M},e.exports=r()}).call(this,n(13),n(14))},function(e,t,n){var r=n(21);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(23)(r,o);r.locals&&(e.exports=r.locals)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(18),o=n(19),i=n(8),a=n(20);e.exports=function(e){return r(e)||o(e)||i(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(9);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(12);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||l||s(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(9);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){(t=e.exports=n(22)(!1)).push([e.i,".adjust-smart-banner__1Xb2YvQsm_ZuqGpC3GYV1K{height:76px}@media (min-width: 428px){.adjust-smart-banner__1Xb2YvQsm_ZuqGpC3GYV1K{height:0}}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH{position:fixed;left:0;right:0;z-index:10000000}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH.adjust-smart-banner__1gDv13AgIJ63OmoMUWN6vd{top:0}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH.adjust-smart-banner__2Xpm01sHnZNYOOkNk05cAc{bottom:0}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5{margin:0 auto;max-width:428px;background:white}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT{display:flex;align-items:center;padding:10px 8px 10px 4px}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT .adjust-smart-banner__3PQ7z78EskytjOkrU199hE{width:32px;height:32px;border:none;background:url(\"data:image/svg+xml;utf8,    <svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 16 16'>      <path d='M1 0 L0 1 L15 16 L16 15 L1 0' fill='%236e7492'/>      <path d='M16 1 L16 1 L1 16 L0 15 L15 0' fill='%236e7492'/>    </svg>\");background-repeat:no-repeat;background-position:center center;background-size:8px 8px, auto;cursor:pointer}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT .adjust-smart-banner__L_BSzs7rJajVPX4zdt2R6{width:56px;height:56px;overflow:hidden;background-color:#6e7492;border-radius:8px}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT .adjust-smart-banner__L_BSzs7rJajVPX4zdt2R6 .adjust-smart-banner__3Yj45mdOZKIOH2d6Z2UXXa{display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:#353a52;font-weight:bold;font-size:23px;font-family:ArialMt,Arial,sans-serif;line-height:32px;background-color:#e0e2ec}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT .adjust-smart-banner__L_BSzs7rJajVPX4zdt2R6 .adjust-smart-banner__4hg0kzTWzWiGjzCDqbktp{width:100%}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT .adjust-smart-banner__3mbKdOA0SmqrfOLvHomXyc{flex:1 1 0%;min-height:0;min-width:0;margin:0 12px}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT .adjust-smart-banner__3DSKm9idx4dze89DWsCMXr{overflow:hidden;text-overflow:ellipsis}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT h4{margin:5px 0 8px;color:#353a52;font-family:Arial-BoldMT,ArialMt,Arial,sans-serif;font-size:12px;font-weight:bold;line-height:16px;white-space:nowrap}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT p{margin:8px 0 7px;color:#353a52;font-family:ArialMt,Arial,sans-serif;font-size:9px;line-height:11px;max-height:22px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH .adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5 .adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT .adjust-smart-banner__3_w6WNex3gOuKV8gztVNoI{color:#6e7492;background:#f9fafc;border:1px solid #cdd0e0;border-radius:4px;border-color:#6e7492;box-shadow:inset 0px -1px 0px 0px #e0e2ec;padding:4px 6.5px;display:inline-block;vertical-align:middle;text-align:center;font-family:ArialMt,Arial,sans-serif;font-size:12px;font-weight:500;line-height:16px;cursor:pointer;text-decoration:none}\n",""]),t.locals={bannerContainer:"adjust-smart-banner__1Xb2YvQsm_ZuqGpC3GYV1K",banner:"adjust-smart-banner__Dw5N6VeDUP14gIEdMH7SH",stickyToTop:"adjust-smart-banner__1gDv13AgIJ63OmoMUWN6vd",stickyToBottom:"adjust-smart-banner__2Xpm01sHnZNYOOkNk05cAc",bannerBody:"adjust-smart-banner__YV2trFakzl9_mm1H-9Ht5",content:"adjust-smart-banner__31MvUOHjvsAEpS_14bUpGT",dismiss:"adjust-smart-banner__3PQ7z78EskytjOkrU199hE",appIcon:"adjust-smart-banner__L_BSzs7rJajVPX4zdt2R6",placeholder:"adjust-smart-banner__3Yj45mdOZKIOH2d6Z2UXXa",image:"adjust-smart-banner__4hg0kzTWzWiGjzCDqbktp",textContainer:"adjust-smart-banner__3mbKdOA0SmqrfOLvHomXyc",bannerText:"adjust-smart-banner__3DSKm9idx4dze89DWsCMXr",action:"adjust-smart-banner__3_w6WNex3gOuKV8gztVNoI"}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},u=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),c=null,l=0,d=[],f=n(24);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(b(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function m(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(e,t){var n=u(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=u(e.insertAt.before,n);n.insertBefore(t,o)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return y(t,e.attrs),h(e,t),t}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=l++;n=c||(c=g(t)),r=_.bind(null,n,a,!1),o=_.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),h(e,t),t}(t),r=S.bind(null,n,t),o=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),r=x.bind(null,n),o=function(){v(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=m(e,t);return p(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}e&&p(m(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete i[s.id]}}}};var w,k=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function _(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function x(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function S(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=f(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(10),a=n.n(i),s=n(2),u=n.n(s),c=n(7),l=n.n(c),d={TRANSACTION_ERROR:"XHR transaction failed due to an error",SERVER_MALFORMED_RESPONSE:"Response from server is malformed",SERVER_INTERNAL_ERROR:"Internal error occurred on the server",SERVER_CANNOT_PROCESS:"Server was not able to process the request, probably due to error coming from the client",NO_CONNECTION:"No internet connectivity",SKIP:"Skipping slower attempt",MISSING_URL:"Url is not provided"},f="noStorage",p="indexedDB",m="localStorage",h=n(1),v=n.n(h),g=n(11),y=n.n(g);function b(e){return!Object.keys(e).length&&e.constructor===Object}function w(e){return"object"===y()(e)&&null!==e&&!(e instanceof Array)}function k(e){try{return w(JSON.parse(e))}catch(e){return!1}}function _(e,t,n){function r(e){return Array.isArray(t)?t.every((function(t){return e[t]===n[t]})):e[t]===n}for(var o=0;o<e.length;o+=1)if(r(e[o]))return o;return-1}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return o()(o()({},e),{},v()({},t.key,t.value))}),{})}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter((function(e){return-1!==t.indexOf(e)}))}function P(e,t){return new RegExp("\\/".concat(t,"(\\/.*|\\?.*){0,1}$")).test(e)}function j(e,t){var n=u()(t,2),r=n[0],i=n[1];return o()(o()({},e),{},v()({},r,i))}function D(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function I(e){return Object.keys(e).map((function(t){return e[t]}))}function T(e){return w(e)?!b(e):!!e||0===e}var N,O={namespace:"adjust-sdk",version:"5.2.0",env:"production"},E=(N={},v()(N,"none",-1),v()(N,"error",0),v()(N,"warning",1),v()(N,"info",2),v()(N,"verbose",3),N),A={log:"  ",info:" ",warn:" ",error:""},C={development:"verbose",production:"error",test:"verbose"},R=B(),M="";function B(){return C[O.env]||"error"}function U(e,t){var n;if(!(E[R]<E[t])){for(var r=(new Date).toISOString(),o=A[e],i=["[".concat(O.namespace,"]"),r,"".concat(e.toUpperCase(),":").concat(o)],a=M?document.querySelector(M):null,s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];(n=console)[e].apply(n,i.concat(u)),a&&(a.textContent+="".concat(i.join(" ")," ").concat(u.map((function(e){return w(e)?JSON.stringify(e):e})).join(" "),"\n"),a.scrollTop=a.scrollHeight)}}function L(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];U.apply(void 0,[e,t].concat(r))}}var H={setLogLevel:function(e,t){e&&-1===Object.keys(E).indexOf(e)?U("error","error","You must set one of the available log levels: verbose, info, warning, error or none"):(R=e||B(),M=t||M,U("info",e,"Log level set to ".concat(R)))},log:L("log","verbose"),info:L("info","info"),warn:L("warn","warning"),error:L("error","error")},q={},K={},F=["appToken","environment"],V=[].concat(F,["defaultTracker","externalDeviceId"]),z=["urlStrategy","customUrl","eventDeduplicationListLimit","namespace"],G={sessionWindow:18e5,sessionTimerWindow:6e4,requestValidityWindow:24192e5};function Y(e){var t=F.filter((function(t){return!e[t]}));return!!t.length&&(H.error("You must define ".concat(function(e){if(!e.length)return"";if(1===e.length)return"".concat(e[0]);var t=e.length-1,n=e.slice(0,t).join(", ");return"".concat(n," and ").concat(e[t])}(t))),!0)}var W,J,X,Q,Z,$=o()(o()({},G),{},{set:function(e){if(!Y(e)){var t=[].concat(l()(V),z).filter((function(t){return!!e[t]})).map((function(t){return[t,e[t]]}));q=t.filter((function(e){var t=u()(e,1)[0];return-1!==V.indexOf(t)})).reduce(j,{}),K=t.filter((function(e){var t=u()(e,1)[0];return-1!==z.indexOf(t)})).reduce(j,{})}},getBaseParams:function(){return o()({},q)},getCustomConfig:function(){return o()({},K)},isInitialised:function(){return F.reduce((function(e,t){return e&&!!q[t]}),!0)},hasMissing:Y,destroy:function(){q={},K={}}});!function(e){e.Queue="queue",e.ActivityState="activityState",e.GlobalParams="globalParams",e.EventDeduplication="eventDeduplication"}(J||(J={})),function(e){e.Preferences="preferences"}(X||(X={})),function(e){e.Queue="q",e.ActivityState="as",e.GlobalParams="gp",e.EventDeduplication="ed"}(Q||(Q={})),function(e){e.Preferences="p"}(Z||(Z={}));var ee={fields:{thirdPartySharingDisabled:{key:"td",keys:{reason:{key:"r",values:v()({},"general",1)},pending:{key:"p",values:{false:0,true:1}}}},sdkDisabled:{key:"sd",keys:{reason:{key:"r",values:(W={},v()(W,"general",1),v()(W,"gdpr",2),W)},pending:{key:"p",values:{false:0,true:1}}}}}};function te(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"values")}function ne(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"keys")}function re(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"composite")}function oe(e){return!!e&&"string"!=typeof e}var ie={queue:{name:Q.Queue,scheme:{keyPath:"timestamp",autoIncrement:!1,fields:{url:{key:"u",values:{"/session":1,"/event":2,"/gdpr_forget_device":3,"/sdk_click":4,"/disable_third_party_sharing":5}},method:{key:"m",values:{GET:1,POST:2,PUT:3,DELETE:4}},timestamp:"t",createdAt:"ca",params:{key:"p",keys:{timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastInterval:"li",eventToken:"et",revenue:"re",currency:"cu",callbackParams:"cp",partnerParams:"pp"}}}}},activityState:{name:Q.ActivityState,scheme:{keyPath:"uuid",autoIncrement:!1,fields:{uuid:{key:"u",values:{unknown:"-"}},timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastActive:"la",lastInterval:"li",installed:{key:"in",values:{false:0,true:1}},attribution:{key:"at",keys:{adid:"a",tracker_token:"tt",tracker_name:"tn",network:"nt",campaign:"cm",adgroup:"ag",creative:"cr",click_label:"cl",state:{key:"st",values:{installed:1,reattributed:2}}}}}}},globalParams:{name:Q.GlobalParams,scheme:{keyPath:"keyType",autoIncrement:!1,index:"type",fields:{keyType:{key:"kt",composite:["key","type"]},key:"k",value:"v",type:{key:"t",values:{callback:1,partner:2}}}}},eventDeduplication:{name:Q.EventDeduplication,scheme:{keyPath:"internalId",autoIncrement:!0,fields:{internalId:"ii",id:"i"}}},preferences:{name:Z.Preferences,scheme:ee,permanent:!0}};function ae(e){try{return JSON.parse(e)}catch(t){return e}}function se(e,t,n){var r,i=te(n)?{values:(r=n.values,D(r).map((function(e){var t=u()(e,2),n=t[0];return[t[1],ae(n)]})).reduce(j,{}))}:{},a=ne(n)?{keys:ue(e,n.keys)}:{},s=re(n)?{composite:n.composite.map((function(t){return ce(e,t)}))}:{};return o()(o()(o()({key:t},i),a),s)}function ue(e,t){return D(t).map((function(t){var n=u()(t,2),r=n[0],o=n[1];return oe(o)?[o.key,se(e,r,o)]:[o,r]})).reduce(j,{})}function ce(e,t){if(t){var n=ie[e].scheme.fields[t];return oe(n)?n.key:n||t}}var le,de,fe,pe=D(ie).map((function(e){var t=u()(e,2),n=t[0],r=t[1];return[n,{keyPath:r.scheme.keyPath,autoIncrement:r.scheme.autoIncrement,index:r.scheme.index,fields:r.scheme.fields}]})).reduce(j,{}),me=D(pe).map((function(e){var t=u()(e,2),n=t[0],r=t[1];return[n,{keyPath:ce(n,r.keyPath),autoIncrement:r.autoIncrement,index:ce(n,r.index),fields:ue(n,r.fields)}]})).reduce(j,{}),he=D(ie).reduce((function(e,t){var n=u()(t,2)[1];return e.concat(n.scheme.fields)}),[]).map((function(e){return I(e).filter(te).map((function(e){return D(e.values)})).reduce((function(e,t){return e.concat(t)}),[])})).reduce((function(e,t){return e.concat(t)}),[]).reduce(j,{}),ve=D(ie).map((function(e){var t=u()(e,2),n=t[0],r=t[1];return[n,{name:r.name,permanent:r.permanent}]})).reduce(j,{}),ge={left:pe,right:me,values:he,storeNames:{left:ve,right:(le=ve,D(le).map((function(e){var t=u()(e,2),n=t[0],r=t[1],o={name:n,permanent:r.permanent};return[r.name,o]})).reduce(j,{}))}};"undefined"==typeof Promise&&n(3).Promise;function ye(e){return w(e)}function be(e,t){return e&&void 0!==e[t]?e[t]:t}function we(e,t,n,r){if(n){var i=r||ge[t][Se(e,fe.right)].fields;return D(n).map((function(n){var r=u()(n,2),o=r[0],a=r[1];return function(e,t,n,r,o){if(!o)return[n,r];var i=oe(o)?o.key:o;return ye(r)?[i,we(e,t,r,ne(o)?o.keys:null)]:[i,be(te(o)?o.values:null,r)]}(e,t,o,a,i[o])})).reduce((function(e,t){var n=u()(t,2),r=n[0],i=n[1];return o()(o()({},e),{},v()({},r,i))}),{})}}function ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.map((function(n){return we(e,t,n)}))}function _e(e,t,n){var r=ge[t][Se(e,fe.right)],o=r.fields[r.keyPath],i=n instanceof Array?n.slice():[n],a=(re(o)?o.composite:[r.keyPath]).map((function(e,t){var n=r.fields[e];return be(te(n)?n.values:null,i[t])}));return 1===a.length?a[0]:a}function xe(e){return ge.values[e]||e}function Se(e,t){return(ge.storeNames[t][e]||{}).name||e}function Pe(e,t){return{name:t.name,message:t.message.replace('"'.concat(e,'"'),Se(e,fe.right))}}!function(e){e.LowerBound="lowerBound",e.UpperBound="upperBound"}(de||(de={})),function(e){e.right="right",e.left="left"}(fe||(fe={}));var je=n(5),De=n.n(je),Ie=n(6),Te=n.n(Ie);function Ne(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e+"",r=1;r<=t;r+=1)e<Math.pow(10,r)&&(n="0".concat(n));return n}function Oe(e){var t=e?new Date(e):new Date,n=function(e){var t=Ne(e.getDate()),n=Ne(e.getMonth()+1);return[e.getFullYear(),n,t].join("-")}(t),r=function(e){var t=Ne(e.getHours(),1),n=Ne(e.getMinutes()),r=Ne(e.getSeconds()),o=Ne(e.getMilliseconds(),2);return[t,n,r].join(":")+"."+o}(t),o=function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Ne(Math.floor(Math.abs(t)/60))+Ne(Math.abs(t)%60)}(t);return"".concat(n,"T").concat(r,"Z").concat(o)}function Ee(e,t){return isNaN(e)||isNaN(t)?0:Math.abs(t-e)}var Ae={},Ce=!1,Re=!1;function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ae=Ce?o()({},e):{}}function Be(){Ce&&(Ae.lastInterval=function(){var e=Ae.lastActive;if(e)return Math.round(Ee(e,Date.now())/1e3);return-1}(),Ae.lastActive=Date.now())}function Ue(e){Ae=o()(o()({},Ae),e)}function Le(){Re=!0}function He(){var e=Ae.lastActive;return Math.round(Ee(e,Date.now())/1e3)}function qe(){return(Ae.timeSpent||0)+(Re?He():0)}function Ke(){var e=Ee(Ae.lastActive,Date.now())<$.sessionWindow,t=Re||!Re&&e;return(Ae.sessionLength||0)+(t?He():0)}function Fe(){Ce&&(Ue({timeSpent:qe(),sessionLength:Ke()}),Be())}var Ve={get current(){return Ce?o()({},Ae):{}},set current(e){Me(e)},init:function(e){Ce=!0,Me(e)},isStarted:function(){return Ce},toForeground:Le,toBackground:function(){Re=!1},initParams:function(){Fe(),Le()},getParams:function(e){if(!Ce)return null;var t=Ae.lastInterval>=0?Ae.lastInterval:0,n={timeSpent:Ae.timeSpent||0,sessionLength:Ae.sessionLength||0,sessionCount:Ae.sessionCount||1,lastInterval:t||0};return e&&P(e,"event")&&(n.eventCount=Ae.eventCount),n},updateParams:function(e,t){if(Ce){var n={};n.timeSpent=qe(),n.sessionLength=Ke(),P(e,"session")&&(n.sessionCount=(Ae.sessionCount||0)+1),P(e,"event")&&(n.eventCount=(Ae.eventCount||0)+1),Ue(n),t||Be()}},updateInstalled:function(){Ce&&(Ae.installed||Ue({installed:!0}))},updateSessionOffset:Fe,updateSessionLength:function(){Ce&&(Ue({sessionLength:Ke()}),Be())},resetSessionOffset:function(){Ce&&Ue({timeSpent:0,sessionLength:0})},updateLastActive:Be,destroy:function(){Ae={},Ce=!1,Re=!1}},ze={},Ge=[];function Ye(e,t){var n="id"+Math.random().toString(36).substr(2,16),r={id:n,cb:t};return ze[e]||(ze[e]=[]),ze[e].push(r),n}function We(e,t){ze[e]&&ze[e].forEach((function(n){"function"==typeof n.cb&&Ge.push(setTimeout((function(){return n.cb(e,t)})))}))}var Je=new(function(){function e(){var t=this;De()(this,e),v()(this,"defaultName",O.namespace),v()(this,"storageName",this.defaultName),v()(this,"storeNames",ge.storeNames.left),v()(this,"storesMap",void 0),this.storesMap={};var n=this.read.bind(this),r=this.write.bind(this);I(this.storeNames).forEach((function(e){var o=e.name;Object.defineProperty(t.storesMap,o,{get:function(){return n(o)},set:function(e){r(o,e)}})})),Object.freeze(this.storesMap)}return Te()(e,[{key:"read",value:function(e){var t=localStorage.getItem("".concat(this.storageName,".").concat(e)),n=t?JSON.parse(t):null;return e===Z.Preferences&&n?we(Z.Preferences,fe.right,n):n}},{key:"write",value:function(e,t){t?localStorage.setItem("".concat(this.storageName,".").concat(e),JSON.stringify(t instanceof Array?t:we(Z.Preferences,fe.left,t))):localStorage.removeItem("".concat(this.storageName,".").concat(e))}},{key:"clear",value:function(){this.deleteData()}},{key:"deleteData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];I(this.storeNames).forEach((function(n){!t&&n.permanent||localStorage.removeItem("".concat(e.storageName,".").concat(n.name))}))}},{key:"setCustomName",value:function(e){var t=this;if(e&&e.length){var n="".concat(O.namespace,"-").concat(e);I(this.storeNames).forEach((function(e){var r=e.name,o=localStorage.getItem("".concat(t.storageName,".").concat(r));o&&localStorage.setItem("".concat(n,".").concat(r),o)})),this.deleteData(!0),this.storageName=n}}},{key:"stores",get:function(){return this.storesMap}}]),e}()),Xe=ie.preferences.name,Qe=Ze();function Ze(){return Qe||$e(),Qe?o()({},Qe):null}function $e(){Qe=Je.stores[Xe]}function et(){var e=Ze();return e?e.sdkDisabled:null}function tt(e){var t=e?o()({},e):null;Je.stores[Xe]=o()(o()({},Ze()),{},{sdkDisabled:t}),$e()}function nt(){var e=Ze();return e?e.thirdPartySharingDisabled:null}function rt(){var e=Je.stores[Xe]||{},t=(Qe||{}).sdkDisabled||null;e.sdkDisabled&&!t&&We("sdk:shutdown"),$e()}function ot(){Je.stores[Xe]||(Je.stores[Xe]=o()({},Qe))}var it,at,st="undefined"==typeof Promise?n(3).Promise:Promise;!function(e){e.add="add",e.put="put",e.get="get",e.list="list",e.clear="clear",e.delete="delete"}(it||(it={})),function(e){e.readonly="readonly",e.readwrite="readwrite"}(at||(at={}));var ut=function(){function e(){De()(this,e),v()(this,"dbDefaultName",O.namespace),v()(this,"dbName",this.dbDefaultName),v()(this,"dbVersion",1),v()(this,"idbFactory",void 0),v()(this,"indexedDbConnection",null),v()(this,"notSupportedError",{name:"IDBNotSupported",message:"IndexedDB is not supported"}),v()(this,"databaseOpenError",{name:"CannotOpenDatabaseError",message:"Cannot open a database"}),v()(this,"noConnectionError",{name:"NoDatabaseConnection",message:"Cannot open a transaction"});var t=e.getIndexedDB();if(!t)throw this.notSupportedError;this.idbFactory=t}return Te()(e,[{key:"setCustomName",value:function(e){return e&&e.length>0?(this.dbName="".concat(O.namespace,"-").concat(e),this.migrateDb(this.dbDefaultName,this.dbName)):st.resolve()}},{key:"openDatabase",value:function(t,n,r){var o=this;return e.isSupported().then((function(e){return e?new st((function(e,i){var a=o.idbFactory.open(t,r);n&&(a.onupgradeneeded=function(e){return n(e,i)}),a.onsuccess=function(t){var n=t.target.result;n?e(n):i(o.databaseOpenError)},a.onerror=i})):st.reject(o.notSupportedError)}))}},{key:"databaseExists",value:function(e){var t=this;return new st((function(n){var r=!0;t.openDatabase(e,(function(){r=!1})).then((function(n){if(n.close(),!r)return t.deleteDatabaseByName(e)})).then((function(){return n(r)}))}))}},{key:"cloneData",value:function(e,t){var n=this;return I(ge.storeNames.left).map((function(e){return e.name})).filter((function(e){return"p"!==e})).map((function(r){return function(){return o=r,i=n.indexedDbConnection,n.indexedDbConnection=e,n.getAll(o).then((function(e){if(n.indexedDbConnection=t,!(e.length<1))return n.addBulk(o,e,!0)})).then((function(){n.indexedDbConnection=i}));var o,i}})).reduce((function(e,t){return e.then(t)}),st.resolve())}},{key:"migrateDb",value:function(e,t){var n=this;return this.databaseExists(e).then((function(r){return r?st.all([n.openDatabase(e,n.handleUpgradeNeeded,n.dbVersion),n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion)]).then((function(t){var r=u()(t,2),o=r[0],i=r[1];return n.cloneData(o,i).then((function(){return n.indexedDbConnection=i,o.close(),n.deleteDatabaseByName(e)}))})).then((function(){return H.info("Database migration finished")})):n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion).then((function(e){n.indexedDbConnection=e}))}))}},{key:"handleUpgradeNeeded",value:function(e,t){var n=e.target.result;e.target.transaction.onerror=t,e.target.transaction.onabort=t;var r=ge.storeNames.left,o=Ve.current||{},i=o&&!b(o);D(r).filter((function(e){return!u()(e,2)[1].permanent})).forEach((function(e){var t=u()(e,2),r=t[0],a=t[1].name,s=ge.right[r],c=n.createObjectStore(a,{keyPath:s.keyPath,autoIncrement:s.autoIncrement||!1});if(s.index&&c.createIndex("".concat(s.index,"Index"),s.index),a===Q.ActivityState&&i)return c.add(we(r,fe.left,o)),void H.info("Activity state has been recovered");var l=Je.stores[a];l&&(l.forEach((function(e){return c.add(e)})),H.info("Migration from localStorage done for ".concat(r," store")))})),ot(),Je.clear()}},{key:"open",value:function(){var e=this;return this.indexedDbConnection?st.resolve({success:!0}):this.openDatabase(this.dbName,this.handleUpgradeNeeded,this.dbVersion).then((function(t){return e.indexedDbConnection=t,e.indexedDbConnection.onclose=function(){return e.destroy},{success:!0}}))}},{key:"getTransactionStore",value:function(e,t,n){var r,o=e.storeName,i=e.mode,a=n.transaction([o],i),s=a.objectStore(o),u=ge.right[Se(o,fe.right)];return u.index&&(r=s.index("".concat(u.index,"Index"))),a.onerror=t,a.onabort=t,{transaction:a,store:s,index:r,options:u}}},{key:"overrideError",value:function(e,t){var n=t.target.error;return e({name:n.name,message:n.message})}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return re(t)?t.composite:null}},{key:"targetIsObject",value:function(e){return w(e)}},{key:"prepareTarget",value:function(e,t,n){if(n===it.clear||!t)return null;var r=this.getCompositeKeys(e);return-1!==[it.add,it.put].indexOf(n)?this.targetIsObject(t)?r?o()(v()({},e.keyPath,r.map((function(e){return t[e]})).join("")),t):t:null:t instanceof Array?t.join(""):t}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n&&this.targetIsObject(t)?n.map((function(e){return t[e]})):null}},{key:"initRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=void 0===r?null:r,i=e.action,a=e.mode,s=void 0===a?at.readonly:a;return this.open().then((function(){return new st((function(e,r){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:s},r,t.indexedDbConnection),u=a.store,c=a.options,l=u[i](t.prepareTarget(c,o,i)),d=t.prepareResult(c,o);l.onsuccess=function(){i!==it.get||l.result?e(d||l.result||o):r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(n,'" store')})},l.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)}))}))}},{key:"initBulkRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=e.action,i=e.mode,a=void 0===i?at.readwrite:i;return!r||r&&!r.length?st.reject({name:"NoTargetDefined",message:"No array provided to perform ".concat(o,' bulk operation into "').concat(n,'" store')}):this.open().then((function(){return new st((function(e,i){if(t.indexedDbConnection){var s=t.getTransactionStore({storeName:n,mode:a},i,t.indexedDbConnection),u=s.transaction,c=s.store,l=s.options,d=new Array,f=r[0];u.oncomplete=function(){return e(d)};!function e(n){n.onerror=function(e){return t.overrideError(i,e)},n.onsuccess=function(){d.push(t.prepareResult(l,f)||n.result),f=r[d.length],d.length<r.length&&e(c[o](t.prepareTarget(l,f,o)))}}(c[o](t.prepareTarget(l,f,o)))}else i(t.noConnectionError)}))}))}},{key:"openCursor",value:function(e){var t=this,n=e.storeName,r=e.action,o=e.range,i=void 0===o?null:o,a=e.firstOnly,s=void 0!==a&&a,u=e.mode,c=void 0===u?at.readonly:u;return this.open().then((function(){return new st((function(e,o){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:c},o,t.indexedDbConnection),u=a.transaction,l=a.store,d=a.index,f=a.options,p=(d||l).openCursor(i),m=new Array;u.oncomplete=function(){return e(m)},p.onsuccess=function(e){var n=e.target.result;n&&(r===it.delete?(n.delete(),m.push(t.prepareResult(f,n.value)||n.value[f.keyPath])):m.push(n.value),s||n.continue())},p.onerror=function(e){return t.overrideError(o,e)}}else o(t.noConnectionError)}))}))}},{key:"deleteDatabaseByName",value:function(e){var t=this;return new st((function(n,r){var o=t.idbFactory.deleteDatabase(e);o.onerror=function(e){return t.overrideError(r,e)},o.onsuccess=function(){return n()},o.onblocked=function(e){return r(e.target)}}))}},{key:"getAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.openCursor({storeName:e,action:it.list,firstOnly:t})}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then((function(e){return e.length?e[0]:void 0}))}},{key:"getItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:it.get})}},{key:"filterBy",value:function(e,t){var n=IDBKeyRange.only(t);return this.openCursor({storeName:e,action:it.list,range:n})}},{key:"addItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:it.add,mode:at.readwrite})}},{key:"addBulk",value:function(e,t,n){return this.initBulkRequest({storeName:e,target:t,action:n?it.put:it.add,mode:at.readwrite})}},{key:"updateItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:it.put,mode:at.readwrite})}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:it.delete,mode:at.readwrite})}},{key:"deleteBulk",value:function(e,t,n){var r=n?IDBKeyRange[n](t):IDBKeyRange.only(t);return this.openCursor({storeName:e,action:it.delete,range:r,mode:at.readwrite})}},{key:"trimItems",value:function(e,t){var n=this,r=ge.right[Se(e,fe.right)];return this.getAll(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?n.deleteBulk(e,t[r.keyPath],de.UpperBound):[]}))}},{key:"count",value:function(e){var t=this;return this.open().then((function(){return new st((function(n,r){if(t.indexedDbConnection){var o=t.getTransactionStore({storeName:e,mode:at.readonly},r,t.indexedDbConnection).store.count();o.onsuccess=function(){return n(o.result)},o.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)}))}))}},{key:"clear",value:function(e){return this.initRequest({storeName:e,action:it.clear,mode:at.readwrite})}},{key:"destroy",value:function(){this.indexedDbConnection&&this.indexedDbConnection.close(),this.indexedDbConnection=null}},{key:"deleteDatabase",value:function(){return this.destroy(),this.deleteDatabaseByName(this.dbName)}}],[{key:"tryOpen",value:function(t){return new st((function(n){try{var r=t.open(e.dbValidationName);r.onsuccess=function(){r.result.close(),t.deleteDatabase(e.dbValidationName),n(!0)},r.onerror=function(){return n(!1)}}catch(e){n(!1)}}))}},{key:"isSupported",value:function(){return e.isSupportedPromise||(e.isSupportedPromise=new st((function(t){var n=e.getIndexedDB(),r=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!n||r?(H.warn("IndexedDB is not supported in this browser"),t(!1)):t(e.tryOpen(n).then((function(e){return e||H.warn("IndexedDB is not supported in this browser"),e})))}))),e.isSupportedPromise}},{key:"getIndexedDB",value:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB}}]),e}();v()(ut,"dbValidationName","validate-db-openable"),v()(ut,"isSupportedPromise",null);var ct="undefined"==typeof Promise?n(3).Promise:Promise,lt=function(){function e(){De()(this,e)}return Te()(e,[{key:"open",value:function(){return e.isSupported().then((function(e){if(!e)return{status:"error",error:{name:"LSNotSupported",message:"LocalStorage is not supported"}};var t=ge.storeNames.left,n=Ve.current||{},r=n&&!b(n);return D(t).filter((function(e){return!u()(e,2)[1].permanent})).forEach((function(e){var t=u()(e,2),o=t[0],i=t[1].name;i!==Q.ActivityState||Je.stores[i]?Je.stores[i]||(Je.stores[i]=[]):Je.stores[i]=r?[we(o,fe.left,n)]:[]})),ot(),{status:"success"}}))}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return re(t)?t.composite:null}},{key:"getKeys",value:function(e){var t=Se(e,fe.right),n=ge.right[t];return this.getCompositeKeys(n)||[n.keyPath]}},{key:"nextIndex",value:function(e){return"number"==typeof e?e+1:void 0}},{key:"initRequest",value:function(e,t){var n=this,r=e.storeName,i=e.id,a=e.item,s=ge.right[Se(r,fe.right)];return this.open().then((function(e){return"error"===e.status?ct.reject(e.error):new ct((function(e,u){var c,l=Je.stores[r],d=n.getKeys(r),f=(l[l.length-1]||{})[s.keyPath]||0;if(i){var p=Array.isArray(i)?i.slice():[i];c=d.map((function(e,t){return[e,p[t]]})).reduce(j,{})}else c=o()({},a);var m=c?_(l,d,c):0;return t(e,u,{keys:d,items:l,index:m,options:s,lastId:f})}))}))}},{key:"sort",value:function(e,t,n){var r=l()(e),o=t.slice().reverse();return r.sort((function(e,t){return o.reduce((function(r,o){return r||function(e,t,r){var o=n?n===e[r]:e[r]<t[r],i=n?n>e[r]:e[r]>t[r];return o?-1:i?1:0}(e,t,o)}),0)}))}},{key:"prepareTarget",value:function(e,t,n){var r=this.getCompositeKeys(e);return r?o()(v()({},e.keyPath,r.map((function(e){return t[e]})).join("")),t):e.autoIncrement&&n?o()(v()({},e.keyPath,n),t):o()({},t)}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n?n.map((function(e){return t[e]})).filter((function(e){return!ye(e)})):t[e.keyPath]}},{key:"getAll",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.open().then((function(r){return"error"===r.status?ct.reject(r.error):new ct((function(r,o){var i=Je.stores[e];i instanceof Array?r(n?[i[0]]:t.sort(i,t.getKeys(e))):o({name:"NotFoundError",message:"No objectStore named ".concat(e," in this database")})}))}))}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then((function(e){return e.length?e[0]:void 0}))}},{key:"getItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,id:t},(function(t,r,o){var i=o.items,a=o.index,s=o.options;-1===a?r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(e,'" store')}):t(n.prepareTarget(s,i[a]))}))}},{key:"filterBy",value:function(e,t){return this.getAll(e).then((function(n){return n.filter((function(n){var r=ge.right[Se(e,fe.right)];return(r.index&&n[r.index])===t}))}))}},{key:"addItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},(function(r,o,i){var a=i.items,s=i.index,u=i.options,c=i.lastId;-1!==s?o({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing item into "'.concat(e,'" store')}):(a.push(n.prepareTarget(u,t,n.nextIndex(c))),Je.stores[e]=a,r(n.prepareResult(u,t)))}))}},{key:"addBulk",value:function(e,t,n){var r=this;return this.initRequest({storeName:e},(function(o,i,a){var s=a.keys,u=a.items,c=a.options,d=a.lastId;if(!t||t&&!t.length)i({name:"NoTargetDefined",message:'No array provided to perform add bulk operation into "'.concat(e,'" store')});else{var f=d,p=t.map((function(e){return r.prepareTarget(c,e,f=r.nextIndex(f))})),m=p.filter((function(e){return-1!==_(u,s,e)})).map((function(e){return e[c.keyPath]})),h=n?u.filter((function(e){return-1===m.indexOf(e[c.keyPath])})):l()(u);if(m.length&&!n)i({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing items into "'.concat(e,'" store')});else Je.stores[e]=r.sort([].concat(l()(h),l()(p)),s),o(t.map((function(e){return r.prepareResult(c,e)})))}}))}},{key:"updateItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},(function(r,o,i){var a=i.items,s=i.index,u=i.options,c=i.lastId,l=-1===s?n.nextIndex(c):void 0,d=n.prepareTarget(u,t,l);-1===s?a.push(d):a.splice(s,1,d),Je.stores[e]=a,r(n.prepareResult(u,t))}))}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,id:t},(function(n,r,o){var i=o.items,a=o.index;-1!==a&&(i.splice(a,1),Je.stores[e]=i),n(t)}))}},{key:"findMax",value:function(e,t,n){if(!e.length)return-1;for(var r={index:-1,value:"string"==typeof n?"":0},o=0;o<e.length;o+=1){if(!(e[o][t]<=n))return r.index;e[o][t]>=r.value&&(r={value:e[o][t],index:o})}return r.index}},{key:"deleteBulk",value:function(e,t,n){var r=this;return this.getAll(e).then((function(o){var i=r.getKeys(e),a=ge.right[Se(e,fe.right)].index||i[0],s=n?null:t,u=r.sort(o,i,s),c=r.findMax(u,a,t);if(-1===c)return[];var l=n===de.LowerBound?c:0,d=n&&n!==de.UpperBound?u.length:c+1,f=u.splice(l,d).map((function(e){return 1===i.length?e[a]:i.map((function(t){return e[t]}))}));return Je.stores[e]=u,f}))}},{key:"trimItems",value:function(e,t){var n=this,r=Se(e,fe.right),o=ge.right[r];return this.getAll(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?n.deleteBulk(e,t[o.keyPath],de.UpperBound):[]}))}},{key:"count",value:function(e){return this.open().then((function(t){if("error"===t.status)return ct.reject(t.error);var n=Je.stores[e];return ct.resolve(n instanceof Array?n.length:1)}))}},{key:"clear",value:function(e){return this.open().then((function(t){return"error"===t.status?ct.reject(t.error):new ct((function(t){Je.stores[e]=[],t()}))}))}},{key:"destroy",value:function(){}},{key:"deleteDatabase",value:function(){}}],[{key:"isSupported",value:function(){if(e.isSupportedPromise)return e.isSupportedPromise;var t=(new Date).toString(),n=window.localStorage;return e.isSupportedPromise=new ct((function(e){n.setItem(t,t);var r=n.getItem(t)===t;n.removeItem(t),e(!(!r||!n))})).catch((function(){return H.warn("LocalStorage is not supported in this browser"),ct.resolve(!1)})),e.isSupportedPromise}}]),e}();v()(lt,"isSupportedPromise",null);var dt,ft,pt="undefined"==typeof Promise?n(3).Promise:Promise;(ft=dt||(dt={}))[ft.noStorage=f]="noStorage",ft[ft.indexedDB=p]="indexedDB",ft[ft.localStorage=m]="localStorage";var mt,ht={getAll:function(e,t,n){return e.getAll(t,n).then((function(e){return ke(t,fe.right,e)}))},getFirst:function(e,t){return e.getFirst(t).then((function(e){return we(t,fe.right,e)}))},getItem:function(e,t,n){return e.getItem(t,_e(t,fe.left,n)).then((function(e){return we(t,fe.right,e)})).catch((function(e){return pt.reject(Pe(t,e))}))},filterBy:function(e,t,n){return e.filterBy(t,xe(n)).then((function(e){return ke(t,fe.right,e)}))},addItem:function(e,t,n){var r=we(t,fe.left,n);return e.addItem(t,r).then((function(e){return _e(t,fe.right,e)})).catch((function(e){return pt.reject(Pe(t,e))}))},addBulk:function(e,t,n,r){var o=ke(t,fe.left,n);return e.addBulk(t,o,r).then((function(e){return e.map((function(e){return _e(t,fe.right,e)}))})).catch((function(e){return pt.reject(Pe(t,e))}))},updateItem:function(e,t,n){var r=we(t,fe.left,n);return e.updateItem(t,r).then((function(e){return _e(t,fe.right,e)}))},deleteItem:function(e,t,n){return e.deleteItem(t,_e(t,fe.left,n)).then((function(e){return _e(t,fe.right,e)}))},deleteBulk:function(e,t,n,r){return e.deleteBulk(t,xe(n),r).then((function(e){return e.map((function(e){return _e(t,fe.right,e)}))}))},trimItems:function(e,t,n){return e.trimItems(t,n)},count:function(e,t){return e.count(t)},clear:function(e,t){return e.clear(t)},destroy:function(e){return e.destroy()},deleteDatabase:function(e){return e.deleteDatabase()}};var vt=null;function gt(e){var t=null;return null!==vt?vt:vt=pt.all([ut.isSupported(),lt.isSupported()]).then((function(n){var r=u()(n,2),o=r[0],i=r[1];if(Je.setCustomName(e),o){mt=dt.indexedDB;var a=new ut;return a.setCustomName(e).then((function(){return t=a}))}return i?(mt=dt.localStorage,t=new lt,pt.resolve(t)):(H.error("There is no storage available, app will run with minimum set of features"),mt=dt.noStorage,t=null,pt.resolve(t))})).then((function(){return{type:mt,storage:t}}))}var yt,bt,wt=o()({init:gt,getType:function(){return mt}},D(ht).map((function(e){var t=u()(e,2),n=t[0],r=t[1];return[n,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return gt().then((function(t){var o=t.storage;if(o)return r.call.apply(r,[null,o,Se(e,fe.left)].concat(n))}))}]})).reduce(j,{}));"undefined"==typeof Promise&&n(3).Promise;function kt(){return wt.getAll("queue").then((function(e){return{queueSize:e.length}})).then((function(e){return o()(o()(o()(o()(o()(o()(o()(o()({},{createdAt:Oe()}),{sentAt:Oe()}),{webUuid:Ve.current.uuid}),(n=navigator,r=void 0!==n.doNotTrack,i=void 0!==window.doNotTrack,a=void 0!==n.msDoNotTrack,s=r?n.doNotTrack:i?window.doNotTrack:a?n.msDoNotTrack:null,0===parseInt(s,10)||"no"===s?{trackingEnabled:!0}:1===parseInt(s,10)||"yes"===s?{trackingEnabled:!1}:null)),{platform:"web"}),function(){var e=navigator,t=(e.language||e.userLanguage||"en").split("-"),n=u()(t,2),r=n[0],o=n[1];return{language:r,country:o?""+o.toLowerCase():void 0}}()),(t=navigator.userAgent||navigator.vendor,{machineType:"Win32"!==navigator.platform||-1===t.indexOf("WOW64")&&-1===t.indexOf("Win64")?navigator.platform:"Win64"})),e);var t,n,r,i,a,s}))}var _t;"undefined"==typeof Promise&&n(3).Promise;function xt(){var e=$.getCustomConfig(),t=e.customUrl,n=e.urlStrategy;return t?{app:t,gdpr:t}:n===_t.India?[_t.India,_t.Default]:n===_t.China?[_t.China,_t.Default]:[_t.Default,_t.India,_t.China]}!function(e){e.Default="default",e.India="india",e.China="china"}(_t||(_t={}));var St=(yt={},v()(yt,_t.Default,{app:"https://app.adjust.com",gdpr:"https://gdpr.adjust.com"}),v()(yt,_t.India,{app:"https://app.adjust.net.in",gdpr:"https://gdpr.adjust.net.in"}),v()(yt,_t.China,{app:"https://app.adjust.world",gdpr:"https://gdpr.adjust.world"}),yt),Pt=(bt={},v()(bt,_t.Default,"default"),v()(bt,_t.India,"Indian"),v()(bt,_t.China,"Chinese"),bt);function jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St,n=xt();if(Array.isArray(n)){var r=0,o=function o(){var i=n[r++],a=t[i];return e(a).catch((function(e){if("NO_CONNECTION"===e.code&&(H.log("Failed to connect ".concat(Pt[i]," endpoint")),r<n.length))return H.log("Trying ".concat(Pt[n[r]]," one")),o();throw e}))};return o()}return e(n)}var Dt="undefined"==typeof Promise?n(3).Promise:Promise;function It(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{status:"error",action:n?"CONTINUE":"RETRY",response:k(e.responseText)?JSON.parse(e.responseText):e.responseText,message:d[t],code:t}}function Tt(e,t){var n=e.slice(0,e.length-t.length-1).split("").reduce((function(e){return e.concat(" ")}),"");return"".concat(t).concat(n,":")}function Nt(e,t){var n=function(e){return e.replace(/([A-Z])/g,(function(e){return"_".concat(e.toLowerCase())}))},r=D(o()(o()(o()({},$.getBaseParams()),t),e)).map((function(e){var t=u()(e,2),r=t[0],o=t[1];return[n(r),o]}));return H.log("REQUEST PARAMETERS:"),r.filter((function(e){return T(u()(e,2)[1])})).map((function(e){var t=u()(e,2),n=t[0],r=t[1];return H.log(Tt("REQUEST PARAMETERS:",n),r),function(e){var t=u()(e,2),n=t[0],r=t[1],o=encodeURIComponent(n),i=r;return"string"==typeof r&&(i=encodeURIComponent(r)),w(r)&&(i=encodeURIComponent(JSON.stringify(r)||"")),[o,i].join("=")}([n,r])})).join("&")}function Ot(e,t,n){var r=n.xhr,o=n.url;if(4===r.readyState){var i=r.status>=200&&r.status<300,a=k(r.responseText);if(0!==r.status)return a?t(i?function(e,t){var n=JSON.parse(e.responseText),r={status:"success",adid:n.adid,timestamp:n.timestamp,ask_in:n.ask_in,retry_in:n.retry_in,continue_in:n.continue_in,tracking_state:n.tracking_state,attribution:void 0,message:void 0};return P(t,"attribution")&&(r.attribution=n.attribution,r.message=n.message),D(r).filter((function(e){return!!u()(e,2)[1]})).reduce(j,{})}(r,o):It(r,"SERVER_CANNOT_PROCESS",!0)):e(It(r,i?"SERVER_MALFORMED_RESPONSE":"SERVER_INTERNAL_ERROR"));e(It(r,"NO_CONNECTION"))}}function Et(e,t,n){var r=e.url,o=e.method,i=void 0===o?"GET":o,a=e.params,s=function(e,t,n){var r=e.url,o=e.method,i=Nt(e.params,t);return{fullUrl:n["/gdpr_forget_device"===r?"gdpr":"app"]+r+("GET"===o?"?".concat(i):""),encodedParams:i}}({url:r,method:i,params:void 0===a?{}:a},t,n),c=s.fullUrl,l=s.encodedParams;return new Dt((function(e,t){var n=new XMLHttpRequest;n.open(i,c,!0),function(e,t){var n=[["Client-SDK","js".concat(O.version)],["Content-Type","POST"===t?"application/x-www-form-urlencoded":"application/json"]];H.log("REQUEST HEADERS:"),n.forEach((function(t){var n=u()(t,2),r=n[0],o=n[1];e.setRequestHeader(r,o),H.log(Tt("REQUEST HEADERS:",r),o)}))}(n,i),n.onreadystatechange=function(){return Ot(t,e,{xhr:n,url:r})},n.onerror=function(){return t(It(n,"TRANSACTION_ERROR"))},n.send("GET"===i?void 0:l)}))}function At(e,t){return"success"===e.status?function(e,t){var n=P(t,"gdpr_forget_device"),r=P(t,"attribution"),o=P(t,"session"),i=P(t,"disable_third_party_sharing"),a="opted_out"===e.tracking_state;if(!n&&a)return We("sdk:gdpr-forget-me"),e;r||n||a||!e.ask_in||We("attribution:check",e);o&&We("session:finished",e);if(i)return We("sdk:third-party-sharing-opt-out"),e;return e}(e,t):e}function Ct(e){return kt().then((function(t){return function(e,t){return jt((function(n){return Et(e,t,n)}))}(e,t)})).then((function(t){return At(t,e.url)}))}var Rt={long:{delay:12e4,maxDelay:864e5,minRange:.5,maxRange:1},short:{delay:200,maxDelay:36e5,minRange:.5,maxRange:1},test:{delay:100,maxDelay:300}};function Mt(e,t){var n,r,o=Rt[t=t||"long"],i=o.delay*Math.pow(2,e-1);return i=Math.min(i,o.maxDelay),o.minRange&&o.maxRange&&(i*=(n=o.minRange,r=o.maxRange,Math.random()*(r-n)+n)),Math.round(i)}var Bt=navigator.onLine;function Ut(){Bt=!0}function Lt(){Bt=!1}function Ht(e,t,n){e.addEventListener&&e.addEventListener(t,n,!1)}function qt(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}function Kt(){return Bt}var Ft="undefined"==typeof Promise?n(3).Promise:Promise,Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.method,r=void 0===n?"GET":n,i=e.params,a=void 0===i?{}:i,s=e.continueCb,c=e.strategy,l=e.wait,f={url:t,method:r,params:a,continueCb:s},p=t,m=r,h=o()({},a),v=s,g=c,y=null,w={request:0,connection:0},k=x(l),_=null;function x(e){return(e=e||150)>2147483647?2147483647:e}function S(e){var t=e.url,n=e.method,r=e.params,i=e.continueCb;t&&(p=t),n&&(m=n),b(r)||(h=o()({},r)),h=o()({createdAt:Oe()},h),"function"==typeof i&&(v=i)}function P(e){if(!_)return!1;if(y){var t=k-(Date.now()-_);if(e&&t<e)return!0;q()}return!1}function I(e){var t=e.wait,n=e.retrying;return k=t?x(t):k,P(t)?Ft.resolve({status:"error",action:"CONTINUE",response:"",message:d.SKIP,code:"SKIP"}):p?(H.log("".concat(n?"Re-trying":"Trying"," request ").concat(p," in ").concat(k,"ms")),_=Date.now(),N({url:p,method:m,params:o()({attempts:1},h)})):(H.error("You must define url for the request to be sent"),Ft.reject({status:"error",action:"CONTINUE",response:"",message:d.MISSING_URL,code:"MISSING_URL"}))}function N(e){return L(),Kt()?O(e):(w.connection+=1,H.log("No internet connectivity, trying request ".concat(e.url," in ").concat(6e4,"ms")),new Ft((function(t){y=setTimeout((function(){t(N(e))}),6e4)})))}function O(e){return new Ft((function(t,n){y=setTimeout((function(){_=null;var r=D(e.params).filter((function(e){return T(u()(e,2)[1])})).reduce(j,{});return Ct({url:e.url,method:e.method,params:o()(o()({},r),{},{attempts:(w.request?w.request+1:1)+w.connection})}).then((function(e){return R(e,t)})).catch((function(e){return M(e,t,n)}))}),k)}))}function E(){p=f.url,m=f.method,h=o()({},f.params),v=f.continueCb}function A(e){H.log("Request ".concat(p||"unknown"," ").concat(e?"failed":"has been finished")),w.request=0,w.connection=0,k=150,E(),q()}function C(e){return w.request+=1,q(),I({wait:e||Mt(w.request,g),retrying:!0})}function R(e,t){e&&e.retry_in?t(C(e.retry_in)):("function"==typeof v?v(e,A,C):A(),t(e))}function M(e,t,n){e&&"RETRY"===e.action?t(C("NO_CONNECTION"===e.code?6e4:void 0)):(A(!0),n(e||{}))}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.method,r=e.params,o=void 0===r?{}:r,i=e.continueCb,a=e.wait;return S({url:t,method:n,params:o,continueCb:i}),I({wait:a})}function U(){return!!y}function L(){y&&clearTimeout(y),y=null}function q(){var e=!!_;L(),_=null,e&&(k=150,w.request=0,w.connection=0,H.log("Previous ".concat(p||"unknown"," request attempt canceled")),E())}return{send:B,isRunning:U,clear:q}},zt=function(e){return"gdpr"===e?"GDPR disable":"disable"},Gt=function(e){return{start:{inProgress:"Adjust SDK ".concat(zt(e)," process has already started"),done:"Adjust SDK ".concat(zt(e)," process is now started")},finish:{inProgress:"Adjust SDK ".concat(zt(e)," process has already finished"),done:"Adjust SDK ".concat(zt(e)," process is now finished")}}};function Yt(e,t){var n=e.reason,r=e.pending,o=et()||{},i="start"===t&&o.pending?"start":"finish",a="start"===t&&o.reason,s="finish"===t&&o.reason&&!o.pending;return a||s?(H.log(Gt(o.reason)[i].inProgress),!1):(H.log(Gt(n)[i].done),tt({reason:n||"general",pending:r}),!0)}function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Yt({reason:e,pending:t||!1},"start")}function Jt(){var e=et()||{};return"general"===e.reason||"gdpr"===e.reason&&!e.pending?"off":"gdpr"===e.reason&&e.pending?"paused":"on"}var Xt="undefined"==typeof Promise?n(3).Promise:Promise,Qt=!1;function Zt(e){return e?"unknown"===e.uuid?(Wt({reason:"gdpr"}),Ve.destroy(),{exists:!0,stored:null}):(Ve.init(e),{exists:!0,stored:e}):{exists:!1}}function $t(){return"off"!==Jt()&&Ve.isStarted()}function en(){if(!$t())return Xt.resolve(null);var e=o()(o()({},Ve.current),{},{lastActive:Date.now()});return wt.updateItem("activityState",e).then((function(){return Ve.current=e}))}var tn="undefined"==typeof Promise?n(3).Promise:Promise,nn=Vt({strategy:"long",continueCb:function(e,t){var n=e&&e.continue_in||null;return on.pause=n?{timestamp:Date.now(),wait:n}:null,wt.getFirst("queue").then((function(e){return e?wt.deleteItem("queue",e.timestamp):null})).then((function(){return t(),on.running=!1,dn({wait:n})}))}}),rn=!1,on={running:!1,timestamp:null,pause:null};function an(){var e=Date.now();return on.timestamp&&e<=on.timestamp&&(e=on.timestamp+1),on.timestamp=e,e}function sn(e){return P(e,"session")&&Ve.resetSessionOffset(),Ve.updateLastActive(),en()}function un(e){var t=e.url,n=e.method,r=e.params,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.auto,s=i.timestamp;Ve.updateParams(t,a);var c=D(r||{}).filter((function(e){return T(u()(e,2)[1])})).reduce(j,{}),l={timestamp:an(),url:t,method:n,params:o()(o()({},Ve.getParams(t)),c)};return s&&(l.createdAt=s),wt.addItem("queue",l).then((function(){return sn(t)})).then((function(){return on.running?{}:dn()}))}function cn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timestamp,n=e.createdAt,r=e.url,i=e.method,a=e.params,s=arguments.length>1?arguments[1]:void 0,u=Ve.current||{},c="/session"===r&&!u.installed,l=!r&&!i&&!a;return rn&&!c||l?(on.running=!1,tn.resolve({})):nn.send({url:r,method:i,params:o()(o()({},a),{},{createdAt:Oe(n||t)}),wait:s||ln()})}function ln(){var e=on.pause||{},t=e.timestamp,n=e.wait,r=Date.now()-(t||0);return r<n?n-r:null}function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cleanUp,n=e.wait;if(on.running)return tn.resolve({});on.running=!0;var r=tn.resolve({});return t&&(r=r.then(pn)),r.then((function(){return wt.getFirst("queue")})).then((function(e){return cn(e,n)}))}function fn(e){if(void 0!==e)if(e!==rn){var t=rn;rn=e,!e&&t&&dn(),H.info("The app is now in ".concat(e?"offline":"online"," mode"))}else H.error("The app is already in ".concat(e?"offline":"online"," mode"));else H.error("State not provided, true or false has to be defined")}function pn(){var e=Date.now()-$.requestValidityWindow;return wt.deleteBulk("queue",e,"upperBound")}var mn="undefined"==typeof Promise?n(3).Promise:Promise,hn="No type provided",vn="Global parameter type not provided, `callback` or `partner` types are available";function gn(e){return(e||[]).map((function(e){return{key:e.key,value:e.value}}))}function yn(){return mn.all([wt.filterBy("globalParams","callback"),wt.filterBy("globalParams","partner")]).then((function(e){var t=u()(e,2),n=t[0],r=t[1];return{callbackParams:gn(n),partnerParams:gn(r)}}))}function bn(e,t){if(void 0===t)return H.error(vn),mn.reject({message:hn});var n=x(e),r=Object.keys(n).map((function(e){return{key:e,value:n[e],type:t}}));return mn.all([wt.filterBy("globalParams",t),wt.addBulk("globalParams",r,!0)]).then((function(e){var n=u()(e,2),o=n[0],i=n[1],a=S(o.map((function(e){return e.key})),i.map((function(e){return e[0]})));return H.log("Following ".concat(t," parameters have been saved: ").concat(r.map((function(e){return"".concat(e.key,":").concat(e.value)})).join(", "))),a.length&&H.log("Keys: ".concat(a.join(", ")," already existed so their values have been updated")),i}))}function wn(e,t){return void 0===t?(H.error(vn),mn.reject({message:hn})):wt.deleteItem("globalParams",[e,t]).then((function(n){return H.log("".concat(e," ").concat(t," parameter has been deleted")),n}))}function kn(e){return void 0===e?(H.error(vn),mn.reject({message:hn})):wt.deleteBulk("globalParams",e).then((function(t){return H.log("All ".concat(e," parameters have been deleted")),t}))}var _n,xn,Sn,Pn="undefined"==typeof Promise?n(3).Promise:Promise,jn=!1,Dn=document;function In(){return Sn=function(){var e=document;if(void 0!==e.hidden)return{hidden:"hidden",visibilityChange:"visibilitychange"};for(var t=D({mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange",webkitHidden:"webkitvisibilitychange"}),n=0;n<t.length;n+=1){var r=u()(t[n],2),o=r[0],i=r[1];if(void 0!==e[o])return{hidden:o,visibilityChange:i}}return null}(),jn?Pn.reject({interrupted:!0,message:"Session watch already initiated"}):(jn=!0,Ye("session:finished",En),Sn&&Ht(Dn,Sn.visibilityChange,On),Sn&&Dn[Sn.hidden]?(H.log("Session request attempt canceled because the tab is still hidden"),Pn.resolve({})):(Ve.initParams(),Cn()))}function Tn(){return An(),Ve.updateSessionOffset(),Ve.toBackground(),en()}function Nn(){return wt.getFirst("activityState").then((function(e){var t=Ve.current,n=t.lastActive||0;if($t()&&n<e.lastActive){var r=!t.installed&&e.installed,o=(t.sessionCount||0)<(e.sessionCount||0);(r||o)&&We("sdk:installed"),Ve.current=e,rt()}return e})).then((function(){Ve.updateSessionLength(),Ve.toForeground()})).then(Cn)}function On(){clearTimeout(xn);var e=Sn&&Dn[Sn.hidden]?Tn:Nn;xn=setTimeout(e,0)}function En(e,t){if(!t||"error"!==t.status)return Ve.updateInstalled(),We("sdk:installed"),en();H.error("Session was not successful, error was returned from the server:",t.response)}function An(){clearInterval(_n)}function Cn(){An(),_n=setInterval((function(){return Ve.updateSessionOffset(),en()}),$.sessionTimerWindow);var e=Ve.current,t=e.lastInterval,n=e.sessionCount>0;return!n||n&&1e3*t>=$.sessionWindow?yn().then((function(e){var t,n,r;un({url:"/session",method:"POST",params:(t=e,n=t.callbackParams,r=t.partnerParams,{callbackParams:n.length?x(n):null,partnerParams:r.length?x(r):null})},{auto:!0})})):(We("attribution:check"),en())}var Rn="undefined"==typeof Promise?n(3).Promise:Promise,Mn=Vt({url:"/attribution",strategy:"short",continueCb:function(e,t,n){if(!e||e&&"error"===e.status)return t(),Rn.resolve({state:"unknown"});if(!e.ask_in)return t(),function(e){if(b(e)||!function(e){var t=e.adid,n=void 0===t?"":t,r=e.attribution,o=void 0===r?{}:r;return!!n&&!!S(Bn,Object.keys(o)).length}(e)||function(e){var t=e.adid,n=e.attribution,r=Ve.current.attribution||{};return!(n&&Bn.some((function(e){return r[e]!==n[e]})))&&t===r.adid}(e))return Rn.resolve({state:"same"});var t=D(e.attribution).filter((function(e){var t=u()(e,1)[0];return-1!==Bn.indexOf(t)})).reduce(j,{adid:e.adid});return Ve.current=o()(o()({},Ve.current),{},{attribution:t}),en().then((function(){return We("attribution:change",t),H.info("Attribution has been updated"),{state:"changed"}}))}(e);return n(e.ask_in)}}),Bn=["tracker_token","tracker_name","network","campaign","adgroup","creative","click_label","state"];var Un=Vt({url:"/gdpr_forget_device",method:"POST",strategy:"short"}),Ln={running:"Adjust SDK is running pending GDPR Forget Me request",pending:"Adjust SDK will run GDPR Forget Me request after initialisation",paused:"Adjust SDK is already prepared to send GDPR Forget Me request",off:"Adjust SDK is already disabled"};function Hn(e){var t=Jt();return e||"on"===t?$.isInitialised()?(Un.send({params:o()({},Ve.getParams())}).then((function(){We("sdk:gdpr-forget-me")})),!0):(H.log(Ln.pending),!0):(H.log(Ln[t]),!1)}function qn(){return Yt({reason:"gdpr",pending:!1},"finish")}var Kn={running:"Adjust SDK is running pending third-party sharing opt-out request",delayed:"Adjust SDK will run third-party sharing opt-out request after initialisation",pending:"Adjust SDK already queued third-party sharing opt-out request",off:"Third-party sharing opt-out is already done",start:{inProgress:"Third-party sharing opt-out has already started",done:"Third-party sharing opt-out is now started"},finish:{inProgress:"Third-party sharing opt-out has already finished",done:"Third-party sharing opt-out is now finished"}};function Fn(){var e=nt()||{};return e.reason?e.pending?"pending":"off":"on"}function Vn(e){var t=Fn();return e||"on"===t?$.isInitialised()?(un({url:"/disable_third_party_sharing",method:"POST"}),!0):(H.log(Kn.delayed),!0):(H.log(Kn[t]),!1)}function zn(e,t){var n,r,i=nt()||{},a="start"===t&&e?"start":"finish",s="start"===t&&i.reason,u="finish"===t&&i.reason&&!i.pending;return s||u?(H.log(Kn[a].inProgress),!1):(H.log(Kn[a].done),r=(n={reason:"general",pending:e})?o()({},n):null,Je.stores[Xe]=o()(o()({},Ze()),{},{thirdPartySharingDisabled:r}),$e(),!0)}function Gn(){return zn(!1,"finish")}function Yn(){"pending"===Fn()&&(H.log(Kn.running),Vn(!0))}var Wn=[];function Jn(e,t){Wn.push({method:e,description:t,timestamp:Date.now()})}var Xn,Qn="undefined"==typeof Promise?n(3).Promise:Promise;function Zn(e,t){var n,r,i=t.callbackParams,a=t.partnerParams,s={},u=o()({eventToken:e.eventToken},(n=e.revenue,r=e.currency,isNaN(n)||(n=parseFloat(n))<0||!r?{}:{revenue:n.toFixed(5),currency:r})),c=o()(o()({},x(i)),x(e.callbackParams)),l=o()(o()({},x(a)),x(e.partnerParams));return b(c)||(s.callbackParams=c),b(l)||(s.partnerParams=l),o()(o()({},u),s)}function $n(e){return e?wt.getAll("eventDeduplication").then((function(e){return e.map((function(e){return e.id}))})).then((function(t){return-1===t.indexOf(e)?function(e){var t=$.getCustomConfig().eventDeduplicationListLimit,n=t>0?t:10;return wt.count("eventDeduplication").then((function(e){var t=Qn.resolve();if(e>=n){var r=e-n+1;H.log("Event deduplication list limit has been reached. Oldest ids are about to be removed (".concat(r," of them)")),t=wt.trimItems("eventDeduplication",r)}return t})).then((function(){return H.info("New event deduplication id is added to the list: ".concat(e)),wt.addItem("eventDeduplication",{id:e})}))}(e):Qn.reject({message:"Event won't be tracked, since it was previously tracked with the same deduplication id ".concat(e)})})):Qn.resolve()}function er(e){return{clickTime:Oe(),source:"web_referrer",referrer:decodeURIComponent(e)}}function tr(){var e=window.location.search.substring(1).split("&").map((function(e){return e.split("=")})).reduce(j,{}).adjust_referrer;e&&un({url:"/sdk_click",method:"POST",params:er(e)})}function nr(){var e,t,n=null===(e=navigator)||void 0===e||null===(t=e.userAgent)||void 0===t?void 0:t.toLowerCase();if(n&&!(n.length<1))return/ipad|iphone|ipod/.test(n)?Xn.iOS:n.includes("windows")?/phone|mobile/.test(n)?Xn.WindowsPhone:Xn.WindowsPC:n.includes("android")?Xn.Android:void 0}function rr(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}!function(e){e.Android="android",e.iOS="ios",e.WindowsPC="windows",e.WindowsPhone="windows-phone"}(Xn||(Xn={}));var or={getItem:function(e){return rr(localStorage.getItem("".concat("adjust-smart-banner",".").concat(e)))},setItem:function(e,t){t?localStorage.setItem("".concat("adjust-smart-banner",".").concat(e),JSON.stringify(t)):localStorage.removeItem("".concat("adjust-smart-banner",".").concat(e))}},ir={status:0,code:"NO_CONNECTION",message:"No internet connectivity"},ar="undefined"==typeof Promise?n(3).Promise:Promise,sr=function(){function e(){De()(this,e)}return Te()(e,null,[{key:"xhr",value:function(e){return new ar((function(t,n){var r=new XMLHttpRequest;r.open("GET",e),[["Client-SDK","js".concat(O.version)],["Content-Type","application/json"]].forEach((function(e){var t=u()(e,2),n=t[0],o=t[1];r.setRequestHeader(n,o)})),r.onerror=function(){return n(ir)},r.onreadystatechange=function(){if(4===r.readyState){var e=r.status>=200&&r.status<300,o=rr(r.responseText);0===r.status?n(ir):e?t(o):n({status:r.status,message:o||r.responseText||""})}},r.send()}))}},{key:"encodeParams",value:function(e){return Object.keys(e).map((function(t){return[encodeURIComponent(t),encodeURIComponent(e[t])].join("=")})).join("&")}},{key:"getEndpoint",value:function(){return e.lastSuccessfulEndpoint||e.defaultEndpoint}},{key:"request",value:function(t,n){return jt((function(r){var o=r.app,i=n?"?".concat(e.encodeParams(n)):"";return e.xhr("".concat(o).concat(t).concat(i)).then((function(t){return e.lastSuccessfulEndpoint=r.app,t})).catch((function(t){throw e.lastSuccessfulEndpoint=void 0,t}))}))}}]),e}();v()(sr,"defaultEndpoint","https://app.adjust.com"),v()(sr,"lastSuccessfulEndpoint",void 0);var ur;"undefined"==typeof Promise&&n(3).Promise;function cr(e,t){return sr.request("/smart_banner",{app_web_token:e}).then((function(e){var n,r,o,i,a,s,u,c=e.find((function(e){return e.platform===t}));return c?(i=(n=c).title,a=n.description,s=n.button_label,u=n.tracker_token,i&&a&&s&&u?{appId:(null===(r=n.app)||void 0===r?void 0:r.default_store_app_id)||"",appName:(null===(o=n.app)||void 0===o?void 0:o.name)||"",position:n.position||ur.Bottom,imageUrl:n.image_url,header:i,description:a,buttonText:s,trackerToken:u,deeplinkPath:n.deeplink_path,dismissInterval:864e5}:null):null})).catch((function(e){return H.error("Network error occurred during loading Smart Banner: "+JSON.stringify(e)),null}))}!function(e){e.Top="top",e.Bottom="bottom"}(ur||(ur={}));var lr=n(4),dr=n.n(lr),fr="undefined"==typeof Promise?n(3).Promise:Promise,pr=function(){function e(t,n,r){De()(this,e),v()(this,"appTraceUrl",(function(e){return"https://www.apptrace.com/api/app/".concat(e,"/artwork_url_small")})),v()(this,"appName",void 0),v()(this,"image",void 0),v()(this,"placeholder",void 0),this.image=n,this.placeholder=r,this.appName=t.appName;var o=this.getSources(t);this.showImage(o)}return Te()(e,[{key:"getSources",value:function(e){var t=[];return e.imageUrl&&t.push(e.imageUrl),t.push(this.appTraceUrl(e.appId)),t}},{key:"showImage",value:function(e){var t=this;return e.reduce((function(e,n){return e.catch((function(){return t.loadImage(n,t.image)}))}),fr.reject()).then((function(){t.placeholder.remove()})).catch((function(){t.image.remove(),t.placeholder.innerText=t.appName.length?t.appName[0].toUpperCase():""}))}},{key:"loadImage",value:function(e,t){return new fr((function(n,r){t.onload=n,t.onerror=r,t.src=e}))}}]),e}(),mr=function(){function e(t,n,r){De()(this,e),v()(this,"parent",document.body),v()(this,"banner",void 0),v()(this,"dismissButton",null),v()(this,"onDismiss",void 0),this.onDismiss=n,this.render(t,r)}return Te()(e,[{key:"render",value:function(e,t){this.banner=document.createElement("div"),this.banner.setAttribute("class",dr.a.bannerContainer);var n=e.position===ur.Top?dr.a.stickyToTop:dr.a.stickyToBottom,r=e.deeplinkPath?"?deeplink=".concat(encodeURIComponent(e.deeplinkPath)):"",o="".concat(t,"/").concat(e.trackerToken).concat(r);this.banner.innerHTML=function(e,t,n,r,o){return'\n  <div class="'.concat(dr.a.banner," ").concat(e,'">\n    <div class="').concat(dr.a.bannerBody,'">\n      <div class="').concat(dr.a.content,'">\n        <button class="').concat(dr.a.dismiss,'"></button>\n        <div class="').concat(dr.a.appIcon,'">\n          <div class="').concat(dr.a.placeholder,'"></div>\n          <img class="').concat(dr.a.image,'" alt="').concat(t,'">\n        </div>\n        <div class="').concat(dr.a.textContainer,'">\n          <h4 class="').concat(dr.a.bannerText,'">').concat(t,'</h4>\n          <p class="').concat(dr.a.bannerText,'">').concat(n,'</p>\n        </div>\n        <a class="').concat(dr.a.action,'" href=').concat(o,">").concat(r,"</a>\n      </div>\n    </div>\n  </div>")}(n,e.header,e.description,e.buttonText,o),e.position===ur.Top?this.parent.insertBefore(this.banner,this.parent.firstChild):this.parent.appendChild(this.banner),this.dismissButton=this.getElemByClass(dr.a.dismiss),this.dismissButton&&this.dismissButton.addEventListener("click",this.onDismiss);var i=this.getElemByClass(dr.a.placeholder),a=this.getElemByClass(dr.a.image);a&&i&&new pr(e,a,i)}},{key:"show",value:function(){this.banner.hidden=!1}},{key:"hide",value:function(){this.banner.hidden=!0}},{key:"destroy",value:function(){this.removeDismissButtonHandler(),this.banner.remove()}},{key:"removeDismissButtonHandler",value:function(){this.dismissButton&&this.onDismiss&&(this.dismissButton.removeEventListener("click",this.onDismiss),this.dismissButton=null)}},{key:"getElemByClass",value:function(e){if(this.banner){var t=this.banner.getElementsByClassName(e);return t.length>0?t[0]:null}return null}}]),e}(),hr=("undefined"==typeof Promise&&n(3).Promise,new(function(){function e(){De()(this,e),v()(this,"dismissedStorageKey","closed"),v()(this,"timer",null),v()(this,"dataFetchPromise",void 0),v()(this,"banner",void 0),v()(this,"logLevel",void 0)}return Te()(e,[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";if(this.logLevel=n,H.setLogLevel(n),this.banner)H.error("Smart Banner already exists");else if(this.dataFetchPromise)H.error("Smart Banner is initialising already");else{var r=nr();r?(this.dataFetchPromise=cr(e,r),this.dataFetchPromise.then((function(n){if(t.dataFetchPromise=null,n){var o=t.getDateToShowAgain(n.dismissInterval);if(Date.now()<o)return H.log("Smart Banner was dismissed"),void t.scheduleCreation(e,o);H.log("Creating Smart Banner"),t.banner=new mr(n,(function(){return t.dismiss(e,n.dismissInterval)}),sr.getEndpoint()),H.log("Smart Banner created")}else H.log("No Smart Banners for ".concat(r," platform found"))}))):H.log("This platform is not one of the targeting ones, Smart Banner will not be shown")}}},{key:"show",value:function(){var e=this;if(!this.banner)return this.dataFetchPromise?(H.log("Smart Banner will be shown after initialisation finished"),void this.dataFetchPromise.then((function(){H.log("Initialisation finished, showing Smart Banner"),e.show()}))):void H.error("There is no Smart Banner to show, have you called initialisation?");this.banner.show()}},{key:"hide",value:function(){var e=this;if(!this.banner)return this.dataFetchPromise?(H.log("Smart Banner will be hidden after initialisation finished"),void this.dataFetchPromise.then((function(){H.log("Initialisation finished, hiding Smart Banner"),e.hide()}))):void H.error("There is no Smart Banner to hide, have you called initialisation?");this.banner.hide()}},{key:"destroy",value:function(){this.banner?(this.banner.destroy(),this.banner=null,H.log("Smart Banner removed")):H.error("There is no Smart Banner to remove")}},{key:"dismiss",value:function(e,t){H.log("Smart Banner dismissed"),or.setItem(this.dismissedStorageKey,Date.now());var n=this.getDateToShowAgain(t);this.scheduleCreation(e,n),this.destroy()}},{key:"scheduleCreation",value:function(e,t){var n=this;this.timer&&(H.log("Clearing previously scheduled creation of Smart Banner"),clearTimeout(this.timer),this.timer=null);var r=t-Date.now();this.timer=setTimeout((function(){n.timer=null,n.init(e,n.logLevel)}),r),H.log("Smart Banner creation scheduled on "+new Date(t))}},{key:"getDateToShowAgain",value:function(e){var t=or.getItem(this.dismissedStorageKey);return t?t+e:Date.now()}}]),e}())),vr=["logLevel","logOutput"],gr="undefined"==typeof Promise?n(3).Promise:Promise,yr=null,br=!1,wr=!1,kr=!1;function _r(){Vn()&&zn(!0,"start")}function xr(){var e;"paused"===Jt()&&(qn(),gr.all([(e={uuid:"unknown"},Ve.current=e,wt.clear("activityState").then((function(){return wt.addItem("activityState",e)}))),wt.clear("globalParams"),wt.clear("queue")]).then(Dr))}function Sr(){return br||$.isInitialised()}function Pr(){br=!1,wr=!1,Wn=[],nn.clear(),on.running=!1,on.timestamp=null,on.pause=null,jn=!1,Ve.toBackground(),An(),Sn&&(clearTimeout(xn),qt(Dn,Sn.visibilityChange,On)),Mn.clear()}function jr(e){e&&H.log("Adjust SDK has been shutdown due to asynchronous disable"),Pr(),Ge.forEach(clearTimeout),Ge=[],ze={},Ve.destroy(),qt(window,"online",Ut),qt(window,"offline",Lt),wt.destroy(),$.destroy()}function Dr(){kr=!1,jr(),Un.clear(),yr=null,H.log("Adjust SDK instance has been destroyed")}function Ir(e){H.log("Adjust SDK is starting with web_uuid set to ".concat(e.uuid));var t=Ve.current.installed;"paused"===Jt()&&(H.log(Ln.running),Hn(!0)),t||Yn();var n=Jt(),r=function(e){return"Adjust SDK start has been interrupted ".concat(e)};return"off"===n?(jr(),gr.reject({interrupted:!0,message:r("due to complete async disable")})):"paused"===n?(Pr(),gr.reject({interrupted:!0,message:r("due to partial async disable")})):wr?gr.reject({interrupted:!0,message:r("due to multiple synchronous start attempt")}):(dn({cleanUp:!0}),In().then((function(){br=!1,wr=!0,t&&(Tr(),Yn())})))}function Tr(){var e;kr=!0,Wn.forEach((function(e){"function"==typeof e.method&&(H.log("Delayed ".concat(e.description," task is running now")),e.method(e.timestamp))})),Wn=[],(e="sdk:installed")&&D(ze).some((function(t){var n=u()(t,2)[1];return n.some((function(t,r){if(t.id===e)return n.splice(r,1),!0}))}))}function Nr(e){if(e.interrupted)H.log(e.message);else if(jr(),H.error("Adjust SDK start has been canceled due to an error",e),e.stack)throw e}function Or(e){"off"!==Jt()?($.set(e),Ht(window,"online",Ut),Ht(window,"offline",Lt),Ye("sdk:installed",Tr),Ye("sdk:shutdown",(function(){return jr(!0)})),Ye("sdk:gdpr-forget-me",xr),Ye("sdk:third-party-sharing-opt-out",Gn),Ye("attribution:check",(function(e,t){return n=t,r=Ve.current,(i=(n||{}).ask_in)||!r.attribution&&r.installed?(Mn.send({params:o()({initiatedBy:n?"backend":"sdk"},Ve.getParams()),wait:i}),Ve.updateSessionOffset(),en()):Rn.resolve(r);var n,r,i})),"function"==typeof e.attributionCallback&&Ye("attribution:change",e.attributionCallback),(Qt?Xt.reject({interrupted:!0,message:"Adjust SDK start already in progress"}):(Qt=!0,wt.getFirst("activityState").then(Zt).then((function(e){if(e.exists)return Qt=!1,e.stored;var t,n=b(Ve.current)?{uuid:(t=Date.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:11&n).toString(16)})))}:Ve.current;return wt.addItem("activityState",n).then((function(){return Ve.init(n),rt(),Qt=!1,n}))})))).then(Ir).then(tr).catch(Nr)):H.log("Adjust SDK is disabled, can not start the sdk")}function Er(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.schedule,o=n.stopBeforeInit;wt.getType()!==f?"on"===Jt()?r&&o&&!Sr()?H.error("Adjust SDK can not ".concat(e,", sdk instance is not initialized")):"function"==typeof t&&(!r||kr&&wr||!o&&!Sr()?t():(Jn(t,e),H.log("Running ".concat(e," is delayed until Adjust SDK is up")))):H.log("Adjust SDK is disabled, can not ".concat(e)):H.log("Adjust SDK can not ".concat(e,", no storage available"))}var Ar={initSdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.logLevel,n=e.logOutput,r=a()(e,vr);H.setLogLevel(t,n),Sr()?H.error("You already initiated your instance"):$.hasMissing(r)||(br=!0,wt.init(r.namespace).then((function(e){e.type!==f?(H.info("Available storage is ".concat(e.type)),yr=o()({},r),Or(r)):H.error("Adjust SDK can not start, there is no storage available")})))},trackEvent:function(e){Er("track event",(function(t){return function(e,t){if(e&&(!e||!b(e)&&e.eventToken))return $n(e.deduplicationId).then(yn).then((function(n){un({url:"/event",method:"POST",params:Zn(e,n)},{timestamp:t})})).catch((function(e){e&&e.message&&H.error(e.message)}));H.error("You must provide event token in order to track event")}(e,t)}),{schedule:!0,stopBeforeInit:!0})},addGlobalCallbackParameters:function(e){Er("add global callback parameters",(function(){return bn(e,"callback")}))},addGlobalPartnerParameters:function(e){Er("add global partner parameters",(function(){return bn(e,"partner")}))},removeGlobalCallbackParameter:function(e){Er("remove global callback parameter",(function(){return wn(e,"callback")}))},removeGlobalPartnerParameter:function(e){Er("remove global partner parameter",(function(){return wn(e,"partner")}))},clearGlobalCallbackParameters:function(){Er("remove all global callback parameters",(function(){return kn("callback")}))},clearGlobalPartnerParameters:function(){Er("remove all global partner parameters",(function(){return kn("partner")}))},switchToOfflineMode:function(){Er("set offline mode",(function(){return fn(!0)}))},switchBackToOnlineMode:function(){Er("set online mode",(function(){return fn(!1)}))},stop:function(){Wt()&&$.isInitialised()&&jr()},restart:function(){var e;("gdpr"===(e=et()||{}).reason?(H.log("Adjust SDK is disabled due to GDPR-Forget-Me request and it can not be re-enabled"),!1):e.reason?(H.log("Adjust SDK has been enabled"),tt(null),!0):(H.log("Adjust SDK is already enabled"),!1))&&yr&&Or(yr)},gdprForgetMe:function(){var e=Hn();e&&(e=Wt("gdpr",!0))&&$.isInitialised()&&Pr()},disableThirdPartySharing:function(){Er("disable third-party sharing",_r,{schedule:!0,stopBeforeInit:!1})},initSmartBanner:function(e){var t=e.webToken,n=e.logLevel;hr.init(t,n)},__testonly__:{destroy:Dr,clearDatabase:function(){return wt.deleteDatabase()}}};t.default=Ar}]).default}));
