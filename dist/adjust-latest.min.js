!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Adjust=t():e.Adjust=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){var r=n(2);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){var r=n(12),o=n(13),i=n(5),a=n(14);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,u=function(e,t){p[o]=e,p[o+1]=t,2===(o+=2)&&(a?a(v):w())},s="undefined"!=typeof window?window:void 0,c=s||{},l=c.MutationObserver||c.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){var e=setTimeout;return function(){return e(v,1)}}var p=new Array(1e3);function v(){for(var e=0;e<o;e+=2)(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0;o=0}var h,g,y,b,w=void 0;function k(e,t){var n=this,r=new this.constructor(N);void 0===r[P]&&R(r);var o=n._state;if(o){var i=arguments[o-1];u((function(){return E(o,r,i,n._result)}))}else A(n,r,e,t);return r}function S(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(N);return x(t,e),t}d?w=function(){return t.nextTick(v)}:l?(g=0,y=new l(v),b=document.createTextNode(""),y.observe(b,{characterData:!0}),w=function(){b.data=g=++g%2}):f?((h=new MessageChannel).port1.onmessage=v,w=function(){return h.port2.postMessage(0)}):w=void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(v)}:m()}catch(e){return m()}}():m();var P=Math.random().toString(36).substring(2);function N(){}function _(t,n,r){n.constructor===t.constructor&&r===k&&n.constructor.resolve===S?function(e,t){1===t._state?O(e,t._result):2===t._state?I(e,t._result):A(t,void 0,(function(t){return x(e,t)}),(function(t){return I(e,t)}))}(t,n):void 0===r?O(t,n):e(r)?function(e,t,n){u((function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?x(e,n):O(e,n))}),(function(t){r||(r=!0,I(e,t))}),e._label);!r&&o&&(r=!0,I(e,o))}),e)}(t,n,r):O(t,n)}function x(e,t){if(e===t)I(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(r=t),null===r||"object"!==o&&"function"!==o)O(e,t);else{var n=void 0;try{n=t.then}catch(t){return void I(e,t)}_(e,t,n)}var r,o}function j(e){e._onerror&&e._onerror(e._result),T(e)}function O(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&u(T,e))}function I(e,t){void 0===e._state&&(e._state=2,e._result=t,u(j,e))}function A(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+1]=n,o[i+2]=r,0===i&&e._state&&u(T,e)}function T(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?E(n,r,o,i):o(i);e._subscribers.length=0}}function E(t,n,r,o){var i=e(r),a=void 0,u=void 0,s=!0;if(i){try{a=r(o)}catch(e){s=!1,u=e}if(n===a)return void I(n,new TypeError("A promises callback cannot return that same promise."))}else a=o;void 0!==n._state||(i&&s?x(n,a):!1===s?I(n,u):1===t?O(n,a):2===t&&I(n,a))}var D=0;function R(e){e[P]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var C=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(N),this.promise[P]||R(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&O(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===S){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(e){a=!0,i=e}if(o===k&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===L){var u=new n(N);a?I(u,i):_(u,e,o),this._willSettleAt(u,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===e?I(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}(),L=function(){function t(e){this[P]=D++,this._result=this._state=void 0,this._subscribers=[],N!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){x(e,t)}),(function(t){I(e,t)}))}catch(t){I(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return L.prototype.then=k,L.all=function(e){return new C(this,e).promise},L.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},L.resolve=S,L.reject=function(e){var t=new this(N);return I(t,e),t},L._setScheduler=function(e){a=e},L._setAsap=function(e){u=e},L._asap=u,L.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=L},L.Promise=L,L},e.exports=r()}).call(this,n(10),n(11))},function(e,t,n){var r=n(15),o=n(16),i=n(5),a=n(17);e.exports=function(e){return r(e)||o(e)||i(e)||a()}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,c=[],l=!1,d=-1;function f(){l&&s&&(l=!1,s.length?c=s.concat(c):d=-1,c.length&&m())}function m(){if(!l){var e=u(f);l=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||u(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(6);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"isSupported",(function(){return Ve})),n.d(r,"getAll",(function(){return ot})),n.d(r,"getFirst",(function(){return it})),n.d(r,"getItem",(function(){return at})),n.d(r,"filterBy",(function(){return ut})),n.d(r,"addItem",(function(){return st})),n.d(r,"addBulk",(function(){return ct})),n.d(r,"updateItem",(function(){return lt})),n.d(r,"deleteItem",(function(){return dt})),n.d(r,"deleteBulk",(function(){return ft})),n.d(r,"trimItems",(function(){return mt})),n.d(r,"count",(function(){return pt})),n.d(r,"clear",(function(){return vt})),n.d(r,"destroy",(function(){return gt})),n.d(r,"__delete",(function(){return ht}));var o={};n.r(o),n.d(o,"isSupported",(function(){return bt})),n.d(o,"getAll",(function(){return jt})),n.d(o,"getFirst",(function(){return Ot})),n.d(o,"getItem",(function(){return It})),n.d(o,"filterBy",(function(){return At})),n.d(o,"addItem",(function(){return Tt})),n.d(o,"addBulk",(function(){return Et})),n.d(o,"updateItem",(function(){return Dt})),n.d(o,"deleteItem",(function(){return Rt})),n.d(o,"deleteBulk",(function(){return Ct})),n.d(o,"trimItems",(function(){return Lt})),n.d(o,"count",(function(){return Mt})),n.d(o,"clear",(function(){return Bt})),n.d(o,"destroy",(function(){return qt}));var i,a=n(0),u=n.n(a),s=n(7),c=n.n(s),l=n(1),d=n.n(l),f=n(4),m=n.n(f),p={namespace:"adjust-sdk",version:"5.1.1",env:"production"},v={TRANSACTION_ERROR:"XHR transaction failed due to an error",SERVER_MALFORMED_RESPONSE:"Response from server is malformed",SERVER_INTERNAL_ERROR:"Internal error occurred on the server",SERVER_CANNOT_PROCESS:"Server was not able to process the request, probably due to error coming from the client",NO_CONNECTION:"No internet connectivity",SKIP:"Skipping slower attempt",MISSING_URL:"Url is not provided"},h=n(2),g=n.n(h),y=n(8),b=n.n(y);function w(e){return!Object.keys(e).length&&e.constructor===Object}function k(e){return"object"===b()(e)&&null!==e&&!(e instanceof Array)}function S(e){try{return k(JSON.parse(e))}catch(e){return!1}}function P(e,t,n){function r(e){return t instanceof Array?t.every((function(t){return e[t]===n[t]})):e[t]===n}for(var o=0;o<e.length;o+=1)if(r(e[o]))return o;return-1}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return u()(u()({},e),{},g()({},t.key,t.value))}),{})}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter((function(e){return-1!==t.indexOf(e)}))}function x(e,t){return new RegExp("\\/".concat(t,"(\\/.*|\\?.*){0,1}$")).test(e)}function j(e,t){var n=d()(t,2),r=n[0],o=n[1];return u()(u()({},e),{},g()({},r,o))}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={entries:function(t){return[t,e[t]]},values:function(t){return e[t]}};return Object[t]?Object[t](e):Object.keys(e).map(n[t])}function I(e){return O(e,"entries")}function A(e){return k(e)?!w(e):!!e||0===e}var T=(i={},g()(i,"none",-1),g()(i,"error",0),g()(i,"warning",1),g()(i,"info",2),g()(i,"verbose",3),i),E={log:"  ",info:" ",warn:" ",error:""},D={development:"verbose",production:"error",test:"verbose"},R=L(),C="";function L(){return D[p.env]||"error"}function M(e,t){var n;if(!(T[R]<T[t])){for(var r=(new Date).toISOString(),o=E[e],i=["[".concat(p.namespace,"]"),r,"".concat(e.toUpperCase(),":").concat(o)],a=C?document.querySelector(C):null,u=arguments.length,s=new Array(u>2?u-2:0),c=2;c<u;c++)s[c-2]=arguments[c];(n=console)[e].apply(n,i.concat(s)),a&&(a.textContent+="".concat(i.join(" ")," ").concat(s.map((function(e){return k(e)?JSON.stringify(e):e})).join(" "),"\n"),a.scrollTop=a.scrollHeight)}}function B(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];M.apply(void 0,[e,t].concat(r))}}var q={setLogLevel:function(e,t){e&&-1===Object.keys(T).indexOf(e)?M("error","error","You must set one of the available log levels: verbose, info, warning, error or none"):(R=e||L(),C=t,M("info",e,"Log level set to ".concat(R)))},log:B("log","verbose"),info:B("info","info"),warn:B("warn","warning"),error:B("error","error")},K={},F={},U=["appToken","environment"],G=[].concat(U,["defaultTracker","externalDeviceId"]),W=["customUrl","eventDeduplicationListLimit"],H={sessionWindow:18e5,sessionTimerWindow:6e4,requestValidityWindow:24192e5,baseUrl:"test"===p.env?{app:"app",gdpr:"gdpr"}:{app:"https://app.adjust.com",gdpr:"https://gdpr.adjust.com"}};function Y(e){var t=U.filter((function(t){return!e[t]}));return!!t.length&&(q.error("You must define ".concat(function(e){if(!e.length)return"";if(1===e.length)return e[0];var t=e.length-1,n=e.slice(0,t).join(", ");return"".concat(n," and ").concat(e[t])}(t))),!0)}var J,V=u()(u()({},H),{},{set:function(e){if(!Y(e)){var t=[].concat(m()(G),W).filter((function(t){return!!e[t]})).map((function(t){return[t,e[t]]}));K=t.filter((function(e){var t=d()(e,1)[0];return-1!==G.indexOf(t)})).reduce(j,{}),F=t.filter((function(e){var t=d()(e,1)[0];return-1!==W.indexOf(t)})).reduce(j,{})}},getBaseParams:function(){return u()({},K)},getCustomConfig:function(){return u()({},F)},isInitialised:function(){return U.reduce((function(e,t){return e&&!!K[t]}),!0)},hasMissing:Y,destroy:function(){K={},F={}}}),z={queue:{name:"q",scheme:{keyPath:"timestamp",autoIncrement:!1,fields:{url:{key:"u",values:{"/session":1,"/event":2,"/gdpr_forget_device":3,"/sdk_click":4,"/disable_third_party_sharing":5}},method:{key:"m",values:{GET:1,POST:2,PUT:3,DELETE:4}},timestamp:"t",createdAt:"ca",params:{key:"p",keys:{timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastInterval:"li",eventToken:"et",revenue:"re",currency:"cu",callbackParams:"cp",partnerParams:"pp"}}}}},activityState:{name:"as",scheme:{keyPath:"uuid",autoIncrement:!1,fields:{uuid:{key:"u",values:{unknown:"-"}},timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastActive:"la",lastInterval:"li",installed:{key:"in",values:{false:0,true:1}},attribution:{key:"at",keys:{adid:"a",tracker_token:"tt",tracker_name:"tn",network:"nt",campaign:"cm",adgroup:"ag",creative:"cr",click_label:"cl",state:{key:"st",values:{installed:1,reattributed:2}}}}}}},globalParams:{name:"gp",scheme:{keyPath:"keyType",autoIncrement:!1,index:"type",fields:{keyType:{key:"kt",composite:["key","type"]},key:"k",value:"v",type:{key:"t",values:{callback:1,partner:2}}}}},eventDeduplication:{name:"ed",scheme:{keyPath:"internalId",autoIncrement:!0,fields:{internalId:"ii",id:"i"}}},preferences:{name:"p",scheme:{fields:{thirdPartySharingDisabled:{key:"td",keys:{reason:{key:"r",values:g()({},"general",1)},pending:{key:"p",values:{false:0,true:1}}}},sdkDisabled:{key:"sd",keys:{reason:{key:"r",values:(J={},g()(J,"general",1),g()(J,"gdpr",2),J)},pending:{key:"p",values:{false:0,true:1}}}}}},permanent:!0}};function Q(e){try{return JSON.parse(e)}catch(t){return e}}function X(e,t,n){var r,o=n.values?{values:(r=n.values,I(r).map((function(e){var t=d()(e,2),n=t[0];return[t[1],Q(n)]})).reduce(j,{}))}:{},i=n.keys?{keys:Z(e,n.keys)}:{},a=n.composite?{composite:n.composite.map((function(t){return $(e,t)}))}:{};return u()(u()(u()({key:t},o),i),a)}function Z(e,t){return I(t).map((function(t){var n=d()(t,2),r=n[0],o=n[1];return o.key?[o.key,X(e,r,o)]:[o,r]})).reduce(j,{})}function $(e,t){var n=z[e].scheme.fields[t];return n?n.key||n:t}var ee,te=I(z).map((function(e){var t=d()(e,2),n=t[0],r=t[1];return[n,{keyPath:r.scheme.keyPath,autoIncrement:r.scheme.autoIncrement,index:r.scheme.index,fields:r.scheme.fields}]})).reduce(j,{}),ne=I(te).map((function(e){var t=d()(e,2),n=t[0],r=t[1];return[n,{keyPath:$(n,r.keyPath),autoIncrement:r.autoIncrement,index:$(n,r.index),fields:Z(n,r.fields)}]})).reduce(j,{}),re=I(z).reduce((function(e,t){var n=d()(t,2)[1];return e.concat(n.scheme.fields)}),[]).map((function(e){return I(e).filter((function(e){return d()(e,2)[1].values})).map((function(e){return I(d()(e,2)[1].values)})).reduce((function(e,t){return e.concat(t)}),[])})).reduce((function(e,t){return e.concat(t)}),[]).reduce(j,{}),oe=I(z).map((function(e){var t=d()(e,2),n=t[0],r=t[1];return[n,{name:r.name,permanent:r.permanent}]})).reduce(j,{}),ie={left:te,right:ne,values:re,storeNames:{left:oe,right:(ee=oe,I(ee).map((function(e){var t=d()(e,2),n=t[0],r=t[1];return[r.name,{name:n,permanent:r.permanent}]})).reduce(j,{}))}};function ae(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e+"",r=1;r<=t;r+=1)e<Math.pow(10,r)&&(n="0".concat(n));return n}function ue(e){var t=e?new Date(e):new Date,n=function(e){var t=ae(e.getDate()),n=ae(e.getMonth()+1);return[e.getFullYear(),n,t].join("-")}(t),r=function(e){var t=ae(e.getHours(),1),n=ae(e.getMinutes()),r=ae(e.getSeconds()),o=ae(e.getMilliseconds(),2);return[t,n,r].join(":")+"."+o}(t),o=function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+ae(Math.floor(Math.abs(t)/60))+ae(Math.abs(t)%60)}(t);return"".concat(n,"T").concat(r,"Z").concat(o)}function se(e,t){return isNaN(e)||isNaN(t)?0:Math.abs(t-e)}var ce={},le=!1,de=!1;function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ce=le?u()({},e):{}}function me(){le&&(ce.lastInterval=function(){var e=ce.lastActive;if(e)return Math.round(se(e,Date.now())/1e3);return-1}(),ce.lastActive=Date.now())}function pe(e){ce=u()(u()({},ce),e)}function ve(){de=!0}function he(){var e=ce.lastActive;return Math.round(se(e,Date.now())/1e3)}function ge(){return(ce.timeSpent||0)+(de?he():0)}function ye(){var e=se(ce.lastActive,Date.now())<V.sessionWindow,t=de||!de&&e;return(ce.sessionLength||0)+(t?he():0)}function be(){le&&(pe({timeSpent:ge(),sessionLength:ye()}),me())}var we={get current(){return le?u()({},ce):{}},set current(e){fe(e)},init:function(e){le=!0,fe(e)},isStarted:function(){return le},toForeground:ve,toBackground:function(){de=!1},initParams:function(){be(),ve()},getParams:function(e){if(!le)return null;var t=ce.lastInterval>=0?ce.lastInterval:0,n={timeSpent:ce.timeSpent||0,sessionLength:ce.sessionLength||0,sessionCount:ce.sessionCount||1,lastInterval:t||0};return e&&x(e,"event")&&(n.eventCount=ce.eventCount),n},updateParams:function(e,t){if(le){var n={};n.timeSpent=ge(),n.sessionLength=ye(),x(e,"session")&&(n.sessionCount=(ce.sessionCount||0)+1),x(e,"event")&&(n.eventCount=(ce.eventCount||0)+1),pe(n),t||me()}},updateInstalled:function(){le&&(ce.installed||pe({installed:!0}))},updateSessionOffset:be,updateSessionLength:function(){le&&(pe({sessionLength:ye()}),me())},resetSessionOffset:function(){le&&pe({timeSpent:0,sessionLength:0})},updateLastActive:me,destroy:function(){ce={},le=!1,de=!1}};function ke(e,t){return e&&void 0!==e[t]?e[t]:t}function Se(e){var t=e.storeName,n=e.dir,r=e.record,o=e.scheme;if(r)return o=o||ie[n][xe({storeName:t,dir:"right"})].fields,I(r).map((function(e){var r=d()(e,2),i=r[0],a=r[1];return function(e){var t=e.storeName,n=e.scheme,r=e.dir,o=e.key,i=e.value;if(!n)return[o,i];var a=n.key||n;return k(i)?[a,Se({storeName:t,dir:r,record:i,scheme:n.keys})]:[a,ke(n.values,i)]}({storeName:t,scheme:o[i],dir:n,key:i,value:a})})).reduce((function(e,t){var n=d()(t,2),r=n[0],o=n[1];return u()(u()({},e),{},g()({},r,o))}),{})}function Pe(e){var t=e.storeName,n=e.dir,r=e.records;return(void 0===r?[]:r).map((function(e){return Se({storeName:t,dir:n,record:e})}))}function Ne(e){var t=e.storeName,n=e.dir,r=e.target,o=ie[n][xe({storeName:t,dir:"right"})],i=o.fields[o.keyPath],a=r instanceof Array?r.slice():[r],u=(i.composite||[o.keyPath]).map((function(e,t){return ke(o.fields[e].values,a[t])}));return 1===u.length?u[0]:u}function _e(e){return ie.values[e]||e}function xe(e){var t=e.storeName,n=e.dir;return(ie.storeNames[n][t]||{}).name||t}function je(e){var t=e.storeName,n=e.error;return{name:n.name,message:n.message.replace('"'.concat(t,'"'),xe({storeName:t,dir:"right"}))}}var Oe=p.namespace,Ie=ie.storeNames.left;var Ae={storeNames:Ie,stores:{},clear:function(){I(Ie).forEach((function(e){var t=d()(e,2)[1];t.permanent||localStorage.removeItem("".concat(Oe,".").concat(t.name))}))}};I(Ie).forEach((function(e){var t=d()(e,2)[1];Object.defineProperty(Ae.stores,t.name,{get:function(){return e=t.name,((n=JSON.parse(localStorage.getItem("".concat(Oe,".").concat(e))))instanceof Array?n:Se({storeName:Ie.preferences.name,dir:"right",record:n}))||null;var e,n},set:function(e){!function(e,t){t?localStorage.setItem("".concat(Oe,".").concat(e),JSON.stringify(t instanceof Array?t:Se({storeName:Ie.preferences.name,dir:"left",record:t}))):localStorage.removeItem("".concat(Oe,".").concat(e))}(t.name,e)}})})),Object.freeze(Ae.stores);var Te=Ae,Ee={},De=[];function Re(e,t){var n="id"+Math.random().toString(36).substr(2,16),r={id:n,cb:t};return Ee[e]||(Ee[e]=[]),Ee[e].push(r),n}function Ce(e,t){Ee[e]&&Ee[e].forEach((function(n){"function"==typeof n.cb&&De.push(setTimeout((function(){return n.cb(e,t)})))}))}var Le=Te.storeNames.preferences.name,Me=Be();function Be(){return Me||qe(),Me?u()({},Me):null}function qe(){Me=Te.stores[Le]}function Ke(){var e=Be();return e?e.sdkDisabled:null}function Fe(e){var t=e?u()({},e):null;Te.stores[Le]=u()(u()({},Be()),{},{sdkDisabled:t}),qe()}function Ue(){var e=Be();return e?e.thirdPartySharingDisabled:null}function Ge(){var e=Te.stores[Le]||{},t=(Me||{}).sdkDisabled||null;e.sdkDisabled&&!t&&Ce("sdk:shutdown"),qe()}function We(){Te.stores[Le]||(Te.stores[Le]=u()({},Me))}var He,Ye="undefined"==typeof Promise?n(3).Promise:Promise,Je=p.namespace;function Ve(){var e=ze(),t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),n=!!e&&!t;return n||q.warn("IndexedDB is not supported in this browser"),n}function ze(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB}function Qe(){var e=ze();return Ve()?new Ye((function(t,n){if(He)t({success:!0});else{var r=e.open(Je,1);r.onupgradeneeded=function(e){return function(e,t){var n=e.target.result;e.target.transaction.onerror=t,e.target.transaction.onabort=t;var r=ie.storeNames.left,o=we.current||{},i=o&&!w(o);I(r).filter((function(e){return!d()(e,2)[1].permanent})).forEach((function(e){var t=d()(e,2),a=t[0],u=t[1],s=ie.right[a],c=n.createObjectStore(u.name,{keyPath:s.keyPath,autoIncrement:s.autoIncrement||!1});s.index&&c.createIndex("".concat(s.index,"Index"),s.index),u.name===r.activityState.name&&i?(c.add(Se({storeName:a,record:o,dir:"left"})),q.info("Activity state has been recovered")):Te.stores[u.name]&&(Te.stores[u.name].forEach((function(e){return c.add(e)})),q.info("Migration from localStorage done for ".concat(a," store")))})),We(),Te.clear()}(e,n)},r.onsuccess=function(e){return function(e,t){He=e.target.result,t({success:!0}),He.onclose=gt}(e,t)},r.onerror=n}})):Ye.reject({name:"IDBNotSupported",message:"IndexedDB is not supported"})}function Xe(e,t){var n,r=e.storeName,o=e.mode,i=He.transaction([r],o),a=i.objectStore(r),u=ie.right[xe({storeName:r,dir:"right"})];return u.index&&(n=a.index("".concat(u.index,"Index"))),i.onerror=t,i.onabort=t,{transaction:i,store:a,index:n,options:u}}function Ze(e,t){var n=t.target.error;return e({name:n.name,message:n.message})}function $e(e){return e.fields[e.keyPath].composite||null}function et(e,t,n){var r=-1!==["add","put"].indexOf(n),o=$e(e);return o?r?u()(g()({},e.keyPath,o.map((function(e){return t[e]})).join("")),t):t?t.join(""):null:t}function tt(e,t){var n=$e(e);return n&&k(t)?n.map((function(e){return t[e]})):null}function nt(e){var t=e.storeName,n=e.target,r=void 0===n?null:n,o=e.action,i=e.mode,a=void 0===i?"readonly":i;return Qe().then((function(){return new Ye((function(e,n){var i=Xe({storeName:t,mode:a},n),u=i.store,s=i.options,c=u[o](et(s,r,o)),l=tt(s,r);c.onsuccess=function(){"get"!==o||c.result?e(l||c.result||r):n({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(t,'" store')})},c.onerror=function(e){return Ze(n,e)}}))}))}function rt(e){var t=e.storeName,n=e.action,r=void 0===n?"list":n,o=e.range,i=void 0===o?null:o,a=e.firstOnly,u=e.mode,s=void 0===u?"readonly":u;return Qe().then((function(){return new Ye((function(e,n){var o=Xe({storeName:t,mode:s},n),u=o.transaction,c=o.store,l=o.index,d=o.options,f=(l||c).openCursor(i),m=[];u.oncomplete=function(){return e(a?m[0]:m)},f.onsuccess=function(e){var t=e.target.result;t&&("delete"===r?(t.delete(),m.push(tt(d,t.value)||t.value[d.keyPath])):m.push(t.value),a||t.continue())},f.onerror=function(e){return Ze(n,e)}}))}))}function ot(e,t){return rt({storeName:e,firstOnly:t})}function it(e){return ot(e,!0)}function at(e,t){return nt({storeName:e,target:t,action:"get"})}function ut(e,t){return rt({storeName:e,range:IDBKeyRange.only(t)})}function st(e,t){return nt({storeName:e,target:t,action:"add",mode:"readwrite"})}function ct(e,t,n){return function(e){var t=e.storeName,n=e.target,r=e.action,o=e.mode;return Qe().then((function(){return new Ye((function(e,i){if(!n||n&&!n.length)return i({name:"NoTargetDefined",message:"No array provided to perform ".concat(r,' bulk operation into "').concat(t,'" store')});var a=Xe({storeName:t,mode:o},i),u=a.transaction,s=a.store,c=a.options,l=[],d=n[0];u.oncomplete=function(){return e(l)},function e(t){t.onerror=function(e){return Ze(i,e)},t.onsuccess=function(){l.push(tt(c,d)||t.result),d=n[l.length],l.length<n.length&&e(s[r](et(c,d,r)))}}(s[r](et(c,d,r)))}))}))}({storeName:e,target:t,action:n?"put":"add",mode:"readwrite"})}function lt(e,t){return nt({storeName:e,target:t,action:"put",mode:"readwrite"})}function dt(e,t){return nt({storeName:e,target:t,action:"delete",mode:"readwrite"})}function ft(e,t,n){return rt({storeName:e,action:"delete",range:n?IDBKeyRange[n](t):IDBKeyRange.only(t),mode:"readwrite"})}function mt(e,t){var n=ie.right[xe({storeName:e,dir:"right"})];return ot(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?ft(e,t[n.keyPath],"upperBound"):[]}))}function pt(e){return Qe().then((function(){return new Ye((function(t,n){var r=Xe({storeName:e,mode:"readonly"},n).store.count();r.onsuccess=function(){return t(r.result)},r.onerror=function(e){return Ze(n,e)}}))}))}function vt(e){return nt({storeName:e,action:"clear",mode:"readwrite"})}function ht(){var e=ze();return gt(),new Ye((function(t,n){var r=e.deleteDatabase(Je);r.onerror=function(e){return Ze(n,e)},r.onsuccess=function(e){t(e.result)},r.onerror=function(e){return n(e.target)},r.onblocked=function(e){return n(e.target)}}))}function gt(){He&&He.close(),He=null}var yt="undefined"==typeof Promise?n(3).Promise:Promise;function bt(){var e,t,n=(new Date).toString();try{return(e=window.localStorage).setItem(n,n),t=e.getItem(n)===n,e.removeItem(n),!(!t||!e)}catch(e){return q.warn("LocalStorage is not supported in this browser"),!1}}function wt(){if(!bt())return{status:"error",error:{name:"LSNotSupported",message:"LocalStorage is not supported"}};var e=ie.storeNames.left,t=we.current||{},n=t&&!w(t);return I(e).filter((function(e){return!d()(e,2)[1].permanent})).forEach((function(r){var o=d()(r,2),i=o[0],a=o[1],u=e.activityState.name;a.name!==u||Te.stores[u]?Te.stores[a.name]||(Te.stores[a.name]=[]):Te.stores[u]=n?[Se({storeName:i,record:t,dir:"left"})]:[]})),We(),{status:"success"}}function kt(e){return e.fields[e.keyPath].composite||null}function St(e){var t=ie.right[xe({storeName:e,dir:"right"})];return kt(t)||[t.keyPath]}function Pt(e,t){var n=e.storeName,r=e.id,o=e.item,i=wt(),a=ie.right[xe({storeName:n,dir:"right"})];return"error"===i.status?yt.reject(i.error):new yt((function(e,i){var s=Te.stores[n],c=St(n),l=r instanceof Array?r.slice():[r],d=(s[s.length-1]||{})[a.keyPath]||0,f=r?c.map((function(e,t){return[e,l[t]]})).reduce(j,{}):u()({},o),m=f?P(s,c,f):null;return t(e,i,{keys:c,items:s,index:m,options:a,lastId:d})}))}function Nt(e,t,n){var r=m()(e),o=t.slice().reverse();return r.sort((function(e,t){return o.reduce((function(r,o){return r||function(e,t,r){var o=n?n===e[r]:e[r]<t[r],i=n?n>e[r]:e[r]>t[r];return o?-1:i?1:0}(e,t,o)}),0)}))}function _t(e,t,n){var r=kt(e);return r?u()(g()({},e.keyPath,r.map((function(e){return t[e]})).join("")),t):e.autoIncrement&&n?u()(g()({},e.keyPath,n),t):u()({},t)}function xt(e,t){var n=kt(e);return n&&k(t)?n.map((function(e){return t[e]})):t[e.keyPath]||t}function jt(e,t){var n=wt();return"error"===n.status?yt.reject(n.error):new yt((function(n,r){var o=Te.stores[e];o instanceof Array?n(t?o[0]:Nt(o,St(e))):r({name:"NotFoundError",message:"No objectStore named ".concat(e," in this database")})}))}function Ot(e){return jt(e,!0)}function It(e,t){return Pt({storeName:e,id:t},(function(t,n,r){var o=r.items,i=r.index,a=r.options;-1===i?n({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(e,'" store')}):t(_t(a,o[i]))}))}function At(e,t){return jt(e).then((function(n){return n.filter((function(n){return n[ie.right[xe({storeName:e,dir:"right"})].index]===t}))}))}function Tt(e,t){return Pt({storeName:e,item:t},(function(n,r,o){var i=o.items,a=o.index,u=o.options,s=o.lastId;-1!==a?r({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing item into "'.concat(e,'" store')}):(i.push(_t(u,t,s+1)),Te.stores[e]=i,n(xt(u,t)))}))}function Et(e,t,n){return Pt({storeName:e},(function(r,o,i){var a=i.keys,u=i.items,s=i.options,c=i.lastId;if(!t||t&&!t.length)return o({name:"NoTargetDefined",message:'No array provided to perform add bulk operation into "'.concat(e,'" store')});var l=c,d=t.map((function(e){return _t(s,e,++l)})),f=d.filter((function(e){return-1!==P(u,a,e)})).map((function(e){return e[s.keyPath]})),p=n?u.filter((function(e){return-1===f.indexOf(e[s.keyPath])})):m()(u);f.length&&!n?o({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing items into "'.concat(e,'" store')}):(Te.stores[e]=Nt([].concat(m()(p),m()(d)),a),r(t.map((function(e){return xt(s,e)}))))}))}function Dt(e,t){return Pt({storeName:e,item:t},(function(n,r,o){var i=o.items,a=o.index,u=o.options,s=o.lastId,c=_t(u,t,-1===a?s+1:null);-1===a?i.push(c):i.splice(a,1,c),Te.stores[e]=i,n(xt(u,t))}))}function Rt(e,t){return Pt({storeName:e,id:t},(function(n,r,o){var i=o.items,a=o.index;-1!==a&&(i.splice(a,1),Te.stores[e]=i),n(t)}))}function Ct(e,t,n){return jt(e).then((function(r){var o=St(e),i=ie.right[xe({storeName:e,dir:"right"})].index||o[0],a=Nt(r,o,n?null:t),u=function(e,t,n){if(!e.length)return-1;for(var r={index:-1,value:isNaN(n)?"":0},o=0;o<e.length;o+=1){if(!(e[o][t]<=n))return r.index;e[o][t]>=r.value&&(r={value:e[o][t],index:o})}return r.index}(a,i,t);if(-1===u)return[];var s="lowerBound"===n?u:0,c=n&&"upperBound"!==n?a.length:u+1,l=a.splice(s,c).map((function(e){return 1===o.length?e[i]:o.map((function(t){return e[t]}))}));return Te.stores[e]=a,l}))}function Lt(e,t){var n=wt(),r=ie.right[xe({storeName:e,dir:"right"})];return"error"===n.status?yt.reject(n.error):jt(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?Ct(e,t[r.keyPath],"upperBound"):[]}))}function Mt(e){var t=wt();return"error"===t.status?yt.reject(t.error):yt.resolve(Te.stores[e].length)}function Bt(e){var t=wt();return"error"===t.status?yt.reject(t.error):new yt((function(t){Te.stores[e]=[],t({})}))}function qt(){}var Kt="undefined"==typeof Promise?n(3).Promise:Promise,Ft={getAll:function(e,t){return e.getAll(t).then((function(e){return Pe({storeName:t,dir:"right",records:e})}))},getFirst:function(e,t){return e.getFirst(t).then((function(e){return Se({storeName:t,dir:"right",record:e})}))},getItem:function(e,t,n){return e.getItem(t,Ne({storeName:t,dir:"left",target:n})).then((function(e){return Se({storeName:t,dir:"right",record:e})})).catch((function(e){return Kt.reject(je({storeName:t,error:e}))}))},filterBy:function(e,t,n){return e.filterBy(t,_e(n)).then((function(e){return Pe({storeName:t,dir:"right",records:e})}))},addItem:function(e,t,n){return e.addItem(t,Se({storeName:t,dir:"left",record:n})).then((function(e){return Ne({storeName:t,dir:"right",target:e})})).catch((function(e){return Kt.reject(je({storeName:t,error:e}))}))},addBulk:function(e,t,n,r){return e.addBulk(t,Pe({storeName:t,dir:"left",records:n}),r).then((function(e){return e.map((function(e){return Ne({storeName:t,dir:"right",target:e})}))})).catch((function(e){return Kt.reject(je({storeName:t,error:e}))}))},updateItem:function(e,t,n){return e.updateItem(t,Se({storeName:t,dir:"left",record:n})).then((function(e){return Ne({storeName:t,dir:"right",target:e})}))},deleteItem:function(e,t,n){return e.deleteItem(t,Ne({storeName:t,dir:"left",target:n})).then((function(e){return Ne({storeName:t,dir:"right",target:e})}))},deleteBulk:function(e,t,n,r){return e.deleteBulk(t,_e(n),r).then((function(e){return e.map((function(e){return Ne({storeName:t,dir:"right",target:e})}))}))},trimItems:function(e,t,n){return e.trimItems(t,n)},count:function(e,t){return e.count(t)},clear:function(e,t){return e.clear(t)}};var Ut,Gt,Wt=(Ve()?(Ut=r,Gt="indexedDB"):bt()&&(Ut=o,Gt="localStorage"),Gt?u()({type:Gt,isSupported:Ut.isSupported,destroy:Ut.destroy},function(e){return I(Ft).map((function(t){var n=d()(t,2),r=n[0],o=n[1];return[r,function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.call.apply(o,[null,e,xe({storeName:t,dir:"left"})].concat(r))}]})).reduce(j,{})}(Ut)):(q.error("There is no storage available, app will run with minimum set of features"),null));"undefined"==typeof Promise&&n(3).Promise;function Ht(){return Wt.getAll("queue").then((function(e){return{queueSize:e.length}})).then((function(e){return u()(u()(u()(u()(u()(u()(u()(u()({},{createdAt:ue()}),{sentAt:ue()}),{webUuid:we.current.uuid}),(n=navigator,r=void 0!==n.doNotTrack,o=void 0!==window.doNotTrack,i=void 0!==n.msDoNotTrack,a=r?n.doNotTrack:o?window.doNotTrack:i?n.msDoNotTrack:null,0===parseInt(a,10)||"no"===a?{trackingEnabled:!0}:1===parseInt(a,10)||"yes"===a?{trackingEnabled:!1}:null)),{platform:"web"}),function(){var e=navigator,t=(e.language||e.userLanguage||"en").split("-"),n=d()(t,2),r=n[0],o=n[1];return{language:r,country:o?""+o.toLowerCase():void 0}}()),(t=navigator.userAgent||navigator.vendor,{machineType:"Win32"!==navigator.platform||-1===t.indexOf("WOW64")&&-1===t.indexOf("Win64")?navigator.platform:"Win64"})),e);var t,n,r,o,i,a}))}var Yt="undefined"==typeof Promise?n(3).Promise:Promise;function Jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{status:"error",action:n?"CONTINUE":"RETRY",response:S(e.responseText)?JSON.parse(e.responseText):e.responseText,message:v[t],code:t}}function Vt(e,t){var n=e.slice(0,e.length-t.length-1).split("").reduce((function(e){return e.concat(" ")}),"");return"".concat(t).concat(n,":")}function zt(e,t){var n=function(e){return e.replace(/([A-Z])/g,(function(e){return"_".concat(e.toLowerCase())}))},r=I(u()(u()(u()({},V.getBaseParams()),t),e)).map((function(e){var t=d()(e,2),r=t[0],o=t[1];return[n(r),o]}));return q.log("REQUEST PARAMETERS:"),r.filter((function(e){return A(d()(e,2)[1])})).map((function(e){var t=d()(e,2),n=t[0],r=t[1];return q.log(Vt("REQUEST PARAMETERS:",n),r),function(e){var t=d()(e,2),n=t[0],r=t[1],o=encodeURIComponent(n),i=r;return"string"==typeof r&&(i=encodeURIComponent(r)),k(r)&&(i=encodeURIComponent(JSON.stringify(r)||"")),[o,i].join("=")}([n,r])})).join("&")}function Qt(e,t,n){var r=n.xhr,o=n.url;if(4===r.readyState){var i=r.status>=200&&r.status<300,a=S(r.responseText);if(0!==r.status)return a?t(i?function(e,t){var n=JSON.parse(e.responseText),r={status:"success",adid:n.adid,timestamp:n.timestamp,ask_in:n.ask_in,retry_in:n.retry_in,continue_in:n.continue_in,tracking_state:n.tracking_state,attribution:void 0,message:void 0};return x(t,"attribution")&&(r.attribution=n.attribution,r.message=n.message),I(r).filter((function(e){return!!d()(e,2)[1]})).reduce(j,{})}(r,o):Jt(r,"SERVER_CANNOT_PROCESS",!0)):e(Jt(r,i?"SERVER_MALFORMED_RESPONSE":"SERVER_INTERNAL_ERROR"));e(Jt(r,"NO_CONNECTION"))}}function Xt(e,t){var n=e.url,r=e.method,o=void 0===r?"GET":r,i=e.params,a=function(e,t){var n=e.url,r=e.method,o=zt(e.params,t),i="/gdpr_forget_device"===n?"gdpr":"app";return{fullUrl:(V.getCustomConfig().customUrl||V.baseUrl[i])+n+("GET"===r?"?".concat(o):""),encodedParams:o}}({url:n,method:o,params:void 0===i?{}:i},t),u=a.fullUrl,s=a.encodedParams;return new Yt((function(e,t){var r=new XMLHttpRequest;r.open(o,u,!0),function(e,t){var n=[["Client-SDK","js".concat(p.version)],["Content-Type","POST"===t?"application/x-www-form-urlencoded":"application/json"]];q.log("REQUEST HEADERS:"),n.forEach((function(t){var n=d()(t,2),r=n[0],o=n[1];e.setRequestHeader(r,o),q.log(Vt("REQUEST HEADERS:",r),o)}))}(r,o),r.onreadystatechange=function(){return Qt(t,e,{xhr:r,url:n})},r.onerror=function(){return t(Jt(r,"TRANSACTION_ERROR"))},r.send("GET"===o?void 0:s)}))}function Zt(e,t){return"success"===e.status?function(e,t){var n=x(t,"gdpr_forget_device"),r=x(t,"attribution"),o=x(t,"session"),i=x(t,"disable_third_party_sharing"),a="opted_out"===e.tracking_state;if(!n&&a)return Ce("sdk:gdpr-forget-me"),e;r||n||a||!e.ask_in||Ce("attribution:check",e);o&&Ce("session:finished",e);if(i)return Ce("sdk:third-party-sharing-opt-out"),e;return e}(e,t):e}function $t(e){return Ht().then((function(t){return Xt(e,t)})).then((function(t){return Zt(t,e.url)}))}var en={long:{delay:12e4,maxDelay:864e5,minRange:.5,maxRange:1},short:{delay:200,maxDelay:36e5,minRange:.5,maxRange:1},test:{delay:100,maxDelay:300}};function tn(e,t){var n,r,o=en[t=t||"long"],i=o.delay*Math.pow(2,e-1);return i=Math.min(i,o.maxDelay),o.minRange&&o.maxRange&&(i*=(n=o.minRange,r=o.maxRange,Math.random()*(r-n)+n)),Math.round(i)}var nn=navigator.onLine;function rn(){nn=!0}function on(){nn=!1}function an(e,t,n){e.addEventListener&&e.addEventListener(t,n,!1)}function un(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}function sn(){return nn}var cn="undefined"==typeof Promise?n(3).Promise:Promise,ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.method,r=void 0===n?"GET":n,o=e.params,i=void 0===o?{}:o,a=e.continueCb,s=e.strategy,c=e.wait,l={url:t,method:r,params:i,continueCb:a},f=t,m=r,p=u()({},i),h=a,g=s,y=null,b={request:0,connection:0},k=P(c),S=null;function P(e){return(e=e||150)>2147483647?2147483647:e}function N(e){var t=e.url,n=e.method,r=e.params,o=e.continueCb;t&&(f=t),n&&(m=n),w(r)||(p=u()({},r)),p=u()({createdAt:ue()},p),"function"==typeof o&&(h=o)}function _(e){if(!S)return!1;if(y){var t=k-(Date.now()-S);if(e&&t<e)return!0;F()}return!1}function x(e){var t=e.wait,n=e.retrying;return k=t?P(t):k,_(t)?cn.resolve({status:"error",action:"CONTINUE",response:"",message:v.SKIP,code:"SKIP"}):f?(q.log("".concat(n?"Re-trying":"Trying"," request ").concat(f," in ").concat(k,"ms")),S=Date.now(),O({url:f,method:m,params:u()({attempts:1},p)})):(q.error("You must define url for the request to be sent"),cn.reject({status:"error",action:"CONTINUE",response:"",message:v.MISSING_URL,code:"MISSING_URL"}))}function O(e){return K(),sn()?T(e):(b.connection+=1,q.log("No internet connectivity, trying request ".concat(e.url," in ").concat(6e4,"ms")),new cn((function(t){y=setTimeout((function(){t(O(e))}),6e4)})))}function T(e){return new cn((function(t,n){y=setTimeout((function(){S=null;var r=I(e.params).filter((function(e){return A(d()(e,2)[1])})).reduce(j,{});return $t({url:e.url,method:e.method,params:u()(u()({},r),{},{attempts:(b.request?b.request+1:1)+b.connection})}).then((function(e){return C(e,t)})).catch((function(e){return L(e,t,n)}))}),k)}))}function E(){f=l.url,m=l.method,p=u()({},l.params),h=l.continueCb}function D(e){q.log("Request ".concat(f||"unknown"," ").concat(e?"failed":"has been finished")),b.request=0,b.connection=0,k=150,E(),F()}function R(e){return b.request+=1,F(),x({wait:e||tn(b.request,g),retrying:!0})}function C(e,t){e&&e.retry_in?t(R(e.retry_in)):("function"==typeof h?h(e,D,R):D(),t(e))}function L(e,t,n){e&&"RETRY"===e.action?t(R("NO_CONNECTION"===e.code?6e4:void 0)):(D(!0),n(e||{}))}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.method,r=e.params,o=void 0===r?{}:r,i=e.continueCb,a=e.wait;return N({url:t,method:n,params:o,continueCb:i}),x({wait:a})}function B(){return!!y}function K(){y&&clearTimeout(y),y=null}function F(){var e=!!S;K(),S=null,e&&(k=150,b.request=0,b.connection=0,q.log("Previous ".concat(f||"unknown"," request attempt canceled")),E())}return{send:M,isRunning:B,clear:F}},dn=function(e){return"gdpr"===e?"GDPR disable":"disable"},fn=function(e){return{start:{inProgress:"Adjust SDK ".concat(dn(e)," process has already started"),done:"Adjust SDK ".concat(dn(e)," process is now started")},finish:{inProgress:"Adjust SDK ".concat(dn(e)," process has already finished"),done:"Adjust SDK ".concat(dn(e)," process is now finished")}}};function mn(e,t){var n=e.reason,r=e.pending,o=Ke()||{},i="start"===t&&o.pending?"start":"finish",a="start"===t&&o.reason,u="finish"===t&&o.reason&&!o.pending;return a||u?(q.log(fn(o.reason)[i].inProgress),!1):(q.log(fn(n)[i].done),Fe({reason:n||"general",pending:r}),!0)}function pn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return mn({reason:e,pending:t||!1},"start")}function vn(){var e=Ke()||{};return"general"===e.reason||"gdpr"===e.reason&&!e.pending?"off":"gdpr"===e.reason&&e.pending?"paused":"on"}var hn="undefined"==typeof Promise?n(3).Promise:Promise,gn=!1;function yn(e){return e?"unknown"===e.uuid?(pn({reason:"gdpr"}),we.destroy(),{exists:!0,stored:null}):(we.init(e),{exists:!0,stored:e}):{exists:!1}}function bn(){return"off"!==vn()&&we.isStarted()}function wn(){if(!bn())return hn.resolve(null);var e=u()(u()({},we.current),{},{lastActive:Date.now()});return Wt.updateItem("activityState",e).then((function(){return we.current=e}))}var kn="undefined"==typeof Promise?n(3).Promise:Promise,Sn=ln({strategy:"long",continueCb:function(e,t){var n=e&&e.continue_in||null;return Nn.pause=n?{timestamp:Date.now(),wait:n}:null,Wt.getFirst("queue").then((function(e){return e?Wt.deleteItem("queue",e.timestamp):null})).then((function(){return t(),Nn.running=!1,An({wait:n})}))}}),Pn=!1,Nn={running:!1,timestamp:null,pause:null};function _n(){var e=Date.now();return Nn.timestamp&&e<=Nn.timestamp&&(e=Nn.timestamp+1),Nn.timestamp=e,e}function xn(e){return x(e,"session")&&we.resetSessionOffset(),we.updateLastActive(),wn()}function jn(e){var t=e.url,n=e.method,r=e.params,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.auto,a=o.timestamp;we.updateParams(t,i);var s=I(r||{}).filter((function(e){return A(d()(e,2)[1])})).reduce(j,{}),c={timestamp:_n(),url:t,method:n,params:u()(u()({},we.getParams(t)),s)};return a&&(c.createdAt=a),Wt.addItem("queue",c).then((function(){return xn(t)})).then((function(){return Nn.running?{}:An()}))}function On(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timestamp,n=e.createdAt,r=e.url,o=e.method,i=e.params,a=arguments.length>1?arguments[1]:void 0,s=we.current||{},c="/session"===r&&!s.installed,l=!r&&!o&&!i;return Pn&&!c||l?(Nn.running=!1,kn.resolve({})):Sn.send({url:r,method:o,params:u()(u()({},i),{},{createdAt:ue(n||t)}),wait:a||In()})}function In(){var e=Nn.pause||{},t=e.timestamp,n=e.wait,r=Date.now()-(t||0);return r<n?n-r:null}function An(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cleanUp,n=e.wait;if(Nn.running)return kn.resolve({});Nn.running=!0;var r=kn.resolve({});return t&&(r=r.then(En)),r.then((function(){return Wt.getFirst("queue")})).then((function(e){return On(e,n)}))}function Tn(e){if(void 0!==e)if(e!==Pn){var t=Pn;Pn=e,!e&&t&&An(),q.info("The app is now in ".concat(e?"offline":"online"," mode"))}else q.error("The app is already in ".concat(e?"offline":"online"," mode"));else q.error("State not provided, true or false has to be defined")}function En(){var e=Date.now()-V.requestValidityWindow;return Wt.deleteBulk("queue",e,"upperBound")}var Dn="undefined"==typeof Promise?n(3).Promise:Promise,Rn="No type provided",Cn="Global parameter type not provided, `callback` or `partner` types are available";function Ln(e){return(e||[]).map((function(e){return{key:e.key,value:e.value}}))}function Mn(){return Dn.all([Wt.filterBy("globalParams","callback"),Wt.filterBy("globalParams","partner")]).then((function(e){var t=d()(e,2),n=t[0],r=t[1];return{callbackParams:Ln(n),partnerParams:Ln(r)}}))}function Bn(e,t){if(void 0===t)return q.error(Cn),Dn.reject({message:Rn});var n=N(e),r=Object.keys(n).map((function(e){return{key:e,value:n[e],type:t}}));return Dn.all([Wt.filterBy("globalParams",t),Wt.addBulk("globalParams",r,!0)]).then((function(e){var n=d()(e,2),o=n[0],i=n[1],a=_(o.map((function(e){return e.key})),i.map((function(e){return e[0]})));return q.log("Following ".concat(t," parameters have been saved: ").concat(r.map((function(e){return"".concat(e.key,":").concat(e.value)})).join(", "))),a.length&&q.log("Keys: ".concat(a.join(", ")," already existed so their values have been updated")),i}))}function qn(e,t){return void 0===t?(q.error(Cn),Dn.reject({message:Rn})):Wt.deleteItem("globalParams",[e,t]).then((function(n){return q.log("".concat(e," ").concat(t," parameter has been deleted")),n}))}function Kn(e){return void 0===e?(q.error(Cn),Dn.reject({message:Rn})):Wt.deleteBulk("globalParams",e).then((function(t){return q.log("All ".concat(e," parameters have been deleted")),t}))}var Fn,Un,Gn,Wn="undefined"==typeof Promise?n(3).Promise:Promise,Hn=!1,Yn=document;function Jn(){return Gn=function(){var e=document;if(void 0!==e.hidden)return{hidden:"hidden",visibilityChange:"visibilitychange"};for(var t=I({mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange",webkitHidden:"webkitvisibilitychange"}),n=0;n<t.length;n+=1){var r=d()(t[n],2),o=r[0],i=r[1];if(void 0!==e[o])return{hidden:o,visibilityChange:i}}return null}(),Hn?Wn.reject({interrupted:!0,message:"Session watch already initiated"}):(Hn=!0,Re("session:finished",Xn),Gn&&an(Yn,Gn.visibilityChange,Qn),Gn&&Yn[Gn.hidden]?(q.log("Session request attempt canceled because the tab is still hidden"),Wn.resolve({})):(we.initParams(),$n()))}function Vn(){return Zn(),we.updateSessionOffset(),we.toBackground(),wn()}function zn(){return Wt.getFirst("activityState").then((function(e){var t=we.current,n=t.lastActive||0;if(bn()&&n<e.lastActive){var r=!t.installed&&e.installed,o=(t.sessionCount||0)<(e.sessionCount||0);(r||o)&&Ce("sdk:installed"),we.current=e,Ge()}return e})).then((function(){we.updateSessionLength(),we.toForeground()})).then($n)}function Qn(){clearTimeout(Un);var e=Gn&&Yn[Gn.hidden]?Vn:zn;Un=setTimeout(e,0)}function Xn(e,t){if(!t||"error"!==t.status)return we.updateInstalled(),Ce("sdk:installed"),wn();q.error("Session was not successful, error was returned from the server:",t.response)}function Zn(){clearInterval(Fn)}function $n(){Zn(),Fn=setInterval((function(){return we.updateSessionOffset(),wn()}),V.sessionTimerWindow);var e=we.current,t=e.lastInterval,n=e.sessionCount>0;return!n||n&&1e3*t>=V.sessionWindow?Mn().then((function(e){var t,n,r;jn({url:"/session",method:"POST",params:(t=e,n=t.callbackParams,r=t.partnerParams,{callbackParams:n.length?N(n):null,partnerParams:r.length?N(r):null})},{auto:!0})})):(Ce("attribution:check"),wn())}var er="undefined"==typeof Promise?n(3).Promise:Promise,tr=ln({url:"/attribution",strategy:"short",continueCb:function(e,t,n){if(!e||e&&"error"===e.status)return t(),er.resolve({state:"unknown"});if(!e.ask_in)return t(),function(e){if(w(e)||!function(e){var t=e.adid,n=void 0===t?"":t,r=e.attribution,o=void 0===r?{}:r;return!!n&&!!_(nr,Object.keys(o)).length}(e)||function(e){var t=e.adid,n=e.attribution,r=we.current.attribution||{};return!(n&&nr.some((function(e){return r[e]!==n[e]})))&&t===r.adid}(e))return er.resolve({state:"same"});var t=I(e.attribution).filter((function(e){var t=d()(e,1)[0];return-1!==nr.indexOf(t)})).reduce(j,{adid:e.adid});return we.current=u()(u()({},we.current),{},{attribution:t}),wn().then((function(){return Ce("attribution:change",t),q.info("Attribution has been updated"),{state:"changed"}}))}(e);return n(e.ask_in)}}),nr=["tracker_token","tracker_name","network","campaign","adgroup","creative","click_label","state"];var rr=ln({url:"/gdpr_forget_device",method:"POST",strategy:"short"}),or={running:"Adjust SDK is running pending GDPR Forget Me request",pending:"Adjust SDK will run GDPR Forget Me request after initialisation",paused:"Adjust SDK is already prepared to send GDPR Forget Me request",off:"Adjust SDK is already disabled"};function ir(e){var t=vn();return e||"on"===t?V.isInitialised()?(rr.send({params:u()({},we.getParams())}).then((function(){Ce("sdk:gdpr-forget-me")})),!0):(q.log(or.pending),!0):(q.log(or[t]),!1)}function ar(){return mn({reason:"gdpr",pending:!1},"finish")}var ur={running:"Adjust SDK is running pending third-party sharing opt-out request",delayed:"Adjust SDK will run third-party sharing opt-out request after initialisation",pending:"Adjust SDK already queued third-party sharing opt-out request",off:"Third-party sharing opt-out is already done",start:{inProgress:"Third-party sharing opt-out has already started",done:"Third-party sharing opt-out is now started"},finish:{inProgress:"Third-party sharing opt-out has already finished",done:"Third-party sharing opt-out is now finished"}};function sr(){var e=Ue()||{};return e.reason?e.pending?"pending":"off":"on"}function cr(e){var t=sr();return e||"on"===t?V.isInitialised()?(jn({url:"/disable_third_party_sharing",method:"POST"}),!0):(q.log(ur.delayed),!0):(q.log(ur[t]),!1)}function lr(e,t){var n,r,o=Ue()||{},i="start"===t&&e?"start":"finish",a="start"===t&&o.reason,s="finish"===t&&o.reason&&!o.pending;return a||s?(q.log(ur[i].inProgress),!1):(q.log(ur[i].done),r=(n={reason:"general",pending:e})?u()({},n):null,Te.stores[Le]=u()(u()({},Be()),{},{thirdPartySharingDisabled:r}),qe(),!0)}function dr(){return lr(!1,"finish")}function fr(){"pending"===sr()&&(q.log(ur.running),cr(!0))}var mr=[];function pr(e,t){mr.push({method:e,description:t,timestamp:Date.now()})}var vr="undefined"==typeof Promise?n(3).Promise:Promise;function hr(e,t){var n,r,o=t.callbackParams,i=t.partnerParams,a={},s=u()({eventToken:e.eventToken},(n=e.revenue,r=e.currency,isNaN(n)||(n=parseFloat(n))<0||!r?{}:{revenue:n.toFixed(5),currency:r})),c=u()(u()({},N(o)),N(e.callbackParams)),l=u()(u()({},N(i)),N(e.partnerParams));return w(c)||(a.callbackParams=c),w(l)||(a.partnerParams=l),u()(u()({},s),a)}function gr(e){return e?Wt.getAll("eventDeduplication").then((function(e){return e.map((function(e){return e.id}))})).then((function(t){return-1===t.indexOf(e)?function(e){var t=V.getCustomConfig().eventDeduplicationListLimit,n=t>0?t:10;return Wt.count("eventDeduplication").then((function(e){var t=vr.resolve();if(e>=n){var r=e-n+1;q.log("Event deduplication list limit has been reached. Oldest ids are about to be removed (".concat(r," of them)")),t=Wt.trimItems("eventDeduplication",r)}return t})).then((function(){return q.info("New event deduplication id is added to the list: ".concat(e)),Wt.addItem("eventDeduplication",{id:e})}))}(e):vr.reject({message:"Event won't be tracked, since it was previously tracked with the same deduplication id ".concat(e)})})):vr.resolve()}function yr(e){return{clickTime:ue(),source:"web_referrer",referrer:decodeURIComponent(e)}}function br(){var e=window.location.search.substring(1).split("&").map((function(e){return e.split("=")})).reduce(j,{}).adjust_referrer;e&&jn({url:"/sdk_click",method:"POST",params:yr(e)})}var wr="undefined"==typeof Promise?n(3).Promise:Promise,kr=null,Sr=!1,Pr=!1;function Nr(){cr()&&lr(!0,"start")}function _r(){var e;"paused"===vn()&&(ar(),wr.all([(e={uuid:"unknown"},we.current=e,Wt.clear("activityState").then((function(){return Wt.addItem("activityState",e)}))),Wt.clear("globalParams"),Wt.clear("queue")]).then(Or))}function xr(){Sr=!1,mr=[],Sn.clear(),Nn.running=!1,Nn.timestamp=null,Nn.pause=null,Hn=!1,we.toBackground(),Zn(),Gn&&(clearTimeout(Un),un(Yn,Gn.visibilityChange,Qn)),tr.clear()}function jr(e){e&&q.log("Adjust SDK has been shutdown due to asynchronous disable"),xr(),De.forEach(clearTimeout),De=[],Ee={},we.destroy(),un(window,"online",rn),un(window,"offline",on),Wt.destroy(),V.destroy()}function Or(){jr(),rr.clear(),kr=null,q.log("Adjust SDK instance has been destroyed")}function Ir(e){q.log("Adjust SDK is starting with web_uuid set to ".concat(e.uuid));var t=we.current.installed;"paused"===vn()&&(q.log(or.running),ir(!0)),t||fr();var n=vn(),r=function(e){return"Adjust SDK start has been interrupted ".concat(e)};return"off"===n?(jr(),wr.reject({interrupted:!0,message:r("due to complete async disable")})):"paused"===n?(xr(),wr.reject({interrupted:!0,message:r("due to partial async disable")})):Sr?wr.reject({interrupted:!0,message:r("due to multiple synchronous start attempt")}):(An({cleanUp:!0}),Jn().then((function(){Sr=!0,t&&(Ar(),fr())})))}function Ar(){var e;Pr=!0,mr.forEach((function(e){"function"==typeof e.method&&(q.log("Delayed ".concat(e.description," task is running now")),e.method(e.timestamp))})),mr=[],(e="sdk:installed")&&I(Ee).some((function(t){var n=d()(t,2)[1];return n.some((function(t,r){if(t.id===e)return n.splice(r,1),!0}))}))}function Tr(e){if(e.interrupted)q.log(e.message);else if(jr(),q.error("Adjust SDK start has been canceled due to an error",e),e.stack)throw e}function Er(e){"off"!==vn()?(V.set(e),an(window,"online",rn),an(window,"offline",on),Re("sdk:installed",Ar),Re("sdk:shutdown",(function(){return jr(!0)})),Re("sdk:gdpr-forget-me",_r),Re("sdk:third-party-sharing-opt-out",dr),Re("attribution:check",(function(e,t){return n=t,r=we.current,(o=(n||{}).ask_in)||!r.attribution&&r.installed?(tr.send({params:u()({initiatedBy:n?"backend":"sdk"},we.getParams()),wait:o}),we.updateSessionOffset(),wn()):er.resolve(r);var n,r,o})),"function"==typeof e.attributionCallback&&Re("attribution:change",e.attributionCallback),(gn?hn.reject({interrupted:!0,message:"Adjust SDK start already in progress"}):(gn=!0,Wt.getFirst("activityState").then(yn).then((function(e){if(e.exists)return gn=!1,e.stored;var t,n=w(we.current)?{uuid:(t=Date.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:11&n).toString(16)})))}:we.current;return Wt.addItem("activityState",n).then((function(){return we.init(n),Ge(),gn=!1,n}))})))).then(Ir).then(br).catch(Tr)):q.log("Adjust SDK is disabled, can not start the sdk")}function Dr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.schedule,o=n.stopBeforeInit;Wt?"on"===vn()?r&&o&&!V.isInitialised()?q.error("Adjust SDK can not ".concat(e,", sdk instance is not initialized")):"function"==typeof t&&(!r||Pr&&Sr||!o&&!V.isInitialised()?t():(pr(t,e),q.log("Running ".concat(e," is delayed until Adjust SDK is up")))):q.log("Adjust SDK is disabled, can not ".concat(e)):q.log("Adjust SDK can not ".concat(e,", no storage available"))}var Rr={initSdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.logLevel,n=e.logOutput,r=c()(e,["logLevel","logOutput"]);q.setLogLevel(t,n),Wt?(q.info("Available storage is ".concat(Wt.type)),V.isInitialised()?q.error("You already initiated your instance"):V.hasMissing(r)||(kr=u()({},r),Er(r))):q.error("Adjust SDK can not start, there is no storage available")},trackEvent:function(e){Dr("track event",(function(t){return function(e,t){if(e&&(!e||!w(e)&&e.eventToken))return gr(e.deduplicationId).then(Mn).then((function(n){jn({url:"/event",method:"POST",params:hr(e,n)},{timestamp:t})})).catch((function(e){e&&e.message&&q.error(e.message)}));q.error("You must provide event token in order to track event")}(e,t)}),{schedule:!0,stopBeforeInit:!0})},addGlobalCallbackParameters:function(e){Dr("add global callback parameters",(function(){return Bn(e,"callback")}))},addGlobalPartnerParameters:function(e){Dr("add global partner parameters",(function(){return Bn(e,"partner")}))},removeGlobalCallbackParameter:function(e){Dr("remove global callback parameter",(function(){return qn(e,"callback")}))},removeGlobalPartnerParameter:function(e){Dr("remove global partner parameter",(function(){return qn(e,"partner")}))},clearGlobalCallbackParameters:function(){Dr("remove all global callback parameters",(function(){return Kn("callback")}))},clearGlobalPartnerParameters:function(){Dr("remove all global partner parameters",(function(){return Kn("partner")}))},switchToOfflineMode:function(){Dr("set offline mode",(function(){return Tn(!0)}))},switchBackToOnlineMode:function(){Dr("set online mode",(function(){return Tn(!1)}))},stop:function(){pn()&&V.isInitialised()&&jr()},restart:function(){var e;("gdpr"===(e=Ke()||{}).reason?(q.log("Adjust SDK is disabled due to GDPR-Forget-Me request and it can not be re-enabled"),!1):e.reason?(q.log("Adjust SDK has been enabled"),Fe(null),!0):(q.log("Adjust SDK is already enabled"),!1))&&kr&&Er(kr)},gdprForgetMe:function(){var e=ir();e&&(e=pn("gdpr",!0))&&V.isInitialised()&&xr()},disableThirdPartySharing:function(){Dr("disable third-party sharing",Nr,{schedule:!0,stopBeforeInit:!1})},__testonly__:{destroy:Or}};t.default=Rr}]).default}));