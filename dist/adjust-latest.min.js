/*! For license information please see adjust-latest.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Adjust=t():e.Adjust=t()}(self,(()=>(()=>{var e={841:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(81),o=n.n(r),i=n(645),a=n.n(i),s=n(667),u=n.n(s),c=new URL(n(529),n.b),l=a()(o()),d=u()(c);l.push([e.id,".adjust-smart-banner__AEqYlWgPonspKfseFq2N{height:76px}@media(min-width: 428px){.adjust-smart-banner__AEqYlWgPonspKfseFq2N{height:0}}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq{position:fixed;left:0;right:0;z-index:10000000}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq.adjust-smart-banner__jOV7BvlxDT7ATfbLPh3j{top:0}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq.adjust-smart-banner__XmomYv1VVQYz0lEtn9Q2{bottom:0}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK{margin:0 auto;max-width:428px;background:#fff}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI{display:flex;align-items:center;padding:10px 8px 10px 4px}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__VFuxsD_KzqNSxQecFmao{width:32px;height:32px;border:none;background:url("+d+");background-repeat:no-repeat;background-position:center center;background-size:8px 8px,auto;cursor:pointer}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__hqvH8Y5fwbegVLKnoYv_{width:56px;height:56px;overflow:hidden;background-color:#6e7492;border-radius:8px}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__hqvH8Y5fwbegVLKnoYv_ .adjust-smart-banner__Ll9XMTDiX4Drgeydp0Oc{display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:#353a52;font-weight:bold;font-size:23px;font-family:ArialMt,Arial,sans-serif;line-height:32px;background-color:#e0e2ec}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__hqvH8Y5fwbegVLKnoYv_ .adjust-smart-banner__VYRfEif2Ph2_984rXQy8{width:100%}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__I8xX0C5dUcR53pY0aEys{flex:1 1 0%;min-height:0;min-width:0;margin:0 12px}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__JJLdp2l7YvnsUXudojWA{overflow:hidden;text-overflow:ellipsis}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI h4{margin:5px 0 8px;color:#353a52;font-family:Arial-BoldMT,ArialMt,Arial,sans-serif;font-size:12px;font-weight:bold;line-height:16px;white-space:nowrap}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI p{margin:8px 0 7px;color:#353a52;font-family:ArialMt,Arial,sans-serif;font-size:9px;line-height:11px;max-height:22px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__risKVvV3T0vjKiSTR9l0{color:#6e7492;background:#f9fafc;border:1px solid #cdd0e0;border-radius:4px;border-color:#6e7492;box-shadow:inset 0px -1px 0px 0px #e0e2ec;padding:4px 6.5px;display:inline-block;vertical-align:middle;text-align:center;font-family:ArialMt,Arial,sans-serif;font-size:12px;font-weight:500;line-height:16px;cursor:pointer;text-decoration:none}",""]),l.locals={bannerContainer:"adjust-smart-banner__AEqYlWgPonspKfseFq2N",banner:"adjust-smart-banner__NVk5vwju_4kdaKzGWJPq",stickyToTop:"adjust-smart-banner__jOV7BvlxDT7ATfbLPh3j",stickyToBottom:"adjust-smart-banner__XmomYv1VVQYz0lEtn9Q2",bannerBody:"adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK",content:"adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI",dismiss:"adjust-smart-banner__VFuxsD_KzqNSxQecFmao",appIcon:"adjust-smart-banner__hqvH8Y5fwbegVLKnoYv_",placeholder:"adjust-smart-banner__Ll9XMTDiX4Drgeydp0Oc",image:"adjust-smart-banner__VYRfEif2Ph2_984rXQy8",textContainer:"adjust-smart-banner__I8xX0C5dUcR53pY0aEys",bannerText:"adjust-smart-banner__JJLdp2l7YvnsUXudojWA",action:"adjust-smart-banner__risKVvV3T0vjKiSTR9l0"};const f=l},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{"use strict";e.exports=function(e){return e[1]}},702:function(e,t,n){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,s=function(e,t){O[o]=e,O[o+1]=t,2===(o+=2)&&(a?a(w):P())};function u(e){a=e}function c(e){s=e}var l="undefined"!=typeof window?window:void 0,d=l||{},f=d.MutationObserver||d.WebKitMutationObserver,p="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){return function(){return process.nextTick(w)}}function v(){return void 0!==i?function(){i(w)}:b()}function g(){var e=0,t=new f(w),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function y(){var e=new MessageChannel;return e.port1.onmessage=w,function(){return e.port2.postMessage(0)}}function b(){var e=setTimeout;return function(){return e(w,1)}}var O=new Array(1e3);function w(){for(var e=0;e<o;e+=2)(0,O[e])(O[e+1]),O[e]=void 0,O[e+1]=void 0;o=0}function j(){try{var e=Function("return this")().require("vertx");return i=e.runOnLoop||e.runOnContext,v()}catch(e){return b()}}var P=void 0;function k(e,t){var n=this,r=new this.constructor(D);void 0===r[S]&&J(r);var o=n._state;if(o){var i=arguments[o-1];s((function(){return V(o,r,i,n._result)}))}else U(n,r,e,t);return r}function _(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(D);return B(n,e),n}P=p?m():f?g():h?y():void 0===l?j():b();var S=Math.random().toString(36).substring(2);function D(){}var x=void 0,N=1,I=2;function E(){return new TypeError("You cannot resolve a promise with itself")}function A(){return new TypeError("A promises callback cannot return that same promise.")}function T(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function C(e,t,n){s((function(e){var r=!1,o=T(n,t,(function(n){r||(r=!0,t!==n?B(e,n):L(e,n))}),(function(t){r||(r=!0,M(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,M(e,o))}),e)}function R(e,t){t._state===N?L(e,t._result):t._state===I?M(e,t._result):U(t,void 0,(function(t){return B(e,t)}),(function(t){return M(e,t)}))}function K(e,n,r){n.constructor===e.constructor&&r===k&&n.constructor.resolve===_?R(e,n):void 0===r?L(e,n):t(r)?C(e,n,r):L(e,n)}function B(t,n){if(t===n)M(t,E());else if(e(n)){var r=void 0;try{r=n.then}catch(e){return void M(t,e)}K(t,n,r)}else L(t,n)}function q(e){e._onerror&&e._onerror(e._result),W(e)}function L(e,t){e._state===x&&(e._result=t,e._state=N,0!==e._subscribers.length&&s(W,e))}function M(e,t){e._state===x&&(e._state=I,e._result=t,s(q,e))}function U(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+N]=n,o[i+I]=r,0===i&&e._state&&s(W,e)}function W(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?V(n,r,o,i):o(i);e._subscribers.length=0}}function V(e,n,r,o){var i=t(r),a=void 0,s=void 0,u=!0;if(i){try{a=r(o)}catch(e){u=!1,s=e}if(n===a)return void M(n,A())}else a=o;n._state!==x||(i&&u?B(n,a):!1===u?M(n,s):e===N?L(n,a):e===I&&M(n,a))}function z(e,t){try{t((function(t){B(e,t)}),(function(t){M(e,t)}))}catch(t){M(e,t)}}var F=0;function Y(){return F++}function J(e){e[S]=F++,e._state=void 0,e._result=void 0,e._subscribers=[]}function G(){return new Error("Array Methods must be provided an Array")}var X=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(D),this.promise[S]||J(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?L(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&L(this.promise,this._result))):M(this.promise,G())}return e.prototype._enumerate=function(e){for(var t=0;this._state===x&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===_){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(e){a=!0,i=e}if(o===k&&e._state!==x)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===te){var s=new n(D);a?M(s,i):K(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===x&&(this._remaining--,e===I?M(r,n):this._result[t]=n),0===this._remaining&&L(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;U(e,void 0,(function(e){return n._settledAt(N,t,e)}),(function(e){return n._settledAt(I,t,e)}))},e}();function Q(e){return new X(this,e).promise}function H(e){var t=this;return r(e)?new t((function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function Z(e){var t=new this(D);return M(t,e),t}function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[S]=Y(),this._result=this._state=void 0,this._subscribers=[],D!==t&&("function"!=typeof t&&$(),this instanceof e?z(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();function ne(){var e=void 0;if(void 0!==n.g)e=n.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=te}return te.prototype.then=k,te.all=Q,te.race=H,te.resolve=_,te.reject=Z,te._setScheduler=u,te._setAsap=c,te._asap=s,te.polyfill=ne,te.Promise=te,te}()},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var u=e[s],c=r.base?u[0]+r.base:u[0],l=i[c]||0,d="".concat(c," ").concat(l);i[c]=l+1;var f=n(d),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=o(p,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var u=r(e,o),c=0;c<i.length;c++){var l=n(i[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=u}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},529:e=>{"use strict";e.exports="data:image/svg+xml;utf8,    <svg xmlns=%27http://www.w3.org/2000/svg%27 version=%271.1%27 preserveAspectRatio=%27none%27 viewBox=%270 0 16 16%27>      <path d=%27M1 0 L0 1 L15 16 L16 15 L1 0%27 fill=%27%236e7492%27/>      <path d=%27M16 1 L16 1 L1 16 L0 15 L15 0%27 fill=%27%236e7492%27/>    </svg>"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.b=document.baseURI||self.location.href,n.nc=void 0;var r={};return(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(r,{default:()=>Uo});var u=1e3,c=36e5,l=24*c,d="general",f="gdpr",p={TRANSACTION_ERROR:"XHR transaction failed due to an error",SERVER_MALFORMED_RESPONSE:"Response from server is malformed",SERVER_INTERNAL_ERROR:"Internal error occurred on the server",SERVER_CANNOT_PROCESS:"Server was not able to process the request, probably due to error coming from the client",NO_CONNECTION:"No internet connectivity",SKIP:"Skipping slower attempt",MISSING_URL:"Url is not provided"},h="noStorage",m="indexedDB",v="localStorage";function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?y(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(e){return!Object.keys(e).length&&e.constructor===Object}function w(e){return"object"===g(e)&&null!==e&&!(e instanceof Array)}function j(e){try{return w(JSON.parse(e))}catch(e){return!1}}function P(e,t,n){function r(e){return Array.isArray(t)?t.every((function(t){return e[t]===n[t]})):e[t]===n}for(var o=0;o<e.length;o+=1)if(r(e[o]))return o;return-1}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((function(t,n){return b(b({},t),{},e({},n.key,n.value))}),{})}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter((function(e){return-1!==t.indexOf(e)}))}function S(e,t){return new RegExp("\\/".concat(t,"(\\/.*|\\?.*){0,1}$")).test(e)}function D(t,n){var r=a(n,2),o=r[0],i=r[1];return b(b({},t),{},e({},o,i))}function x(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function N(e){return Object.keys(e).map((function(t){return e[t]}))}function I(e){return w(e)?!O(e):!!e||0===e}const E={namespace:"adjust-sdk",version:"5.3.1",env:"production"};var A,T="error",C="warning",R="info",K="verbose",B=(e(A={},"none",-1),e(A,T,0),e(A,C,1),e(A,R,2),e(A,K,3),A),q={log:"  ",info:" ",warn:" ",error:""},L={development:K,production:T,test:K},M=W(),U="";function W(){return L[E.env]||T}function V(e,t){var n;if(!(B[M]<B[t])){for(var r=(new Date).toISOString(),o=q[e],i=["[".concat(E.namespace,"]"),r,"".concat(e.toUpperCase(),":").concat(o)],a=U?document.querySelector(U):null,s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];(n=console)[e].apply(n,i.concat(u)),a&&(a.textContent+="".concat(i.join(" ")," ").concat(u.map((function(e){return w(e)?JSON.stringify(e):e})).join(" "),"\n"),a.scrollTop=a.scrollHeight)}}function z(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];V.apply(void 0,[e,t].concat(r))}}const F={setLogLevel:function(e,t){e&&-1===Object.keys(B).indexOf(e)?V("error","error","You must set one of the available log levels: verbose, info, warning, error or none"):(M=e||W(),U=t||U,V("info",e,"Log level set to ".concat(M)))},log:z("log",K),info:z("info",R),warn:z("warn",C),error:z("error",T)};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var G={},X={},Q=["appToken","environment"],H=[].concat(Q,["defaultTracker","externalDeviceId"]),Z=["urlStrategy","customUrl","eventDeduplicationListLimit","namespace"];function $(e){var t=Q.filter((function(t){return!e[t]}));return!!t.length&&(F.error("You must define ".concat(function(e){if(!e.length)return"";if(1===e.length)return"".concat(e[0]);var t=e.length-1,n=e.slice(0,t).join(", ");return"".concat(n," and ").concat(e[t])}(t))),!0)}var ee=J(J({},{sessionWindow:18e5,sessionTimerWindow:6e4,requestValidityWindow:28*l}),{},{set:function(e){if(!$(e)){var t=[].concat(s(H),Z).filter((function(t){return!!e[t]})).map((function(t){return[t,e[t]]}));G=t.filter((function(e){var t=a(e,1)[0];return-1!==H.indexOf(t)})).reduce(D,{}),X=t.filter((function(e){var t=a(e,1)[0];return-1!==Z.indexOf(t)})).reduce(D,{})}},getBaseParams:function(){return J({},G)},getCustomConfig:function(){return J({},X)},isInitialised:function(){return Q.reduce((function(e,t){return e&&!!G[t]}),!0)},hasMissing:$,destroy:function(){G={},X={}}});const te=ee;var ne,re,oe,ie,ae;!function(e){e.Queue="queue",e.ActivityState="activityState",e.GlobalParams="globalParams",e.EventDeduplication="eventDeduplication"}(re||(re={})),function(e){e.Preferences="preferences"}(oe||(oe={})),function(e){e.Queue="q",e.ActivityState="as",e.GlobalParams="gp",e.EventDeduplication="ed"}(ie||(ie={})),function(e){e.Preferences="p"}(ae||(ae={}));var se={fields:{thirdPartySharingDisabled:{key:"td",keys:{reason:{key:"r",values:e({},d,1)},pending:{key:"p",values:{false:0,true:1}}}},sdkDisabled:{key:"sd",keys:{reason:{key:"r",values:(ne={},e(ne,d,1),e(ne,f,2),ne)},pending:{key:"p",values:{false:0,true:1}}}}}};function ue(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"values")}function ce(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"keys")}function le(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"composite")}function de(e){return!!e&&"string"!=typeof e}const fe={queue:{name:ie.Queue,scheme:{keyPath:"timestamp",autoIncrement:!1,fields:{url:{key:"u",values:{"/session":1,"/event":2,"/gdpr_forget_device":3,"/sdk_click":4,"/disable_third_party_sharing":5}},method:{key:"m",values:{GET:1,POST:2,PUT:3,DELETE:4}},timestamp:"t",createdAt:"ca",params:{key:"p",keys:{timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastInterval:"li",eventToken:"et",revenue:"re",currency:"cu",callbackParams:"cp",partnerParams:"pp"}}}}},activityState:{name:ie.ActivityState,scheme:{keyPath:"uuid",autoIncrement:!1,fields:{uuid:{key:"u",values:{unknown:"-"}},timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastActive:"la",lastInterval:"li",installed:{key:"in",values:{false:0,true:1}},attribution:{key:"at",keys:{adid:"a",tracker_token:"tt",tracker_name:"tn",network:"nt",campaign:"cm",adgroup:"ag",creative:"cr",click_label:"cl",state:{key:"st",values:{installed:1,reattributed:2}}}}}}},globalParams:{name:ie.GlobalParams,scheme:{keyPath:"keyType",autoIncrement:!1,index:"type",fields:{keyType:{key:"kt",composite:["key","type"]},key:"k",value:"v",type:{key:"t",values:{callback:1,partner:2}}}}},eventDeduplication:{name:ie.EventDeduplication,scheme:{keyPath:"internalId",autoIncrement:!0,fields:{internalId:"ii",id:"i"}}},preferences:{name:ae.Preferences,scheme:se,permanent:!0}};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?pe(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function me(e){try{return JSON.parse(e)}catch(t){return e}}function ve(e,t,n){var r,o=ue(n)?{values:(r=n.values,x(r).map((function(e){var t=a(e,2),n=t[0];return[t[1],me(n)]})).reduce(D,{}))}:{},i=ce(n)?{keys:ge(e,n.keys)}:{},s=le(n)?{composite:n.composite.map((function(t){return ye(e,t)}))}:{};return he(he(he({key:t},o),i),s)}function ge(e,t){return x(t).map((function(t){var n=a(t,2),r=n[0],o=n[1];return de(o)?[o.key,ve(e,r,o)]:[o,r]})).reduce(D,{})}function ye(e,t){if(t){var n=fe[e].scheme.fields[t];return de(n)?n.key:n||t}}var be=x(fe).map((function(e){var t=a(e,2),n=t[0],r=t[1];return[n,{keyPath:r.scheme.keyPath,autoIncrement:r.scheme.autoIncrement,index:r.scheme.index,fields:r.scheme.fields}]})).reduce(D,{}),Oe=x(be).map((function(e){var t=a(e,2),n=t[0],r=t[1];return[n,{keyPath:ye(n,r.keyPath),autoIncrement:r.autoIncrement,index:ye(n,r.index),fields:ge(n,r.fields)}]})).reduce(D,{}),we=x(fe).reduce((function(e,t){var n=a(t,2)[1];return e.concat(n.scheme.fields)}),[]).map((function(e){return N(e).filter(ue).map((function(e){return x(e.values)})).reduce((function(e,t){return e.concat(t)}),[])})).reduce((function(e,t){return e.concat(t)}),[]).reduce(D,{}),je=x(fe).map((function(e){var t=a(e,2),n=t[0],r=t[1];return[n,{name:r.name,permanent:r.permanent}]})).reduce(D,{});const Pe={left:be,right:Oe,values:we,storeNames:{left:je,right:(ke=je,_e=x(ke).map((function(e){var t=a(e,2),n=t[0],r=t[1],o={name:n,permanent:r.permanent};return[r.name,o]})),_e.reduce(D,{}))}};var ke,_e,Se,De;"undefined"==typeof Promise&&n(702).Promise;function xe(e){return w(e)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ne(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ee(e,t){return e&&void 0!==e[t]?e[t]:t}function Ae(t,n,r,o){if(r){var i=o||Pe[n][Ke(t,De.right)].fields;return x(r).map((function(e){var r=a(e,2),o=r[0],s=r[1];return function(e,t,n,r,o){if(!o)return[n,r];var i=de(o)?o.key:o;return xe(r)?[i,Ae(e,t,r,ce(o)?o.keys:null)]:[i,Ee(ue(o)?o.values:null,r)]}(t,n,o,s,i[o])})).reduce((function(t,n){var r=a(n,2),o=r[0],i=r[1];return Ie(Ie({},t),{},e({},o,i))}),{})}}function Te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.map((function(n){return Ae(e,t,n)}))}function Ce(e,t,n){var r=Pe[t][Ke(e,De.right)],o=r.fields[r.keyPath],i=n instanceof Array?n.slice():[n],a=(le(o)?o.composite:[r.keyPath]).map((function(e,t){var n=r.fields[e];return Ee(ue(n)?n.values:null,i[t])}));return 1===a.length?a[0]:a}function Re(e){return Pe.values[e]||e}function Ke(e,t){return(Pe.storeNames[t][e]||{}).name||e}function Be(e,t){return{name:t.name,message:t.message.replace('"'.concat(e,'"'),Ke(e,De.right))}}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t,n){return t&&Le(e.prototype,t),n&&Le(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ue(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e+"",r=1;r<=t;r+=1)e<Math.pow(10,r)&&(n="0".concat(n));return n}function We(e){var t=e?new Date(e):new Date,n=function(e){var t=Ue(e.getDate()),n=Ue(e.getMonth()+1);return[e.getFullYear(),n,t].join("-")}(t),r=function(e){var t=Ue(e.getHours(),1),n=Ue(e.getMinutes()),r=Ue(e.getSeconds()),o=Ue(e.getMilliseconds(),2);return[t,n,r].join(":")+"."+o}(t),o=function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Ue(Math.floor(Math.abs(t)/60))+Ue(Math.abs(t)%60)}(t);return"".concat(n,"T").concat(r,"Z").concat(o)}function Ve(e,t){return isNaN(e)||isNaN(t)?0:Math.abs(t-e)}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ze(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}!function(e){e.LowerBound="lowerBound",e.UpperBound="upperBound"}(Se||(Se={})),function(e){e.right="right",e.left="left"}(De||(De={}));var Ye={},Je=!1,Ge=!1;function Xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ye=Je?Fe({},e):{}}function Qe(){Je&&(Ye.lastInterval=function(){var e=Ye.lastActive;if(e)return Math.round(Ve(e,Date.now())/u);return-1}(),Ye.lastActive=Date.now())}function He(e){Ye=Fe(Fe({},Ye),e)}function Ze(){Ge=!0}function $e(){var e=Ye.lastActive;return Math.round(Ve(e,Date.now())/u)}function et(){return(Ye.timeSpent||0)+(Ge?$e():0)}function tt(){var e=Ve(Ye.lastActive,Date.now())<te.sessionWindow,t=Ge||!Ge&&e;return(Ye.sessionLength||0)+(t?$e():0)}function nt(){Je&&(He({timeSpent:et(),sessionLength:tt()}),Qe())}const rt={get current(){return Je?Fe({},Ye):{}},set current(e){Xe(e)},init:function(e){Je=!0,Xe(e)},isStarted:function(){return Je},toForeground:Ze,toBackground:function(){Ge=!1},initParams:function(){nt(),Ze()},getParams:function(e){if(!Je)return null;var t=Ye.lastInterval>=0?Ye.lastInterval:0,n={timeSpent:Ye.timeSpent||0,sessionLength:Ye.sessionLength||0,sessionCount:Ye.sessionCount||1,lastInterval:t||0};return e&&S(e,"event")&&(n.eventCount=Ye.eventCount),n},updateParams:function(e,t){if(Je){var n={};n.timeSpent=et(),n.sessionLength=tt(),S(e,"session")&&(n.sessionCount=(Ye.sessionCount||0)+1),S(e,"event")&&(n.eventCount=(Ye.eventCount||0)+1),He(n),t||Qe()}},updateInstalled:function(){Je&&(Ye.installed||He({installed:!0}))},updateSessionOffset:nt,updateSessionLength:function(){Je&&(He({sessionLength:tt()}),Qe())},resetSessionOffset:function(){Je&&He({timeSpent:0,sessionLength:0})},updateLastActive:Qe,destroy:function(){Ye={},Je=!1,Ge=!1},getAttribution:function(){return Je?Ye.attribution?Ye.attribution:(F.log("No attribution data yet"),null):null},getWebUUID:function(){return Je?Ye.uuid:null}};var ot={},it=[];function at(e,t){var n="id"+Math.random().toString(36).substr(2,16),r={id:n,cb:t};return ot[e]||(ot[e]=[]),ot[e].push(r),n}function st(e,t){ot[e]&&ot[e].forEach((function(n){"function"==typeof n.cb&&it.push(setTimeout((function(){return n.cb(e,t)})))}))}const ut=new(function(){function t(){var n=this;qe(this,t),e(this,"defaultName",E.namespace),e(this,"storageName",this.defaultName),e(this,"storeNames",Pe.storeNames.left),e(this,"storesMap",void 0),this.storesMap={};var r=this.read.bind(this),o=this.write.bind(this);N(this.storeNames).forEach((function(e){var t=e.name;Object.defineProperty(n.storesMap,t,{get:function(){return r(t)},set:function(e){o(t,e)}})})),Object.freeze(this.storesMap)}return Me(t,[{key:"read",value:function(e){var t=localStorage.getItem("".concat(this.storageName,".").concat(e)),n=t?JSON.parse(t):null;return e===ae.Preferences&&n?Ae(ae.Preferences,De.right,n):n}},{key:"write",value:function(e,t){t?localStorage.setItem("".concat(this.storageName,".").concat(e),JSON.stringify(t instanceof Array?t:Ae(ae.Preferences,De.left,t))):localStorage.removeItem("".concat(this.storageName,".").concat(e))}},{key:"clear",value:function(){this.deleteData()}},{key:"deleteData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];N(this.storeNames).forEach((function(n){!t&&n.permanent||localStorage.removeItem("".concat(e.storageName,".").concat(n.name))}))}},{key:"setCustomName",value:function(e){var t=this;if(e&&e.length){var n="".concat(E.namespace,"-").concat(e);N(this.storeNames).forEach((function(e){var r=e.name,o=localStorage.getItem("".concat(t.storageName,".").concat(r));o&&localStorage.setItem("".concat(n,".").concat(r),o)})),this.deleteData(!0),this.storageName=n}}},{key:"stores",get:function(){return this.storesMap}}]),t}());function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ct(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var dt=fe.preferences.name,ft=pt();function pt(){return ft||ht(),ft?lt({},ft):null}function ht(){ft=ut.stores[dt]}function mt(){var e=pt();return e?e.sdkDisabled:null}function vt(e){var t=e?lt({},e):null;ut.stores[dt]=lt(lt({},pt()),{},{sdkDisabled:t}),ht()}function gt(){var e=pt();return e?e.thirdPartySharingDisabled:null}function yt(){var e=ut.stores[dt]||{},t=(ft||{}).sdkDisabled||null;e.sdkDisabled&&!t&&st("sdk:shutdown"),ht()}function bt(){ut.stores[dt]||(ut.stores[dt]=lt({},ft))}function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wt,jt,Pt="undefined"==typeof Promise?n(702).Promise:Promise;!function(e){e.add="add",e.put="put",e.get="get",e.list="list",e.clear="clear",e.delete="delete"}(wt||(wt={})),function(e){e.readonly="readonly",e.readwrite="readwrite"}(jt||(jt={}));var kt=function(){function t(){qe(this,t),e(this,"dbDefaultName",E.namespace),e(this,"dbName",this.dbDefaultName),e(this,"dbVersion",1),e(this,"idbFactory",void 0),e(this,"indexedDbConnection",null),e(this,"notSupportedError",{name:"IDBNotSupported",message:"IndexedDB is not supported"}),e(this,"databaseOpenError",{name:"CannotOpenDatabaseError",message:"Cannot open a database"}),e(this,"noConnectionError",{name:"NoDatabaseConnection",message:"Cannot open a transaction"});var n=t.getIndexedDB();if(!n)throw this.notSupportedError;this.idbFactory=n}return Me(t,[{key:"setCustomName",value:function(e){return e&&e.length>0?(this.dbName="".concat(E.namespace,"-").concat(e),this.migrateDb(this.dbDefaultName,this.dbName)):Pt.resolve()}},{key:"openDatabase",value:function(e,n,r){var o=this;return t.isSupported().then((function(t){return t?new Pt((function(t,i){var a=o.idbFactory.open(e,r);n&&(a.onupgradeneeded=function(e){return n(e,i)}),a.onsuccess=function(e){var n=e.target.result;n?t(n):i(o.databaseOpenError)},a.onerror=i})):Pt.reject(o.notSupportedError)}))}},{key:"databaseExists",value:function(e){var t=this;return new Pt((function(n){var r=!0;t.openDatabase(e,(function(){r=!1})).then((function(n){if(n.close(),!r)return t.deleteDatabaseByName(e)})).then((function(){return n(r)}))}))}},{key:"cloneData",value:function(e,t){var n=this;return N(Pe.storeNames.left).map((function(e){return e.name})).filter((function(e){return"p"!==e})).map((function(r){return function(){return o=r,i=n.indexedDbConnection,n.indexedDbConnection=e,n.getAll(o).then((function(e){if(n.indexedDbConnection=t,!(e.length<1))return n.addBulk(o,e,!0)})).then((function(){n.indexedDbConnection=i}));var o,i}})).reduce((function(e,t){return e.then(t)}),Pt.resolve())}},{key:"migrateDb",value:function(e,t){var n=this;return this.databaseExists(e).then((function(r){return r?Pt.all([n.openDatabase(e,n.handleUpgradeNeeded,n.dbVersion),n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion)]).then((function(t){var r=a(t,2),o=r[0],i=r[1];return n.cloneData(o,i).then((function(){return n.indexedDbConnection=i,o.close(),n.deleteDatabaseByName(e)}))})).then((function(){return F.info("Database migration finished")})):n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion).then((function(e){n.indexedDbConnection=e}))}))}},{key:"handleUpgradeNeeded",value:function(e,t){var n=e.target.result;e.target.transaction.onerror=t,e.target.transaction.onabort=t;var r=Pe.storeNames.left,o=rt.current||{},i=o&&!O(o);x(r).filter((function(e){return!a(e,2)[1].permanent})).forEach((function(e){var t=a(e,2),r=t[0],s=t[1].name,u=Pe.right[r],c=n.createObjectStore(s,{keyPath:u.keyPath,autoIncrement:u.autoIncrement||!1});if(u.index&&c.createIndex("".concat(u.index,"Index"),u.index),s===ie.ActivityState&&i)return c.add(Ae(r,De.left,o)),void F.info("Activity state has been recovered");var l=ut.stores[s];l&&(l.forEach((function(e){return c.add(e)})),F.info("Migration from localStorage done for ".concat(r," store")))})),bt(),ut.clear()}},{key:"open",value:function(){var e=this;return this.indexedDbConnection?Pt.resolve({success:!0}):this.openDatabase(this.dbName,this.handleUpgradeNeeded,this.dbVersion).then((function(t){return e.indexedDbConnection=t,e.indexedDbConnection.onclose=function(){return e.destroy},{success:!0}}))}},{key:"getTransactionStore",value:function(e,t,n){var r,o=e.storeName,i=e.mode,a=n.transaction([o],i),s=a.objectStore(o),u=Pe.right[Ke(o,De.right)];return u.index&&(r=s.index("".concat(u.index,"Index"))),a.onerror=t,a.onabort=t,{transaction:a,store:s,index:r,options:u}}},{key:"overrideError",value:function(e,t){var n=t.target.error;return e({name:n.name,message:n.message})}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return le(t)?t.composite:null}},{key:"targetIsObject",value:function(e){return w(e)}},{key:"prepareTarget",value:function(t,n,r){if(r===wt.clear||!n)return null;var o=this.getCompositeKeys(t);return-1!==[wt.add,wt.put].indexOf(r)?this.targetIsObject(n)?o?function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ot(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}(e({},t.keyPath,o.map((function(e){return n[e]})).join("")),n):n:null:n instanceof Array?n.join(""):n}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n&&this.targetIsObject(t)?n.map((function(e){return t[e]})):null}},{key:"initRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=void 0===r?null:r,i=e.action,a=e.mode,s=void 0===a?jt.readonly:a;return this.open().then((function(){return new Pt((function(e,r){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:s},r,t.indexedDbConnection),u=a.store,c=a.options,l=u[i](t.prepareTarget(c,o,i)),d=t.prepareResult(c,o);l.onsuccess=function(){i!==wt.get||l.result?e(d||l.result||o):r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(n,'" store')})},l.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)}))}))}},{key:"initBulkRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=e.action,i=e.mode,a=void 0===i?jt.readwrite:i;return!r||r&&!r.length?Pt.reject({name:"NoTargetDefined",message:"No array provided to perform ".concat(o,' bulk operation into "').concat(n,'" store')}):this.open().then((function(){return new Pt((function(e,i){if(t.indexedDbConnection){var s=t.getTransactionStore({storeName:n,mode:a},i,t.indexedDbConnection),u=s.transaction,c=s.store,l=s.options,d=new Array,f=r[0];u.oncomplete=function(){return e(d)};!function e(n){n.onerror=function(e){return t.overrideError(i,e)},n.onsuccess=function(){d.push(t.prepareResult(l,f)||n.result),f=r[d.length],d.length<r.length&&e(c[o](t.prepareTarget(l,f,o)))}}(c[o](t.prepareTarget(l,f,o)))}else i(t.noConnectionError)}))}))}},{key:"openCursor",value:function(e){var t=this,n=e.storeName,r=e.action,o=e.range,i=void 0===o?null:o,a=e.firstOnly,s=void 0!==a&&a,u=e.mode,c=void 0===u?jt.readonly:u;return this.open().then((function(){return new Pt((function(e,o){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:c},o,t.indexedDbConnection),u=a.transaction,l=a.store,d=a.index,f=a.options,p=(d||l).openCursor(i),h=new Array;u.oncomplete=function(){return e(h)},p.onsuccess=function(e){var n=e.target.result;n&&(r===wt.delete?(n.delete(),h.push(t.prepareResult(f,n.value)||n.value[f.keyPath])):h.push(n.value),s||n.continue())},p.onerror=function(e){return t.overrideError(o,e)}}else o(t.noConnectionError)}))}))}},{key:"deleteDatabaseByName",value:function(e){var t=this;return new Pt((function(n,r){var o=t.idbFactory.deleteDatabase(e);o.onerror=function(e){return t.overrideError(r,e)},o.onsuccess=function(){return n()},o.onblocked=function(e){return r(e.target)}}))}},{key:"getAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.openCursor({storeName:e,action:wt.list,firstOnly:t})}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then((function(e){return e.length?e[0]:void 0}))}},{key:"getItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:wt.get})}},{key:"filterBy",value:function(e,t){var n=IDBKeyRange.only(t);return this.openCursor({storeName:e,action:wt.list,range:n})}},{key:"addItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:wt.add,mode:jt.readwrite})}},{key:"addBulk",value:function(e,t,n){return this.initBulkRequest({storeName:e,target:t,action:n?wt.put:wt.add,mode:jt.readwrite})}},{key:"updateItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:wt.put,mode:jt.readwrite})}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:wt.delete,mode:jt.readwrite})}},{key:"deleteBulk",value:function(e,t,n){var r=n?IDBKeyRange[n](t):IDBKeyRange.only(t);return this.openCursor({storeName:e,action:wt.delete,range:r,mode:jt.readwrite})}},{key:"trimItems",value:function(e,t){var n=this,r=Pe.right[Ke(e,De.right)];return this.getAll(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?n.deleteBulk(e,t[r.keyPath],Se.UpperBound):[]}))}},{key:"count",value:function(e){var t=this;return this.open().then((function(){return new Pt((function(n,r){if(t.indexedDbConnection){var o=t.getTransactionStore({storeName:e,mode:jt.readonly},r,t.indexedDbConnection).store.count();o.onsuccess=function(){return n(o.result)},o.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)}))}))}},{key:"clear",value:function(e){return this.initRequest({storeName:e,action:wt.clear,mode:jt.readwrite})}},{key:"destroy",value:function(){this.indexedDbConnection&&this.indexedDbConnection.close(),this.indexedDbConnection=null}},{key:"deleteDatabase",value:function(){return this.destroy(),this.deleteDatabaseByName(this.dbName)}}],[{key:"tryOpen",value:function(e){return new Pt((function(n){try{var r=e.open(t.dbValidationName);r.onsuccess=function(){r.result.close(),e.deleteDatabase(t.dbValidationName),n(!0)},r.onerror=function(){return n(!1)}}catch(e){n(!1)}}))}},{key:"isSupported",value:function(){return t.isSupportedPromise||(t.isSupportedPromise=new Pt((function(e){var n=t.getIndexedDB(),r=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!n||r?(F.warn("IndexedDB is not supported in this browser"),e(!1)):e(t.tryOpen(n).then((function(e){return e||F.warn("IndexedDB is not supported in this browser"),e})))}))),t.isSupportedPromise}},{key:"getIndexedDB",value:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB}}]),t}();function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_t(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e(kt,"dbValidationName","validate-db-openable"),e(kt,"isSupportedPromise",null);var Dt="undefined"==typeof Promise?n(702).Promise:Promise,xt=function(){function t(){qe(this,t)}return Me(t,[{key:"open",value:function(){return t.isSupported().then((function(e){if(!e)return{status:"error",error:{name:"LSNotSupported",message:"LocalStorage is not supported"}};var t=Pe.storeNames.left,n=rt.current||{},r=n&&!O(n);return x(t).filter((function(e){return!a(e,2)[1].permanent})).forEach((function(e){var t=a(e,2),o=t[0],i=t[1].name;i!==ie.ActivityState||ut.stores[i]?ut.stores[i]||(ut.stores[i]=[]):ut.stores[i]=r?[Ae(o,De.left,n)]:[]})),bt(),{status:"success"}}))}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return le(t)?t.composite:null}},{key:"getKeys",value:function(e){var t=Ke(e,De.right),n=Pe.right[t];return this.getCompositeKeys(n)||[n.keyPath]}},{key:"nextIndex",value:function(e){return"number"==typeof e?e+1:void 0}},{key:"initRequest",value:function(e,t){var n=this,r=e.storeName,o=e.id,i=e.item,a=Pe.right[Ke(r,De.right)];return this.open().then((function(e){return"error"===e.status?Dt.reject(e.error):new Dt((function(e,s){var u,c=ut.stores[r],l=n.getKeys(r),d=(c[c.length-1]||{})[a.keyPath]||0;if(o){var f=Array.isArray(o)?o.slice():[o];u=l.map((function(e,t){return[e,f[t]]})).reduce(D,{})}else u=St({},i);var p=u?P(c,l,u):0;return t(e,s,{keys:l,items:c,index:p,options:a,lastId:d})}))}))}},{key:"sort",value:function(e,t,n){var r=s(e),o=t.slice().reverse();return r.sort((function(e,t){return o.reduce((function(r,o){return r||function(e,t,r){var o=n?n===e[r]:e[r]<t[r],i=n?n>e[r]:e[r]>t[r];return o?-1:i?1:0}(e,t,o)}),0)}))}},{key:"prepareTarget",value:function(t,n,r){var o=this.getCompositeKeys(t);return o?St(e({},t.keyPath,o.map((function(e){return n[e]})).join("")),n):t.autoIncrement&&r?St(e({},t.keyPath,r),n):St({},n)}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n?n.map((function(e){return t[e]})).filter((function(e){return!xe(e)})):t[e.keyPath]}},{key:"getAll",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.open().then((function(r){return"error"===r.status?Dt.reject(r.error):new Dt((function(r,o){var i=ut.stores[e];i instanceof Array?r(n?[i[0]]:t.sort(i,t.getKeys(e))):o({name:"NotFoundError",message:"No objectStore named ".concat(e," in this database")})}))}))}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then((function(e){return e.length?e[0]:void 0}))}},{key:"getItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,id:t},(function(t,r,o){var i=o.items,a=o.index,s=o.options;-1===a?r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(e,'" store')}):t(n.prepareTarget(s,i[a]))}))}},{key:"filterBy",value:function(e,t){return this.getAll(e).then((function(n){return n.filter((function(n){var r=Pe.right[Ke(e,De.right)];return(r.index&&n[r.index])===t}))}))}},{key:"addItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},(function(r,o,i){var a=i.items,s=i.index,u=i.options,c=i.lastId;-1!==s?o({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing item into "'.concat(e,'" store')}):(a.push(n.prepareTarget(u,t,n.nextIndex(c))),ut.stores[e]=a,r(n.prepareResult(u,t)))}))}},{key:"addBulk",value:function(e,t,n){var r=this;return this.initRequest({storeName:e},(function(o,i,a){var u=a.keys,c=a.items,l=a.options,d=a.lastId;if(!t||t&&!t.length)i({name:"NoTargetDefined",message:'No array provided to perform add bulk operation into "'.concat(e,'" store')});else{var f=d,p=t.map((function(e){return r.prepareTarget(l,e,f=r.nextIndex(f))})),h=p.filter((function(e){return-1!==P(c,u,e)})).map((function(e){return e[l.keyPath]})),m=n?c.filter((function(e){return-1===h.indexOf(e[l.keyPath])})):s(c);if(h.length&&!n)i({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing items into "'.concat(e,'" store')});else ut.stores[e]=r.sort([].concat(s(m),s(p)),u),o(t.map((function(e){return r.prepareResult(l,e)})))}}))}},{key:"updateItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},(function(r,o,i){var a=i.items,s=i.index,u=i.options,c=i.lastId,l=-1===s?n.nextIndex(c):void 0,d=n.prepareTarget(u,t,l);-1===s?a.push(d):a.splice(s,1,d),ut.stores[e]=a,r(n.prepareResult(u,t))}))}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,id:t},(function(n,r,o){var i=o.items,a=o.index;-1!==a&&(i.splice(a,1),ut.stores[e]=i),n(t)}))}},{key:"findMax",value:function(e,t,n){if(!e.length)return-1;for(var r={index:-1,value:"string"==typeof n?"":0},o=0;o<e.length;o+=1){if(!(e[o][t]<=n))return r.index;e[o][t]>=r.value&&(r={value:e[o][t],index:o})}return r.index}},{key:"deleteBulk",value:function(e,t,n){var r=this;return this.getAll(e).then((function(o){var i=r.getKeys(e),a=Pe.right[Ke(e,De.right)].index||i[0],s=n?null:t,u=r.sort(o,i,s),c=r.findMax(u,a,t);if(-1===c)return[];var l=n===Se.LowerBound?c:0,d=n&&n!==Se.UpperBound?u.length:c+1,f=u.splice(l,d).map((function(e){return 1===i.length?e[a]:i.map((function(t){return e[t]}))}));return ut.stores[e]=u,f}))}},{key:"trimItems",value:function(e,t){var n=this,r=Ke(e,De.right),o=Pe.right[r];return this.getAll(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?n.deleteBulk(e,t[o.keyPath],Se.UpperBound):[]}))}},{key:"count",value:function(e){return this.open().then((function(t){if("error"===t.status)return Dt.reject(t.error);var n=ut.stores[e];return Dt.resolve(n instanceof Array?n.length:1)}))}},{key:"clear",value:function(e){return this.open().then((function(t){return"error"===t.status?Dt.reject(t.error):new Dt((function(t){ut.stores[e]=[],t()}))}))}},{key:"destroy",value:function(){}},{key:"deleteDatabase",value:function(){}}],[{key:"isSupported",value:function(){if(t.isSupportedPromise)return t.isSupportedPromise;var e=(new Date).toString(),n=window.localStorage;return t.isSupportedPromise=new Dt((function(t){n.setItem(e,e);var r=n.getItem(e)===e;n.removeItem(e),t(!(!r||!n))})).catch((function(){return F.warn("LocalStorage is not supported in this browser"),Dt.resolve(!1)})),t.isSupportedPromise}}]),t}();function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e(xt,"isSupportedPromise",null);var It,Et="undefined"==typeof Promise?n(702).Promise:Promise;!function(e){e[e.noStorage=h]="noStorage",e[e.indexedDB=m]="indexedDB",e[e.localStorage=v]="localStorage"}(It||(It={}));var At,Tt={getAll:function(e,t,n){return e.getAll(t,n).then((function(e){return Te(t,De.right,e)}))},getFirst:function(e,t){return e.getFirst(t).then((function(e){return Ae(t,De.right,e)}))},getItem:function(e,t,n){return e.getItem(t,Ce(t,De.left,n)).then((function(e){return Ae(t,De.right,e)})).catch((function(e){return Et.reject(Be(t,e))}))},filterBy:function(e,t,n){return e.filterBy(t,Re(n)).then((function(e){return Te(t,De.right,e)}))},addItem:function(e,t,n){var r=Ae(t,De.left,n);return e.addItem(t,r).then((function(e){return Ce(t,De.right,e)})).catch((function(e){return Et.reject(Be(t,e))}))},addBulk:function(e,t,n,r){var o=Te(t,De.left,n);return e.addBulk(t,o,r).then((function(e){return e.map((function(e){return Ce(t,De.right,e)}))})).catch((function(e){return Et.reject(Be(t,e))}))},updateItem:function(e,t,n){var r=Ae(t,De.left,n);return e.updateItem(t,r).then((function(e){return Ce(t,De.right,e)}))},deleteItem:function(e,t,n){return e.deleteItem(t,Ce(t,De.left,n)).then((function(e){return Ce(t,De.right,e)}))},deleteBulk:function(e,t,n,r){return e.deleteBulk(t,Re(n),r).then((function(e){return e.map((function(e){return Ce(t,De.right,e)}))}))},trimItems:function(e,t,n){return e.trimItems(t,n)},count:function(e,t){return e.count(t)},clear:function(e,t){return e.clear(t)},destroy:function(e){return e.destroy()},deleteDatabase:function(e){return e.deleteDatabase()}};var Ct=null;function Rt(e){var t=null;return null!==Ct?Ct:Ct=Et.all([kt.isSupported(),xt.isSupported()]).then((function(n){var r=a(n,2),o=r[0],i=r[1];if(ut.setCustomName(e),o){At=It.indexedDB;var s=new kt;return s.setCustomName(e).then((function(){return t=s}))}return i?(At=It.localStorage,t=new xt,Et.resolve(t)):(F.error("There is no storage available, app will run with minimum set of features"),At=It.noStorage,t=null,Et.resolve(t))})).then((function(){return{type:At,storage:t}}))}const Kt=function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Nt(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({init:Rt,getType:function(){return At}},(Bt=x(Tt).map((function(e){var t=a(e,2),n=t[0],r=t[1];return[n,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return Rt().then((function(t){var o=t.storage;if(o)return r.call.apply(r,[null,o,Ke(e,De.left)].concat(n))}))}]})),Bt.reduce(D,{})));var Bt;function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?qt(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}"undefined"==typeof Promise&&n(702).Promise;function Mt(){return Kt.getAll("queue").then((function(e){return{queueSize:e.length}})).then((function(e){return Lt(Lt(Lt(Lt(Lt(Lt(Lt(Lt({},{createdAt:We()}),{sentAt:We()}),{webUuid:rt.current.uuid}),(n=navigator,r=void 0!==n.doNotTrack,o=void 0!==window.doNotTrack,i=void 0!==n.msDoNotTrack,s=r?n.doNotTrack:o?window.doNotTrack:i?n.msDoNotTrack:null,0===parseInt(s,10)||"no"===s?{trackingEnabled:!0}:1===parseInt(s,10)||"yes"===s?{trackingEnabled:!1}:null)),{platform:"web"}),function(){var e=navigator,t=a((e.language||e.userLanguage||"en").split("-"),2),n=t[0],r=t[1];return{language:n,country:r?""+r.toLowerCase():void 0}}()),(t=navigator.userAgent||navigator.vendor,{machineType:"Win32"!==navigator.platform||-1===t.indexOf("WOW64")&&-1===t.indexOf("Win64")?navigator.platform:"Win64"})),e);var t,n,r,o,i,s}))}function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ut(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Vt="undefined"==typeof Promise?n(702).Promise:Promise;function zt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{status:"error",action:n?"CONTINUE":"RETRY",response:j(e.responseText)?JSON.parse(e.responseText):e.responseText,message:p[t],code:t}}function Ft(e,t){var n=e.slice(0,e.length-t.length-1).split("").reduce((function(e){return e.concat(" ")}),"");return"".concat(t).concat(n,":")}function Yt(e,t){var n="REQUEST PARAMETERS:",r=function(e){return e.replace(/([A-Z])/g,(function(e){return"_".concat(e.toLowerCase())}))},o=x(Wt(Wt(Wt({},te.getBaseParams()),t),e)).map((function(e){var t=a(e,2),n=t[0],o=t[1];return[r(n),o]}));return F.log(n),o.filter((function(e){return I(a(e,2)[1])})).map((function(e){var t=a(e,2),r=t[0],o=t[1];return F.log(Ft(n,r),o),function(e){var t=a(e,2),n=t[0],r=t[1],o=encodeURIComponent(n),i=r;return"string"==typeof r&&(i=encodeURIComponent(r)),w(r)&&(i=encodeURIComponent(JSON.stringify(r)||"")),[o,i].join("=")}([r,o])})).join("&")}function Jt(e,t,n){var r=n.xhr,o=n.url;if(4===r.readyState){var i=r.status>=200&&r.status<300,s=j(r.responseText);if(0!==r.status)return s?t(i?function(e,t){var n=JSON.parse(e.responseText),r={status:"success",adid:n.adid,timestamp:n.timestamp,ask_in:n.ask_in,retry_in:n.retry_in,continue_in:n.continue_in,tracking_state:n.tracking_state,attribution:void 0,message:void 0};return S(t,"attribution")&&(r.attribution=n.attribution,r.message=n.message),x(r).filter((function(e){return!!a(e,2)[1]})).reduce(D,{})}(r,o):zt(r,"SERVER_CANNOT_PROCESS",!0)):e(zt(r,i?"SERVER_MALFORMED_RESPONSE":"SERVER_INTERNAL_ERROR"));e(zt(r,"NO_CONNECTION"))}}function Gt(e,t){var n=e.endpoint,r=e.url,o=e.method,i=void 0===o?"GET":o,s=e.params,u=function(e,t){var n=e.endpoint,r=e.url,o=e.method,i=Yt(e.params,t);return{fullUrl:n+r+("GET"===o?"?".concat(i):""),encodedParams:i}}({endpoint:n,url:r,method:i,params:void 0===s?{}:s},t),c=u.fullUrl,l=u.encodedParams;return new Vt((function(e,t){var n=new XMLHttpRequest;n.open(i,c,!0),function(e,t){var n="REQUEST HEADERS:",r=[["Client-SDK","js".concat(E.version)],["Content-Type","POST"===t?"application/x-www-form-urlencoded":"application/json"]];F.log(n),r.forEach((function(t){var r=a(t,2),o=r[0],i=r[1];e.setRequestHeader(o,i),F.log(Ft(n,o),i)}))}(n,i),n.onreadystatechange=function(){return Jt(t,e,{xhr:n,url:r})},n.onerror=function(){return t(zt(n,"TRANSACTION_ERROR"))},n.send("GET"===i?void 0:l)}))}function Xt(e,t){return"success"===e.status?function(e,t){var n=S(t,"gdpr_forget_device"),r=S(t,"attribution"),o=S(t,"session"),i=S(t,"disable_third_party_sharing"),a="opted_out"===e.tracking_state;if(!n&&a)return st("sdk:gdpr-forget-me"),e;r||n||a||!e.ask_in||st("attribution:check",e);o&&st("session:finished",e);if(i)return st("sdk:third-party-sharing-opt-out"),e;return e}(e,t):e}function Qt(e){return Mt().then((function(t){return Gt(e,t)})).then((function(t){return Xt(t,e.url)}))}var Ht={long:{delay:12e4,maxDelay:l,minRange:.5,maxRange:1},short:{delay:200,maxDelay:c,minRange:.5,maxRange:1},test:{delay:100,maxDelay:300}};function Zt(e,t){var n,r,o=Ht[t=t||"long"],i=o.delay*Math.pow(2,e-1);return i=Math.min(i,o.maxDelay),o.minRange&&o.maxRange&&(i*=(n=o.minRange,r=o.maxRange,Math.random()*(r-n)+n)),Math.round(i)}var $t,en,tn=navigator.onLine;function nn(){tn=!0}function rn(){tn=!1}function on(e,t,n){e.addEventListener&&e.addEventListener(t,n,!1)}function an(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}function sn(){return tn}var un;"undefined"==typeof Promise&&n(702).Promise;function cn(){var e=te.getCustomConfig(),t=e.customUrl,n=e.urlStrategy;return t?{app:t,gdpr:t}:n===un.India?[un.India,un.Default]:n===un.China?[un.China,un.Default]:[un.Default,un.India,un.China]}!function(e){e.Default="default",e.India="india",e.China="china"}(un||(un={}));var ln=(e($t={},un.Default,{app:"https://app.adjust.com",gdpr:"https://gdpr.adjust.com"}),e($t,un.India,{app:"https://app.adjust.net.in",gdpr:"https://gdpr.adjust.net.in"}),e($t,un.China,{app:"https://app.adjust.world",gdpr:"https://gdpr.adjust.world"}),$t),dn=(e(en={},un.Default,"default"),e(en,un.India,"Indian"),e(en,un.China,"Chinese"),en);function fn(e){var t=cn();return Array.isArray(t)?t.map((function(t){return e[t]||null})).filter((function(e){return!!e})):[t]}function pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=fn(e),n=0;return{next:function(){return n<t.length?{value:t[n++],done:!1}:{value:void 0,done:!0}},reset:function(){n=0}}}function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?hn(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var vn="undefined"==typeof Promise?n(702).Promise:Promise,gn=150,yn=2147483647,bn=6e4;const On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.method,r=void 0===n?"GET":n,o=e.params,i=void 0===o?{}:o,s=e.continueCb,u=e.strategy,c=e.wait,l={url:t,method:r,params:i,continueCb:s},d=t,f=r,h=mn({},i),m=s,v=u,g=pn(),y=g.next(),b=function(){g.reset(),y=g.next()},w=function(e,t){return e["/gdpr_forget_device"===t?"gdpr":"app"]},j=null,P={request:0,connection:0},k=S(c),_=null;function S(e){return(e=e||gn)>yn?yn:e}function N(e){var t=e.url,n=e.method,r=e.params,o=e.continueCb;t&&(d=t),n&&(f=n),O(r)||(h=mn({},r)),h=mn({createdAt:We()},h),"function"==typeof o&&(m=o)}function E(e){if(!_)return!1;if(j){var t=k-(Date.now()-_);if(e&&t<e)return!0;V()}return!1}function A(e){var t=e.wait,n=e.retrying;return k=t?S(t):k,E(t)?vn.resolve({status:"error",action:"CONTINUE",response:"",message:p.SKIP,code:"SKIP"}):d?(F.log("".concat(n?"Re-trying":"Trying"," request ").concat(d," in ").concat(k,"ms")),_=Date.now(),T({endpoint:w(y.value,d),url:d,method:f,params:mn({attempts:1},h)})):(F.error("You must define url for the request to be sent"),vn.reject({status:"error",action:"CONTINUE",response:"",message:p.MISSING_URL,code:"MISSING_URL"}))}function T(e){return W(),sn()?C(e):(P.connection+=1,F.log("No internet connectivity, trying request ".concat(e.url," in ").concat(bn,"ms")),new vn((function(t){j=setTimeout((function(){t(T(e))}),bn)})))}function C(e){return new vn((function(t,n){j=setTimeout((function(){_=null;var r=x(e.params).filter((function(e){return I(a(e,2)[1])})).reduce(D,{});return Qt({endpoint:e.endpoint,url:e.url,method:e.method,params:mn(mn({},r),{},{attempts:(P.request?P.request+1:1)+P.connection})}).then((function(e){return q(e,t)})).catch((function(e){return L(e,t,n)}))}),k)}))}function R(){d=l.url,f=l.method,h=mn({},l.params),m=l.continueCb}function K(e){F.log("Request ".concat(d||"unknown"," ").concat(e?"failed":"has been finished")),P.request=0,P.connection=0,k=gn,R(),V()}function B(e){return P.request+=1,V(),A({wait:e||Zt(P.request,v),retrying:!0})}function q(e,t){e&&e.retry_in?t(B(e.retry_in)):(b(),"function"==typeof m?m(e,K,B):K(),t(e))}function L(e,t,n){if(e&&"RETRY"===e.action)if("NO_CONNECTION"===e.code){var r=g.next();r.done?(b(),t(B(bn))):(y=r,t(B(gn)))}else t(B());else K(!0),n(e||{})}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.method,r=e.params,o=void 0===r?{}:r,i=e.continueCb,a=e.wait;return N({url:t,method:n,params:o,continueCb:i}),A({wait:a})}function U(){return!!j}function W(){j&&clearTimeout(j),j=null}function V(){var e=!!_;W(),_=null,e&&(k=gn,P.request=0,P.connection=0,F.log("Previous ".concat(d||"unknown"," request attempt canceled")),R())}return{send:M,isRunning:U,clear:V}};var wn=function(e){return e===f?"GDPR disable":"disable"},jn=function(e){return{start:{inProgress:"Adjust SDK ".concat(wn(e)," process has already started"),done:"Adjust SDK ".concat(wn(e)," process is now started")},finish:{inProgress:"Adjust SDK ".concat(wn(e)," process has already finished"),done:"Adjust SDK ".concat(wn(e)," process is now finished")}}};function Pn(e,t){var n=e.reason,r=e.pending,o=mt()||{},i="start"===t&&o.pending?"start":"finish",a="start"===t&&o.reason,s="finish"===t&&o.reason&&!o.pending;return a||s?(F.log(jn(o.reason)[i].inProgress),!1):(F.log(jn(n)[i].done),vt({reason:n||d,pending:r}),!0)}function kn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Pn({reason:e,pending:t||!1},"start")}function _n(){var e=mt()||{};return e.reason===d||e.reason===f&&!e.pending?"off":e.reason===f&&e.pending?"paused":"on"}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Sn(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var xn="undefined"==typeof Promise?n(702).Promise:Promise,Nn="activityState",In=!1;function En(e){return e?"unknown"===e.uuid?(kn({reason:f}),rt.destroy(),{exists:!0,stored:null}):(rt.init(e),{exists:!0,stored:e}):{exists:!1}}function An(){return"off"!==_n()&&rt.isStarted()}function Tn(){if(!An())return xn.resolve(null);var e=Dn(Dn({},rt.current),{},{lastActive:Date.now()});return Kt.updateItem(Nn,e).then((function(){return rt.current=e}))}function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Cn(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Kn="undefined"==typeof Promise?n(702).Promise:Promise,Bn=On({strategy:"long",continueCb:function(e,t){var n=e&&e.continue_in||null;return Mn.pause=n?{timestamp:Date.now(),wait:n}:null,Kt.getFirst(Ln).then((function(e){return e?Kt.deleteItem(Ln,e.timestamp):null})).then((function(){return t(),Mn.running=!1,Yn({wait:n})}))}}),qn=!1,Ln="queue",Mn={running:!1,timestamp:null,pause:null};function Un(){var e=Date.now();return Mn.timestamp&&e<=Mn.timestamp&&(e=Mn.timestamp+1),Mn.timestamp=e,e}function Wn(e){return S(e,"session")&&rt.resetSessionOffset(),rt.updateLastActive(),Tn()}function Vn(e){var t=e.url,n=e.method,r=e.params,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.auto,s=o.timestamp;rt.updateParams(t,i);var u=x(r||{}).filter((function(e){return I(a(e,2)[1])})).reduce(D,{}),c={timestamp:Un(),url:t,method:n,params:Rn(Rn({},rt.getParams(t)),u)};return s&&(c.createdAt=s),Kt.addItem(Ln,c).then((function(){return Wn(t)})).then((function(){return Mn.running?{}:Yn()}))}function zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timestamp,n=e.createdAt,r=e.url,o=e.method,i=e.params,a=arguments.length>1?arguments[1]:void 0,s=rt.current||{},u="/session"===r&&!s.installed,c=!r&&!o&&!i;return qn&&!u||c?(Mn.running=!1,Kn.resolve({})):Bn.send({url:r,method:o,params:Rn(Rn({},i),{},{createdAt:We(n||t)}),wait:a||Fn()})}function Fn(){var e=Mn.pause||{},t=e.timestamp,n=e.wait,r=Date.now()-(t||0);return r<n?n-r:null}function Yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cleanUp,n=e.wait;if(Mn.running)return Kn.resolve({});Mn.running=!0;var r=Kn.resolve({});return t&&(r=r.then(Gn)),r.then((function(){return Kt.getFirst(Ln)})).then((function(e){return zn(e,n)}))}function Jn(e){if(void 0!==e)if(e!==qn){var t=qn;qn=e,!e&&t&&Yn(),F.info("The app is now in ".concat(e?"offline":"online"," mode"))}else F.error("The app is already in ".concat(e?"offline":"online"," mode"));else F.error("State not provided, true or false has to be defined")}function Gn(){var e=Date.now()-te.requestValidityWindow;return Kt.deleteBulk(Ln,e,"upperBound")}var Xn="undefined"==typeof Promise?n(702).Promise:Promise,Qn="globalParams",Hn="No type provided",Zn="Global parameter type not provided, `callback` or `partner` types are available";function $n(e){return(e||[]).map((function(e){return{key:e.key,value:e.value}}))}function er(){return Xn.all([Kt.filterBy(Qn,"callback"),Kt.filterBy(Qn,"partner")]).then((function(e){var t=a(e,2),n=t[0],r=t[1];return{callbackParams:$n(n),partnerParams:$n(r)}}))}function tr(e,t){if(void 0===t)return F.error(Zn),Xn.reject({message:Hn});var n=k(e),r=Object.keys(n).map((function(e){return{key:e,value:n[e],type:t}}));return Xn.all([Kt.filterBy(Qn,t),Kt.addBulk(Qn,r,!0)]).then((function(e){var n=a(e,2),o=n[0],i=n[1],s=_(o.map((function(e){return e.key})),i.map((function(e){return e[0]})));return F.log("Following ".concat(t," parameters have been saved: ").concat(r.map((function(e){return"".concat(e.key,":").concat(e.value)})).join(", "))),s.length&&F.log("Keys: ".concat(s.join(", ")," already existed so their values have been updated")),i}))}function nr(e,t){return void 0===t?(F.error(Zn),Xn.reject({message:Hn})):Kt.deleteItem(Qn,[e,t]).then((function(n){return F.log("".concat(e," ").concat(t," parameter has been deleted")),n}))}function rr(e){return void 0===e?(F.error(Zn),Xn.reject({message:Hn})):Kt.deleteBulk(Qn,e).then((function(t){return F.log("All ".concat(e," parameters have been deleted")),t}))}var or,ir,ar,sr="undefined"==typeof Promise?n(702).Promise:Promise,ur=!1,cr=document;function lr(){return ar=function(){var e=document;if(void 0!==e.hidden)return{hidden:"hidden",visibilityChange:"visibilitychange"};for(var t=x({mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange",webkitHidden:"webkitvisibilitychange"}),n=0;n<t.length;n+=1){var r=a(t[n],2),o=r[0],i=r[1];if(void 0!==e[o])return{hidden:o,visibilityChange:i}}return null}(),ur?sr.reject({interrupted:!0,message:"Session watch already initiated"}):(ur=!0,at("session:finished",hr),ar&&on(cr,ar.visibilityChange,pr),ar&&cr[ar.hidden]?(F.log("Session request attempt canceled because the tab is still hidden"),sr.resolve({})):(rt.initParams(),vr()))}function dr(){return mr(),rt.updateSessionOffset(),rt.toBackground(),Tn()}function fr(){return Kt.getFirst(Nn).then((function(e){var t=rt.current,n=t.lastActive||0;if(An()&&n<e.lastActive){var r=!t.installed&&e.installed,o=(t.sessionCount||0)<(e.sessionCount||0);(r||o)&&st("sdk:installed"),rt.current=e,yt()}return e})).then((function(){rt.updateSessionLength(),rt.toForeground()})).then(vr)}function pr(){clearTimeout(ir);var e=ar&&cr[ar.hidden]?dr:fr;ir=setTimeout(e,0)}function hr(e,t){if(!t||"error"!==t.status)return rt.updateInstalled(),st("sdk:installed"),Tn();F.error("Session was not successful, error was returned from the server:",t.response)}function mr(){clearInterval(or)}function vr(){mr(),or=setInterval((function(){return rt.updateSessionOffset(),Tn()}),te.sessionTimerWindow);var e=rt.current,t=e.lastInterval,n=e.sessionCount>0;return!n||n&&t*u>=te.sessionWindow?er().then((function(e){var t,n,r;Vn({url:"/session",method:"POST",params:(t=e,n=t.callbackParams,r=t.partnerParams,{callbackParams:n.length?k(n):null,partnerParams:r.length?k(r):null})},{auto:!0})})):(st("attribution:check"),Tn())}function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?gr(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var br="undefined"==typeof Promise?n(702).Promise:Promise,Or=On({url:"/attribution",strategy:"short",continueCb:function(e,t,n){if(!e||e&&"error"===e.status)return t(),br.resolve({state:"unknown"});if(!e.ask_in)return t(),function(e){if(O(e)||!function(e){var t=e.adid,n=void 0===t?"":t,r=e.attribution,o=void 0===r?{}:r;return!!n&&!!_(wr,Object.keys(o)).length}(e)||function(e){var t=e.adid,n=e.attribution,r=rt.current.attribution||{};return!(n&&wr.some((function(e){return r[e]!==n[e]})))&&t===r.adid}(e))return br.resolve({state:"same"});var t=x(e.attribution).filter((function(e){var t=a(e,1)[0];return-1!==wr.indexOf(t)})).reduce(D,{adid:e.adid});return rt.current=yr(yr({},rt.current),{},{attribution:t}),Tn().then((function(){return st("attribution:change",t),F.info("Attribution has been updated"),{state:"changed"}}))}(e);return n(e.ask_in)}}),wr=["tracker_token","tracker_name","network","campaign","adgroup","creative","click_label","state"];function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?jr(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var kr=On({url:"/gdpr_forget_device",method:"POST",strategy:"short"}),_r={running:"Adjust SDK is running pending GDPR Forget Me request",pending:"Adjust SDK will run GDPR Forget Me request after initialisation",paused:"Adjust SDK is already prepared to send GDPR Forget Me request",off:"Adjust SDK is already disabled"};function Sr(e){var t=_n();return e||"on"===t?te.isInitialised()?(kr.send({params:Pr({},rt.getParams())}).then((function(){st("sdk:gdpr-forget-me")})),!0):(F.log(_r.pending),!0):(F.log(_r[t]),!1)}function Dr(){return Pn({reason:f,pending:!1},"finish")}var xr={running:"Adjust SDK is running pending third-party sharing opt-out request",delayed:"Adjust SDK will run third-party sharing opt-out request after initialisation",pending:"Adjust SDK already queued third-party sharing opt-out request",off:"Third-party sharing opt-out is already done",start:{inProgress:"Third-party sharing opt-out has already started",done:"Third-party sharing opt-out is now started"},finish:{inProgress:"Third-party sharing opt-out has already finished",done:"Third-party sharing opt-out is now finished"}};function Nr(){var e=gt()||{};return e.reason?e.pending?"pending":"off":"on"}function Ir(e){var t=Nr();return e||"on"===t?te.isInitialised()?(Vn({url:"/disable_third_party_sharing",method:"POST"}),!0):(F.log(xr.delayed),!0):(F.log(xr[t]),!1)}function Er(e,t){var n,r,o=gt()||{},i="start"===t&&e?"start":"finish",a="start"===t&&o.reason,s="finish"===t&&o.reason&&!o.pending;return a||s?(F.log(xr[i].inProgress),!1):(F.log(xr[i].done),r=(n={reason:d,pending:e})?lt({},n):null,ut.stores[dt]=lt(lt({},pt()),{},{thirdPartySharingDisabled:r}),ht(),!0)}function Ar(){return Er(!1,"finish")}function Tr(){"pending"===Nr()&&(F.log(xr.running),Ir(!0))}var Cr=[];function Rr(e,t){Cr.push({method:e,description:t,timestamp:Date.now()})}function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Kr(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var qr,Lr="undefined"==typeof Promise?n(702).Promise:Promise,Mr="eventDeduplication";function Ur(e,t){var n,r,o=t.callbackParams,i=t.partnerParams,a={},s=Br({eventToken:e.eventToken,deduplicationId:e.deduplicationId},(n=e.revenue,r=e.currency,isNaN(n)||(n=parseFloat(n))<0||!r?{}:{revenue:n.toFixed(5),currency:r})),u=Br(Br({},k(o)),k(e.callbackParams)),c=Br(Br({},k(i)),k(e.partnerParams));return O(u)||(a.callbackParams=u),O(c)||(a.partnerParams=c),Br(Br({},s),a)}function Wr(e){return e?Kt.getAll(Mr).then((function(e){return e.map((function(e){return e.id}))})).then((function(t){return-1===t.indexOf(e)?function(e){var t=te.getCustomConfig().eventDeduplicationListLimit,n=t>0?t:10;return Kt.count(Mr).then((function(e){var t=Lr.resolve();if(e>=n){var r=e-n+1;F.log("Event deduplication list limit has been reached. Oldest ids are about to be removed (".concat(r," of them)")),t=Kt.trimItems(Mr,r)}return t})).then((function(){return F.info("New event deduplication id is added to the list: ".concat(e)),Kt.addItem(Mr,{id:e})}))}(e):Lr.reject({message:"Event won't be tracked, since it was previously tracked with the same deduplication id ".concat(e)})})):Lr.resolve()}function Vr(e){return{clickTime:We(),source:"web_referrer",referrer:decodeURIComponent(e)}}function zr(){var e=window.location.search.substring(1).split("&").map((function(e){return e.split("=")})).reduce(D,{}).adjust_referrer;e&&Vn({url:"/sdk_click",method:"POST",params:Vr(e)})}function Fr(){var e,t,n=null===(e=navigator)||void 0===e||null===(t=e.userAgent)||void 0===t?void 0:t.toLowerCase();if(n&&!(n.length<1))return/ipad|iphone|ipod/.test(n)?qr.iOS:n.includes("windows")?/phone|mobile/.test(n)?qr.WindowsPhone:qr.WindowsPC:n.includes("android")?qr.Android:void 0}function Yr(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}!function(e){e.Android="android",e.iOS="ios",e.WindowsPC="windows",e.WindowsPhone="windows-phone"}(qr||(qr={}));var Jr="adjust-smart-banner";var Gr={getItem:function(e){return Yr(localStorage.getItem("".concat(Jr,".").concat(e)))},setItem:function(e,t){t?localStorage.setItem("".concat(Jr,".").concat(e),JSON.stringify(t)):localStorage.removeItem("".concat(Jr,".").concat(e))}},Xr={status:0,code:"NO_CONNECTION",message:"No internet connectivity"},Qr="undefined"==typeof Promise?n(702).Promise:Promise,Hr=function(){function e(){qe(this,e)}return Me(e,null,[{key:"xhr",value:function(e){return new Qr((function(t,n){var r=new XMLHttpRequest;r.open("GET",e),[["Client-SDK","js".concat(E.version)],["Content-Type","application/json"]].forEach((function(e){var t=a(e,2),n=t[0],o=t[1];r.setRequestHeader(n,o)})),r.onerror=function(){return n(Xr)},r.onreadystatechange=function(){if(4===r.readyState){var e=r.status>=200&&r.status<300,o=Yr(r.responseText);0===r.status?n(Xr):e?t(o):n({status:r.status,message:o||r.responseText||""})}},r.send()}))}},{key:"encodeParams",value:function(e){return Object.keys(e).map((function(t){return[encodeURIComponent(t),encodeURIComponent(e[t])].join("=")})).join("&")}},{key:"getEndpoint",value:function(){return e.lastSuccessfulEndpoint||e.defaultEndpoint}},{key:"request",value:function(t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ln,n=cn();if(Array.isArray(n)){var r=0;return function o(){var i=n[r++],a=t[i];return e(a).catch((function(e){if("NO_CONNECTION"===e.code&&(F.log("Failed to connect ".concat(dn[i]," endpoint")),r<n.length))return F.log("Trying ".concat(dn[n[r]]," one")),o();throw e}))}()}return e(n)}((function(r){var o=r.app,i=n?"?".concat(e.encodeParams(n)):"";return e.xhr("".concat(o).concat(t).concat(i)).then((function(t){return e.lastSuccessfulEndpoint=r.app,t})).catch((function(t){throw e.lastSuccessfulEndpoint=void 0,t}))}))}}]),e}();e(Hr,"defaultEndpoint","https://app.adjust.com"),e(Hr,"lastSuccessfulEndpoint",void 0);var Zr;"undefined"==typeof Promise&&n(702).Promise;function $r(e,t){return Hr.request("/smart_banner",{app_web_token:e}).then((function(e){var n,r,o,i,a,s,u,c=e.find((function(e){return e.platform===t}));return c?(i=(n=c).title,a=n.description,s=n.button_label,u=n.tracker_token,i&&a&&s&&u?{appId:(null===(r=n.app)||void 0===r?void 0:r.default_store_app_id)||"",appName:(null===(o=n.app)||void 0===o?void 0:o.name)||"",position:n.position||Zr.Bottom,imageUrl:n.image_url,header:i,description:a,buttonText:s,trackerToken:u,deeplinkPath:n.deeplink_path,dismissInterval:864e5}:null):null})).catch((function(e){return F.error("Network error occurred during loading Smart Banner: "+JSON.stringify(e)),null}))}!function(e){e.Top="top",e.Bottom="bottom"}(Zr||(Zr={}));var eo=n(379),to=n.n(eo),no=n(795),ro=n.n(no),oo=n(569),io=n.n(oo),ao=n(565),so=n.n(ao),uo=n(216),co=n.n(uo),lo=n(589),fo=n.n(lo),po=n(841),ho={};ho.styleTagTransform=fo(),ho.setAttributes=so(),ho.insert=io().bind(null,"head"),ho.domAPI=ro(),ho.insertStyleElement=co();to()(po.Z,ho);const mo=po.Z&&po.Z.locals?po.Z.locals:void 0;var vo="undefined"==typeof Promise?n(702).Promise:Promise,go=function(){function t(n,r,o){qe(this,t),e(this,"appTraceUrl",(function(e){return"https://www.apptrace.com/api/app/".concat(e,"/artwork_url_small")})),e(this,"appName",void 0),e(this,"image",void 0),e(this,"placeholder",void 0),this.image=r,this.placeholder=o,this.appName=n.appName;var i=this.getSources(n);this.showImage(i)}return Me(t,[{key:"getSources",value:function(e){var t=[];return e.imageUrl&&t.push(e.imageUrl),t.push(this.appTraceUrl(e.appId)),t}},{key:"showImage",value:function(e){var t=this;return e.reduce((function(e,n){return e.catch((function(){return t.loadImage(n,t.image)}))}),vo.reject()).then((function(){t.placeholder.remove()})).catch((function(){t.image.remove(),t.placeholder.innerText=t.appName.length?t.appName[0].toUpperCase():""}))}},{key:"loadImage",value:function(e,t){return new vo((function(n,r){t.onload=n,t.onerror=r,t.src=e}))}}]),t}(),yo=function(){function t(n,r,o){qe(this,t),e(this,"parent",document.body),e(this,"banner",void 0),e(this,"dismissButton",null),e(this,"onDismiss",void 0),this.onDismiss=r,this.render(n,o)}return Me(t,[{key:"render",value:function(e,t){this.banner=document.createElement("div"),this.banner.setAttribute("class",mo.bannerContainer);var n=e.position===Zr.Top?mo.stickyToTop:mo.stickyToBottom,r=e.deeplinkPath?"?deeplink=".concat(encodeURIComponent(e.deeplinkPath)):"",o="".concat(t,"/").concat(e.trackerToken).concat(r);this.banner.innerHTML=function(e,t,n,r,o){return'\n  <div class="'.concat(mo.banner," ").concat(e,'">\n    <div class="').concat(mo.bannerBody,'">\n      <div class="').concat(mo.content,'">\n        <button class="').concat(mo.dismiss,'"></button>\n        <div class="').concat(mo.appIcon,'">\n          <div class="').concat(mo.placeholder,'"></div>\n          <img class="').concat(mo.image,'" alt="').concat(t,'">\n        </div>\n        <div class="').concat(mo.textContainer,'">\n          <h4 class="').concat(mo.bannerText,'">').concat(t,'</h4>\n          <p class="').concat(mo.bannerText,'">').concat(n,'</p>\n        </div>\n        <a class="').concat(mo.action,'" href=').concat(o,">").concat(r,"</a>\n      </div>\n    </div>\n  </div>")}(n,e.header,e.description,e.buttonText,o),e.position===Zr.Top?this.parent.insertBefore(this.banner,this.parent.firstChild):this.parent.appendChild(this.banner),this.dismissButton=this.getElemByClass(mo.dismiss),this.dismissButton&&this.dismissButton.addEventListener("click",this.onDismiss);var i=this.getElemByClass(mo.placeholder),a=this.getElemByClass(mo.image);a&&i&&new go(e,a,i)}},{key:"show",value:function(){this.banner.hidden=!1}},{key:"hide",value:function(){this.banner.hidden=!0}},{key:"destroy",value:function(){this.removeDismissButtonHandler(),this.banner.remove()}},{key:"removeDismissButtonHandler",value:function(){this.dismissButton&&this.onDismiss&&(this.dismissButton.removeEventListener("click",this.onDismiss),this.dismissButton=null)}},{key:"getElemByClass",value:function(e){if(this.banner){var t=this.banner.getElementsByClassName(e);return t.length>0?t[0]:null}return null}}]),t}(),bo=("undefined"==typeof Promise&&n(702).Promise,function(){function t(){qe(this,t),e(this,"dismissedStorageKey","closed"),e(this,"timer",null),e(this,"dataFetchPromise",void 0),e(this,"banner",void 0),e(this,"logLevel",void 0)}return Me(t,[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";if(this.logLevel=n,F.setLogLevel(n),this.banner)F.error("Smart Banner already exists");else if(this.dataFetchPromise)F.error("Smart Banner is initialising already");else{var r=Fr();r?(this.dataFetchPromise=$r(e,r),this.dataFetchPromise.then((function(n){if(t.dataFetchPromise=null,n){var o=t.getDateToShowAgain(n.dismissInterval);if(Date.now()<o)return F.log("Smart Banner was dismissed"),void t.scheduleCreation(e,o);F.log("Creating Smart Banner"),t.banner=new yo(n,(function(){return t.dismiss(e,n.dismissInterval)}),Hr.getEndpoint()),F.log("Smart Banner created")}else F.log("No Smart Banners for ".concat(r," platform found"))}))):F.log("This platform is not one of the targeting ones, Smart Banner will not be shown")}}},{key:"show",value:function(){var e=this;if(!this.banner)return this.dataFetchPromise?(F.log("Smart Banner will be shown after initialisation finished"),void this.dataFetchPromise.then((function(){F.log("Initialisation finished, showing Smart Banner"),e.show()}))):void F.error("There is no Smart Banner to show, have you called initialisation?");this.banner.show()}},{key:"hide",value:function(){var e=this;if(!this.banner)return this.dataFetchPromise?(F.log("Smart Banner will be hidden after initialisation finished"),void this.dataFetchPromise.then((function(){F.log("Initialisation finished, hiding Smart Banner"),e.hide()}))):void F.error("There is no Smart Banner to hide, have you called initialisation?");this.banner.hide()}},{key:"destroy",value:function(){this.banner?(this.banner.destroy(),this.banner=null,F.log("Smart Banner removed")):F.error("There is no Smart Banner to remove")}},{key:"dismiss",value:function(e,t){F.log("Smart Banner dismissed"),Gr.setItem(this.dismissedStorageKey,Date.now());var n=this.getDateToShowAgain(t);this.scheduleCreation(e,n),this.destroy()}},{key:"scheduleCreation",value:function(e,t){var n=this;this.timer&&(F.log("Clearing previously scheduled creation of Smart Banner"),clearTimeout(this.timer),this.timer=null);var r=t-Date.now();this.timer=setTimeout((function(){n.timer=null,n.init(e,n.logLevel)}),r),F.log("Smart Banner creation scheduled on "+new Date(t))}},{key:"getDateToShowAgain",value:function(e){var t=Gr.getItem(this.dismissedStorageKey);return t?t+e:Date.now()}}]),t}()),Oo=new bo,wo=["logLevel","logOutput"];function jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Po(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?jo(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ko="undefined"==typeof Promise?n(702).Promise:Promise,_o=null,So=!1,Do=!1,xo=!1;function No(){Ir()&&Er(!0,"start")}function Io(){var e;"paused"===_n()&&(Dr(),ko.all([(e={uuid:"unknown"},rt.current=e,Kt.clear(Nn).then((function(){return Kt.addItem(Nn,e)}))),Kt.clear(Qn),Kt.clear(Ln)]).then(Co))}function Eo(){return So||te.isInitialised()}function Ao(){So=!1,Do=!1,Cr=[],Bn.clear(),Mn.running=!1,Mn.timestamp=null,Mn.pause=null,ur=!1,rt.toBackground(),mr(),ar&&(clearTimeout(ir),an(cr,ar.visibilityChange,pr)),Or.clear()}function To(e){e&&F.log("Adjust SDK has been shutdown due to asynchronous disable"),Ao(),it.forEach(clearTimeout),it=[],ot={},rt.destroy(),an(window,"online",nn),an(window,"offline",rn),Kt.destroy(),te.destroy()}function Co(){xo=!1,To(),kr.clear(),_o=null,F.log("Adjust SDK instance has been destroyed")}function Ro(e){F.log("Adjust SDK is starting with web_uuid set to ".concat(e.uuid));var t=rt.current.installed;"paused"===_n()&&(F.log(_r.running),Sr(!0)),t||Tr();var n=_n(),r=function(e){return"Adjust SDK start has been interrupted ".concat(e)};return"off"===n?(To(),ko.reject({interrupted:!0,message:r("due to complete async disable")})):"paused"===n?(Ao(),ko.reject({interrupted:!0,message:r("due to partial async disable")})):Do?ko.reject({interrupted:!0,message:r("due to multiple synchronous start attempt")}):(Yn({cleanUp:!0}),lr().then((function(){So=!1,Do=!0,t&&(Ko(),Tr())})))}function Ko(){var e;xo=!0,Cr.forEach((function(e){"function"==typeof e.method&&(F.log("Delayed ".concat(e.description," task is running now")),e.method(e.timestamp))})),Cr=[],(e="sdk:installed")&&x(ot).some((function(t){var n=a(t,2)[1];return n.some((function(t,r){if(t.id===e)return n.splice(r,1),!0}))}))}function Bo(e){if(e.interrupted)F.log(e.message);else if(To(),F.error("Adjust SDK start has been canceled due to an error",e),e.stack)throw e}function qo(e){"off"!==_n()?(te.set(e),on(window,"online",nn),on(window,"offline",rn),at("sdk:installed",Ko),at("sdk:shutdown",(function(){return To(!0)})),at("sdk:gdpr-forget-me",Io),at("sdk:third-party-sharing-opt-out",Ar),at("attribution:check",(function(e,t){return n=t,r=rt.current,(o=(n||{}).ask_in)||!r.attribution&&r.installed?(Or.send({params:yr({initiatedBy:n?"backend":"sdk"},rt.getParams()),wait:o}),rt.updateSessionOffset(),Tn()):br.resolve(r);var n,r,o})),"function"==typeof e.attributionCallback&&at("attribution:change",e.attributionCallback),(In?xn.reject({interrupted:!0,message:"Adjust SDK start already in progress"}):(In=!0,Kt.getFirst(Nn).then(En).then((function(e){if(e.exists)return In=!1,e.stored;var t,n=O(rt.current)?{uuid:(t=Date.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:11&n).toString(16)})))}:rt.current;return Kt.addItem(Nn,n).then((function(){return rt.init(n),yt(),In=!1,n}))})))).then(Ro).then(zr).catch(Bo)):F.log("Adjust SDK is disabled, can not start the sdk")}function Lo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.schedule,o=n.stopBeforeInit;if(Kt.getType()!==h)if("on"===_n()){if(r&&o&&!Eo())F.error("Adjust SDK can not ".concat(e,", sdk instance is not initialized"));else if("function"==typeof t){if(!r||xo&&Do||!o&&!Eo())return t();Rr(t,e),F.log("Running ".concat(e," is delayed until Adjust SDK is up"))}}else F.log("Adjust SDK is disabled, can not ".concat(e));else F.log("Adjust SDK can not ".concat(e,", no storage available"))}var Mo={initSdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.logLevel,r=e.logOutput,o=t(e,wo);F.setLogLevel(n,r),Eo()?F.error("You already initiated your instance"):te.hasMissing(o)||(So=!0,Kt.init(o.namespace).then((function(e){e.type!==h?(F.info("Available storage is ".concat(e.type)),_o=Po({},o),qo(o)):F.error("Adjust SDK can not start, there is no storage available")})))},getAttribution:function(){return Lo("get attribution",(function(){return rt.getAttribution()}))},getWebUUID:function(){return Lo("get web_uuid",(function(){return rt.getWebUUID()}))},trackEvent:function(e){Lo("track event",(function(t){return function(e,t){if(e&&(!e||!O(e)&&e.eventToken))return Wr(e.deduplicationId).then(er).then((function(n){Vn({url:"/event",method:"POST",params:Ur(e,n)},{timestamp:t})})).catch((function(e){e&&e.message&&F.error(e.message)}));F.error("You must provide event token in order to track event")}(e,t)}),{schedule:!0,stopBeforeInit:!0})},addGlobalCallbackParameters:function(e){Lo("add global callback parameters",(function(){return tr(e,"callback")}))},addGlobalPartnerParameters:function(e){Lo("add global partner parameters",(function(){return tr(e,"partner")}))},removeGlobalCallbackParameter:function(e){Lo("remove global callback parameter",(function(){return nr(e,"callback")}))},removeGlobalPartnerParameter:function(e){Lo("remove global partner parameter",(function(){return nr(e,"partner")}))},clearGlobalCallbackParameters:function(){Lo("remove all global callback parameters",(function(){return rr("callback")}))},clearGlobalPartnerParameters:function(){Lo("remove all global partner parameters",(function(){return rr("partner")}))},switchToOfflineMode:function(){Lo("set offline mode",(function(){return Jn(!0)}))},switchBackToOnlineMode:function(){Lo("set online mode",(function(){return Jn(!1)}))},stop:function(){kn()&&te.isInitialised()&&To()},restart:function(){var e;((e=mt()||{}).reason===f?(F.log("Adjust SDK is disabled due to GDPR-Forget-Me request and it can not be re-enabled"),!1):e.reason?(F.log("Adjust SDK has been enabled"),vt(null),!0):(F.log("Adjust SDK is already enabled"),!1))&&_o&&qo(_o)},gdprForgetMe:function(){var e=Sr();e&&(e=kn(f,!0))&&te.isInitialised()&&Ao()},disableThirdPartySharing:function(){Lo("disable third-party sharing",No,{schedule:!0,stopBeforeInit:!1})},initSmartBanner:function(e){var t=e.webToken,n=e.logLevel;Oo.init(t,n)},__testonly__:{destroy:Co,clearDatabase:function(){return Kt.deleteDatabase()}}};const Uo=Mo})(),r=r.default})()));
